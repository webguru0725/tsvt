var lavaCalendar={init:function(e){var a=this,t=$(e),n=t.data("calendar").options,i=$.fn.lavaCalendar.locales[n.lang];t.addClass("lava-calendar");for(var o=$("<div class='lava-calendar-header' style='background:"+n.color+";'></div>").appendTo(t),l=($("<div class='lava-calendar-prev'>«</div>").appendTo(o),$("<div class='lava-calendar-next'>»</div>").appendTo(o),$("<span></span>").appendTo(o),$("<table class='lava-calendar-table'></table>").appendTo(t)),r=$("<thead class='lava-calendar-thead'></thead>").appendTo(l),d=$("<tbody class='lava-calendar-tbody'></tbody>").appendTo(l),s=["<tr>"],c=0;7>c;c++)s.push("<th style='color:"+n.color+";'>"+i[c]+"</th>");s.push("</tr>");for(var p=[],c=0;6>c;c++){for(var h=["<tr>"],v=0;7>v;v++)h.push("<td></td>");h.push("</tr>"),p.push(h.join(""))}r.html(s.join("")),d.html(p.join("")),a.loadDate(e),a.resize(e)},loadDate:function(e){var a=this,t=$(e),n=t.data("calendar").options,i=n.currentDate;i.setDate(1);var o=n.currentDate.getFullYear(),l=n.currentDate.getMonth();t.find(".lava-calendar-header span").text(o+"-"+a.round(l+1));var r=t.find("td"),d=i.getDay(),s=new Date(i.getTime());s.setMonth(l+1),s.setTime(s.getTime()-864e5);var c=s.getDate();r.text("").removeAttr("data-date").removeAttr("class");for(var p=0;c>p;p++)r.eq(p+d).text(p+1).attr("data-date",o+"/"+(l+1)+"/"+(p+1));if(n.showOtherDate){for(var h=new Date(i.getTime()-864e5),v=h.getDate(),o=h.getFullYear(),l=h.getMonth(),p=0;d>p;p++){var f=v-d+p+1;r.eq(p).text(f).attr("data-date",o+"/"+(l+1)+"/"+f).addClass("other")}var u=new Date(i.getTime());u.setMonth(l+2);for(var o=u.getFullYear(),l=u.getMonth(),p=0;42-d-c>p;p++)r.eq(d+c+p).text(p+1).attr("data-date",o+"/"+(l+1)+"/"+(p+1)).addClass("other")}if(n.data&&a.loadData(e),n.date){var f=n.date;t.find("td[data-date='"+f.getFullYear()+"/"+(f.getMonth()+1)+"/"+f.getDate()+"']").addClass("active")}},loadData:function(e){var a=$(e),t=a.data("calendar").options,n=t.data,i=a.find("td");i.css({background:"transparent"}),i.prop("class","").removeAttr("data-type").removeAttr("data-blackbox").children().remove();for(var o=0;o<i.length;o++){var l=i.eq(o).attr("data-date");if(l)for(var r=l.split("/")[0],d=l.split("/")[1],s=l.split("/")[2],c=0;c<n.length;c++){var p=n[c].date;if(p.getFullYear()==r&&p.getMonth()+1==d&&p.getDate()==s){"normal"==n[c].type?i.eq(o).addClass("lava-calendar-normal").attr("data-type","normal").css({background:t.normalColor}):"alarm"==n[c].type&&i.eq(o).addClass("lava-calendar-alarm").attr("data-type","alarm").css({background:t.alarmColor}),n[c].blackbox&&i.eq(o).append("<div class='lava-calendar-blackbox'></div>").attr("data-blackbox",!0),n[c].device&&i.eq(o).append("<div class='lava-calendar-device'></div>"),n[c].server&&i.eq(o).append("<div class='lava-calendar-server'></div>");break}}}},gotoMonth:function(e,a){var t=this,n=$(e),i=n.data("calendar").options,o=i.currentDate.getMonth();if(i.currentDate.setMonth("next"==a?o+1:o-1),t.loadDate(e),i.onMonthChange){var l=i.currentDate,r=new Date(l.getFullYear()+"/"+t.round(l.getMonth()+1)+"/"+t.round(l.getDate())+" 00:00:00"),d=new Date(r.getTime());d.setMonth(d.getMonth()+1),d.setTime(d.getTime()-1),i.onMonthChange(r,d)}},resize:function(e){var a=$(e),t=.6*a.width()/6;a.find("td").css({height:t})},round:function(e){return 10>e?"0"+e:e},bindEvent:function(e){var a=this,t=$(e),n=t.data("calendar").options;t.on("selectstart",function(){return!1}),t.find(".lava-calendar-prev").on("click",function(){a.gotoMonth(e,"prev")}),t.find(".lava-calendar-next").on("click",function(){a.gotoMonth(e,"next")}),t.find("td").on("click dblclick",function(i){t.find("td").children(".lava-calendar-active").remove();var o=$(this),l=o.width()+2,r=o.height()+2;if(o.append("<div class='lava-calendar-active' style='width:"+l+"px;height:"+r+"px;'></div>"),"click"==i.type&&n.onClick&&o.attr("data-date")){var d={date:new Date(o.attr("data-date")),type:o.attr("data-type"),blackbox:o.attr("data-blackbox")};n.date=d.date,n.onClick(d)}if("dblclick"==i.type&&n.onDblclick&&o.attr("data-date")){var d={date:new Date(o.attr("data-date")),type:o.attr("data-type"),blackbox:o.attr("data-blackbox")};n.date=d.date,n.onDblclick(d)}o.hasClass("active")||(t.find(".active").removeClass("active"),o.addClass("active")),o.hasClass("other")&&(n.currentDate=new Date(o.attr("data-date")),a.loadDate(e))})},select:function(e,a){var t=this,n=$(e),i=n.data("calendar").options;i.date=a,i.currentDate=new Date(a.getFullYear()+"/"+(a.getMonth()+1)+"/1"),t.loadDate(e),n.find(".active").removeClass("active");var o=a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate(),l=n.find("td[data-date='"+o+"']");l.addClass("active")}};$.fn.lavaCalendar=function(e,a){return"string"==typeof e?$.fn.lavaCalendar.methods[e](this,a):void $.each(this,function(){var a={},t=$(this).data("calendar");$.extend(a,$.fn.lavaCalendar.defaults),$(this).data("calendar",{options:a}),$.extend($(this).data("calendar").options,e),t||lavaCalendar.init(this),lavaCalendar.bindEvent(this),e.data&&lavaCalendar.loadData(this)})},$.fn.lavaCalendar.defaults={lang:"zh-CN",alarmColor:"#e26a6a",normalColor:"#26c281",currentDate:new Date,showOtherDate:!1,onClick:null,onDblclick:null,onMonthChange:null},$.fn.lavaCalendar.methods={loadData:function(e,a){$(e).data("calendar").options.data=a,lavaCalendar.loadData(e)},getDate:function(e){return $(e).data("calendar").options.currentDate},getSelected:function(e){return $(e).data("calendar").options.date},select:function(e,a){lavaCalendar.select(e,a)},unselect:function(e){var a=$(e);a.data("calendar").options.date=null,a.find(".active").removeClass("active")}},$.fn.lavaCalendar.locales={"zh-CN":["日","一","二","三","四","五","六"],"zh-TW":["日","一","二","三","四","五","六"],ar:"ح_ن_ث_ر_خ_ج_س".split("_"),bo:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),de:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"en-gb":"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),"en-US":"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),fr:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),it:"D_L_Ma_Me_G_V_S".split("_"),ja:"日_月_火_水_木_金_土".split("_"),ru:"вс_пн_вт_ср_чт_пт_сб".split("_"),"pt-PT":"7_1_2_3_4_5_6".split("_"),fa:"S_M_T_W_T_F_S".split("_")},!function(e){var a={init:function(a,t){var n=this,i=e(a),o=i.data("combo").options;if(t){var l=e("<span class='lavaui-combo-container'></span>");i.after(l),l.append(i);var r=e("<div class='lavaui-combo-panel'></div>").appendTo(l),d=o.panelWidth?o.panelWidth:i.innerWidth();r.css({width:d,height:o.panelHeight}),i.data("combo").panel=r,o.showArrow&&e("<span class='lavaui-combo-triangle'></span>").appendTo(l).css({top:i.innerHeight()/2-3})}else{var l=i.parent();l.children(".lavaui-combo-panel").remove();var r=e("<div class='lavaui-combo-panel'></div>").appendTo(l),d=o.panelWidth?o.panelWidth:i.innerWidth();r.css({width:d,height:o.panelHeight}),i.data("combo").panel=r,o.showArrow?e("<span class='lavaui-combo-triangle'></span>").appendTo(l).css({top:i.innerHeight()/2-3}):i.parent().children(".lavaui-combo-triangle").remove()}n.initEvent(a),o.editable||i.prop("readonly",!0)},initEvent:function(a){var t=e(a),n=t.data("combo").options,i=t.data("combo").panel,o=t.siblings(".lavaui-combo-triangle");t.on("click",function(a){e(this).parent().parent().parent().hasClass("datecontainer")||e(document).click(),i.show(),a.stopPropagation()}),n.showArrow&&o.on("click",function(a){e(this).parent().parent().parent().hasClass("datecontainer")||e(document).click(),i.show(),a.stopPropagation()}),i.on("click",function(e){e.stopPropagation()}),e(document).on("click",function(){i.hide()}),e("body").delegate(".modal-dialog","click",function(){i.hide()})}};e.fn.combo=function(t,n){return"string"==typeof t?e.fn.combo.methods[t](this,n):void e.each(this,function(){var n=!0;e(this).data("combo")&&e(this).data("combo").panel&&(n=!1);var i={};e.extend(i,e.fn.combo.defaults),e.extend(i,t),n?e(this).data("combo",{options:i}):e(this).data("combo").options=i,a.init(this,n)})},e.fn.combo.defaults={panelHeight:150,panelWidth:null,editable:!0,showArrow:!0},e.fn.combo.methods={options:function(a){return e(a).data("combo").options},panel:function(a){return e(a).data("combo").panel}}}(jQuery,window),!function(e){var a={init:function(a){var t=this,n=e(a),i=n.data("combobox").options;n.combo({editable:i.editable,panelHeight:i.panelHeight});var o=n.data("combo").panel.addClass("list-group").css({overflow:"auto"});n.data("combobox").panel=o,i.url?t.remoteData(n,i,o):i.data&&t.loadData(n,i,o),t.initEvent(n,i,o)},loadData:function(e,a,t,n){for(var i=a.data,o=[],l=e.val(),r=0;r<i.length;r++)(!n||n(l,i[r]))&&o.push("<a href='javascript:;' class='list-group-item' data-value='"+i[r][a.valueField]+"'>"+i[r][a.textField]+"</a>");t.html(o.join("")),a.onLoadSuccess&&a.onLoadSuccess()},remoteData:function(a,t,n){var i=this;e.ajax({url:t.url,type:t.method,dataType:"json",data:t.formData,success:function(e){t.loadFilter&&(e=t.loadFilter(e)),t.data=e,i.loadData(a,t,n)}})},initEvent:function(a,t,n){var i=this;n.delegate(".list-group-item","click",function(){var o=e(this),l=o.attr("data-value");t.multiple?(o.hasClass("active")?(o.removeClass("active"),i.setValue(a,t,l,!1),t.onUnselect&&t.onUnselect(i.getItemByValue(t.data,l,t.valueField))):(o.addClass("active"),i.setValue(a,t,l,!0),t.onSelect&&t.onSelect(i.getItemByValue(t.data,l,t.valueField))),i.setInputValue(a,t.values,t.textField)):(o.hasClass("active")||(n.find(".active").removeClass("active"),o.addClass("active"),i.setValue(a,t,l),t.onSelect&&t.onSelect(i.getItemByValue(t.data,l,t.valueField))),n.hide())}),"local"==t.mode&&t.filter?a.on("keyup",function(){t.value=null,a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){i.loadData(a,t,n,t.filter)},200)}):"remote"==t.mode&&t.loader&&a.on("keyup",function(){t.values={},a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){t.loader({q:a.val()},function(e){t.data=e,i.loadData(a,t,n)},function(){console.log&&console.log("loader: load err.")})},200)})},setValue:function(e,a,t,n){var i=this,o=(a.data,a.values),l=i.getItemByValue(a.data,t,a.valueField);void 0==n?(a.value=t,e.val(l?l[a.textField]:"")):1==n?o[t]=l?l[a.textField]:"":delete o[t]},getItemByValue:function(e,a,t){for(var n=0;n<e.length;n++)if(e[n][t]==a)return e[n];return null},setInputValue:function(e,a){var t=[];for(var n in a)t.push(a[n]);e.val(t.join(","))},setValues:function(a,t){var n=e(a),i=n.data("combobox").options,o=this;i.values={};for(var l=0;l<t.length;l++){var r=o.getItemByValue(i.data,t[l],i.valueField);i.values[t[l]]=r?r[i.textField]:""}o.setInputValue(n,i.values,i.textField)}};e.fn.combobox=function(t,n){return"string"==typeof t?e.fn.combobox.methods[t](this,n):void e.each(this,function(){var n={};e.extend(n,e.fn.combo.defaults),e.extend(n,e.fn.combobox.defaults),e.extend(n,t),e(this).data("combobox",{options:n}),a.init(this)})},e.fn.combobox.defaults={url:null,method:"get",valueField:"id",textField:"text",multiple:!1,panelHeight:250,value:null,values:{},mode:"local",filter:null,formData:{},onSelect:null,onLoadSucces:null},e.fn.combobox.methods={getValue:function(a){return e(a).data("combobox").options.value},getValues:function(a){var t=e(a).data("combobox").options.values,n=[];for(var i in t)n.push(i);return n},setValue:function(t,n){var i=e(t),o=i.data("combobox").options;a.setValue(i,o,n),i.data("combobox").panel.find(".active").removeClass("active"),i.data("combobox").panel.find("[data-value="+n+"]").addClass("active")},setValues:function(t,n){var i=e(t);a.setValues(t,n),i.data("combobox").panel.find(".active").removeClass("active");for(var o in n)i.data("combobox").panel.find("[data-value="+n[o]+"]").addClass("active")},reload:function(t,n){var i=e(t);n&&(i.data("combobox").options.url=n),a.remoteData(i,i.data("combobox").options,i.data("combo").panel)}}}(jQuery),!function(e){var a={init:function(a){var t=this,n=e(a),i=n.data("daterange"),o=i.options;n.combo({editable:o.editable,panelWidth:160,panelHeight:"auto",showArrow:!1});var l=n.combo("panel").addClass("daterange-dropdown");if(!o.locales.separator&&o.lang&&(o.locales=e.fn.daterange.lang[o.lang]),o.ranges){var r=[],d=o.ranges;for(var s in d)r.push("<a href='javascript:;' class='btn outline daterange-range' data-start='"+d[s][0]+"' data-end='"+d[s][1]+"'>"+s+"</a>");r.push("<a href='javascript:;' class='btn outline daterange-range custom'>"+o.locales.customRange+"</a>"),r.push("<a href='javascript:;' class='btn success apply'>"+o.locales.apply+"</a>"),r.push("<a href='javascript:;' class='btn outline warning cancel'>"+o.locales.cancel+"</a>");var c=e("<div class='daterange-btn-container'></div>");c.html(r.join("")),l.append(c)}var p=e("<div class='datecontainer'><div class='form-group'></div><div class='form-group'></div></div>").appendTo(l),h=e("<input type='text' class='form-control'>").appendTo(p.children().eq(0)),v=e("<input type='text' class='form-control'>").appendTo(p.children().eq(1));t.initDateBox(n,o,h,v),t.initEvent(n,o,l,h,v)},initDateBox:function(e,a,t,n){t.datetimebox({showTime:a.showTime,format:a.format,panelWidth:220,lang:e.data("daterange").options.lang}),n.datetimebox({showTime:a.showTime,format:a.format,panelWidth:220,lang:e.data("daterange").options.lang})},initEvent:function(a,t,n,i,o){var l=this,r=n.find(".datecontainer"),d=n.find(".daterange-range"),s=n.find(".apply"),c=n.find(".cancel");d.on("click",function(){var d=e(this);if(d.hasClass("custom")){r.show(),n.css({width:610});var s=a.val();s&&(i.datetimebox("setValue",s.split(" "+t.locales.separator+" ")[0]),o.datetimebox("setValue",s.split(" "+t.locales.separator+" ")[1]))}else{var c=parseInt(d.attr("data-start")),p=parseInt(d.attr("data-end")),h=new Date((new Date).getTime()+864e5*c),v=new Date((new Date).getTime()+864e5*p),f=l.formatDate(h,t.format.split(" ")[0]),u=l.formatDate(v,t.format.split(" ")[0]);t.showTime&&(f+=" 00:00:00",u+=" 23:59:59"),a.val(f+" "+t.locales.separator+" "+u),t.startDate=h,t.endDate=v,t.type="range",n.hide(),d.hasClass("outline")&&(n.find(".daterange-range").addClass("outline"),d.removeClass("outline")),t.startDate=f,t.endDate=u}}),s.on("click",function(){if(i.is(":visible")){var e=i.val(),l=o.val();if(e>l||!e||!l)return;a.val(e+" "+t.locales.separator+" "+l),n.find(".daterange-range").addClass("outline"),n.find(".custom").removeClass("outline"),t.startDate=e,t.endDate=l}t.type="custom",n.hide()}),c.on("click",function(){n.hide()}),a.on("click",function(){"custom"!=t.type?(n.css({width:160}),r.hide()):(d.addClass("outline"),n.find(".custom").removeClass("outline").click())})},formatDate:function(e,a){var t=this,n=e.getFullYear(),i=e.getMonth()+1,o=e.getDate();return a.replace("yyyy",n).replace("MM",t.round(i)).replace("dd",t.round(o))},round:function(e){return 10>e?"0"+e:e},setStartTime:function(a,t){var n=e(a),i=n.data("daterange").options;i.startDate=t,i.endDate&&n.val(t+" "+i.locales.separator+" "+i.endDate),i.type="custom"},setEndTime:function(a,t){var n=e(a),i=n.data("daterange").options;i.endDate=t,i.startDate&&n.val(i.startDate+" "+i.locales.separator+" "+t),i.type="custom"},clear:function(a){var t=e(a),n=t.data("daterange").options;n.startDate="",n.endDate="",t.val("")}};e.fn.daterange=function(t,n){return"string"==typeof t?e.fn.daterange.methods[t](this,n):void e.each(this,function(){var n={};e.extend(n,e.fn.combo.defaults),e.extend(n,e.fn.lavaCalendar.defaults),e.extend(n,e.fn.datetimebox.defaults),e.extend(n,e.fn.daterange.defaults),n.showTime&&e.extend(n,e.fn.timespinner.defaults),e.extend(n,t),e(this).data("daterange",{options:n}),a.init(this)})},e.fn.daterange.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,panelHeight:"auto",editable:!0,startDate:"",endDate:"",locales:{},lang:"en-US"},e.fn.daterange.methods={setStartTime:function(e,t){a.setStartTime(e,t)},setEndTime:function(e,t){a.setEndTime(e,t)},getStartTime:function(a){return e(a).data("daterange").options.startDate},getEndTime:function(a){return e(a).data("daterange").options.endDate},clear:function(e){a.clear(e)}},e.fn.daterange.lang={"en-US":{separator:"to",apply:"apply",cancel:"cancel",customRange:"custom range"},"zh-CN":{separator:"至",apply:"应用",cancel:"取消",customRange:"自定义范围"},"zh-TW":{separator:"至",apply:"應用",cancel:"取消",customRange:"自定義範圍"},"pt-PT":{separator:"para",apply:"Aplicação",cancel:"Cancelar",customRange:"Escala personalizada"},af:{separator:"tot",apply:"toepassing",cancel:"Canceled",customRange:"Aangepast bereik"},fr:{separator:"à",apply:"appliquer",cancel:"annulé",customRange:"Gamme personnalisée"},jp:{separator:"に",apply:"適用する",cancel:"キャンセル",customRange:"カスタムレンジ"},ar:{separator:"إلى",apply:"تطبق",cancel:"إلغاء",customRange:"نطاق مخصص"}}}(jQuery),!function(e){var a={init:function(e){var a=this;a.initDom(e)},initDom:function(a){var t=this,n=e(a),i=n.data("datetimebox").options;n.combo(i);var o=n.combo("panel"),l=e("<div class='datetimebox-container'></div>").appendTo(o),r={showOtherDate:!0,onClick:function(){t.formatDate(n,l,n.data("datetimebox").timespinner,i)},lang:i.lang?i.lang:"zh-CN"};if(l.lavaCalendar(r),n.data("datetimebox").calendar=l,i.showTime){var d=e("<div class='form-group' style='margin:5px;'></div>").appendTo(o),s=e("<input type='text' class='form-control' />").appendTo(d),c={showSeconds:/ss/.test(i.format),onChange:function(){t.formatDate(n,l,s,i)}};s.timespinner(c),n.data("datetimebox").timespinner=s}i.showIcon&&n.after("<span class='datetimebox-icon'></span>"),t.initEvent(n,l,n.data("datetimebox").timespinner,i)},initEvent:function(e,a,t,n){var i=this;e.on("blur",function(){var o=e.val();if(""!=o){t&&o.split("")[1]&&t.timespinner("setValue",o.split(" ")[1]);var l=o.split(" ")[0].replace(/-/g,"/");if(isNaN(new Date(l).getFullYear()))var r=new Date;else var r=new Date(l);a.lavaCalendar("select",r),i.formatDate(e,a,t,n)}}),n.showIcon&&e.next(".datetimebox-icon").on("click",function(a){e.click(),a.stopPropagation()})},formatDate:function(e,a,t,n){var i=this,o=a.lavaCalendar("getSelected");o||(o=new Date,a.lavaCalendar("select",o));var l=o.getFullYear(),r=i.round(o.getMonth()+1),d=i.round(o.getDate()),s=n.format.split(" ")[0].replace("yyyy",l).replace("MM",r).replace("dd",d);if(t&&!t.val()){var c=new Date,p=n.format.split(" ")[1].replace("hh",i.round(c.getHours())).replace("mm",i.round(c.getMinutes())).replace("ss",i.round(c.getSeconds()));t.val(p)}s=t?s+" "+t.val():s,e.val(s)},round:function(e){return 10>e?"0"+e:e},setValue:function(a,t){var n=this,i=e(a),o=i.data("datetimebox"),l=o.calendar,r=o.timespinner,d=o.options;return""==t?(l.lavaCalendar("unselect"),r&&r.val(""),void i.val("")):(r&&t.split("")[1]&&r.timespinner("setValue",t.split(" ")[1]),l.lavaCalendar("select",new Date(t.split(" ")[0].replace(/-/g,"/"))),void n.formatDate(i,l,r,d))}};e.fn.datetimebox=function(t,n){return"string"==typeof t?e.fn.datetimebox.methods[t](this,n):void e.each(this,function(){var n={};e.extend(n,e.fn.combo.defaults),e.extend(n,e.fn.lavaCalendar.defaults),e.extend(n,e.fn.datetimebox.defaults),n.showTime&&e.extend(n,e.fn.timespinner.defaults),e.extend(n,t),e(this).data("datetimebox",{options:n}),a.init(this)})},e.fn.datetimebox.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,showIcon:!1,panelWidth:250,panelHeight:"auto",showArrow:!1},e.fn.datetimebox.methods={setValue:function(e,t){a.setValue(e,t)}}}(jQuery);var datetimepicker={bigMonth:[1,3,5,7,8,10,12],smallMonth:[2,4,6,9,11],init:function(e){var a=this;$(e),a.initDom(e),a.bindEvent(e)},initDom:function(e){for(var a=$(e),t=a.data("datetimepicker").options,n=[],i=parseInt(t.startYear),o=parseInt(t.endYear),l=0;o-i+1>l;l++)n.push(i+l);for(var r=datetimepicker.generatePickItem(n),d=[],l=0;12>l;l++)d.push(l+1);for(var s=datetimepicker.generatePickItem(d),c=[],l=0;31>l;l++)c.push(l+1);for(var p=datetimepicker.generatePickItem(c),h=[],l=0;24>l;l++)h.push(l);for(var v=datetimepicker.generatePickItem(h),f=[],l=0;61>l;l++)f.push(l);for(var u=datetimepicker.generatePickItem(f),m=[],l=0;61>l;l++)m.push(l);var b=datetimepicker.generatePickItem(m),g=(new Date).getTime()+parseInt(10*Math.random()),y='<div id="'+g+'" class="datetime-container"><div class="datetime-header">'+t.header+'</div><div class="datetime-body"><div class="datetime-item-col"><div class="datetime-item-col-wrapper year">'+r.join("")+'</div></div><div class="datetime-item-col"><div class="datetime-item-col-wrapper month">'+s.join("")+'</div></div><div class="datetime-item-col"><div class="datetime-item-col-wrapper day">'+p.join("")+"</div></div>";t.showTime&&(y=y+'<div class="datetime-item-col-divider"></div><div class="datetime-item-col"><div class="datetime-item-col-wrapper hour">'+v.join("")+'</div></div><div class="datetime-item-col-divider">:</div><div class="datetime-item-col"><div class="datetime-item-col-wrapper minute">'+u.join("")+'</div></div><div class="datetime-item-col-divider">:</div><div class="datetime-item-col"><div class="datetime-item-col-wrapper second">'+b.join("")+"</div></div>"),y+='<div class="datetime-item-highlight"></div></div></div>',t.container=$(y).appendTo("body")},generatePickItem:function(e){var a='<div class="datetime-item {selected}" data-item-value="{value}">{value}</div>',t=[];if(0===e.length)return[];for(var n=0;n<e.length;n++){var i=a.replace(/{value}/g,e[n]<10?"0"+e[n]:e[n]);i=2===n?i.replace("{selected}","datetime-selected"):i.replace("{selected}",""),t.push(i)}return t},bindEvent:function(e){var a=$(e),t=a.data("datetimepicker").options;a.on("click",function(){t.container.is(":visible")||t.container.css("display","block")}),$(".datetime-item-col").on("touchstart",function(e){var a=e.originalEvent.targetTouches[0];t.touch={startY:a.pageY}}),$(".datetime-item-col").on("touchmove",function(e){var a=$(e.target);a.hasClass("datetime-item-col-wrapper")||a.hasClass("datetime-item-col")?a.hasClass("datetime-item-col")&&(a=a.children(".datetime-item-col-wrapper")):a=a.parent(".datetime-item-col-wrapper");var n=e.originalEvent.targetTouches[0];t.touch.endY=n.pageY;var i=t.touch.endY-t.touch.startY,o=parseInt(a.css("margin-top"));a.css("margin-top",o+i),t.touch.startY=n.pageY}),$(".datetime-item-col").on("touchend",function(a){var t=$(a.target),n=0;t.hasClass("datetime-item-col-wrapper")||t.hasClass("datetime-item-col")?t.hasClass("datetime-item-col")&&(t=t.children(".datetime-item-col-wrapper")):t=t.parent(".datetime-item-col-wrapper");var i=parseInt(t.css("margin-top"));if(0>i){var o=Math.abs(i);o=36*Math.round(o/36),o>t.height()-108&&(o=t.height()-108),t.animate({marginTop:-o},800),n=o/36+2}else i=36*Math.round(i/36),i>72&&(i=72),t.animate({marginTop:i},800),n=i/36,0===n?n=2:2===n&&(n=0);t.children(".datetime-item.datetime-selected").removeClass("datetime-selected"),t.children(".datetime-item").eq(n).addClass("datetime-selected"),datetimepicker.changeDayToMaxDay(e)})},changeDayToMaxDay:function(e){var a=$(e).data("datetimepicker").options.container,t=a.find(".year").children(".datetime-selected").attr("data-item-value"),n=new Date;n.setYear(parseInt(t));var i=parseInt(a.find(".month").find(".datetime-selected").attr("data-item-value")),o=parseInt(a.find(".day").find(".datetime-selected").attr("data-item-value"));n.setMonth(i),n.setDate(1);var l=new Date(n.getTime()-864e5).getDate();o>l&&(a.find(".day").children(".datetime-selected").removeClass("datetime-selected"),a.find(".day").children(".datetime-item[data-item-value='"+l+"']").addClass("datetime-selected"),a.find(".day").animate({marginTop:36*-(l-3)},800))},setValue:function(e,a,t){var n=$(e).data("datetimepicker").options.container;2>=t?(0===t?t=2:2===t&&(t=0),n.find("."+a).animate({marginTop:36*t},800)):n.find("."+a).animate({marginTop:36*-(t-2)},800)}};$.fn.datetimepicker=function(e,a){if("string"==typeof e)return $.fn.datetimepicker.methods[e](this,a);var t={};$(this).data("datetimepicker")&&$(this).data("datetimepicker").options&&(t=$(this).data("datetimepicker").options),"{}"===JSON.stringify(t)&&$.extend(t,$.fn.datetimepicker.defaults),$.extend(t,e),$(this).data("datetimepicker",{options:t}),datetimepicker.init(this)},$.fn.datetimepicker.defaults={startYear:1937,endYear:(new Date).getFullYear(),showTime:!0,header:""},$.fn.datetimepicker.methods={show:function(e){var a=$(e).data("datetimepicker").options;a.container.show()},hide:function(e){var a=$(e).data("datetimepicker").options;a.container.hide()},getValue:function(e,a){var t=$(e).data("datetimepicker").options,n=t.container,i=n.find(".year").children(".datetime-selected").attr("data-item-value"),o=n.find(".month").children(".datetime-selected").attr("data-item-value"),l=n.find(".day").children(".datetime-selected").attr("data-item-value");if(t.showTime)var r=n.find(".hour").children(".datetime-selected").attr("data-item-value"),d=n.find(".minute").eq(4).children(".datetime-selected").attr("data-item-value"),s=n.find(".second").eq(5).children(".datetime-selected").attr("data-item-value");return a?t.showTime?a.replace("yyyy",i).replace("MM",o).replace("dd",l).replace("hh",r).replace("mm",d).replace("ss",s):a.replace("yyyy",i).replace("MM",o).replace("dd",l):t.showTime?i+"-"+o+"-"+l+" "+r+":"+d+":"+s:i+"-"+o+"-"+l},setValue:function(e,a){var t=$(e).data("datetimepicker").options,n=t.container,i=a.split(" ")[0].split("-")[0],o=a.split(" ")[0].split("-")[1],l=a.split(" ")[0].split("-")[2],r=t.startYear,d=t.endYear;if(parseInt(i)>d)return void console.error("年份大于最大年份");parseInt(o)>12&&(o%=12),parseInt(l)>30&&(l%=12);var s=parseInt(i)-r;if(n.find(".year").children(".datetime-selected").removeClass("datetime-selected"),n.find(".year").children(".datetime-item[data-item-value='"+i+"']").addClass("datetime-selected"),n.find(".month").children(".datetime-selected").removeClass("datetime-selected"),n.find(".month").children(".datetime-item[data-item-value='"+o+"']").addClass("datetime-selected"),n.find(".day").children(".datetime-selected").removeClass("datetime-selected"),n.find(".day").children(".datetime-item[data-item-value='"+l+"']").addClass("datetime-selected"),datetimepicker.setValue(e,"year",s),s=parseInt(o-1),datetimepicker.setValue(e,"month",s),s=parseInt(l-1),datetimepicker.setValue(e,"day",s),datetimepicker.changeDayToMaxDay(e),t.showTime&&a.split(" ")[1]){var c=a.split(" ")[1].split(":")[0],p=a.split(" ")[1].split(":")[1],h=a.split(" ")[1].split(":")[2];n.find(".hour").children(".datetime-selected").removeClass("datetime-selected"),n.find(".hour").children(".datetime-item[data-item-value='"+c+"']").addClass("datetime-selected"),n.find(".second").children(".datetime-selected").removeClass("datetime-selected"),n.find(".second").children(".datetime-item[data-item-value='"+h+"']").addClass("datetime-selected"),n.find(".minute").children(".datetime-selected").removeClass("datetime-selected"),n.find(".minute").children(".datetime-item[data-item-value='"+p+"']").addClass("datetime-selected"),parseInt(c)>23&&(c%=23),parseInt(p)>60&&(p%=60),parseInt(h)>60&&(h%=60),s=parseInt(c-1),datetimepicker.setValue(e,"hour",s),s=parseInt(p-1),datetimepicker.setValue(e,"minute",s),s=parseInt(h-1),datetimepicker.setValue(e,"second",s)}}};var lavaMsg={alert:function(e,a,t){var n=("lavaMsg_alert_"+(new Date).getTime(),"");"success"==a?n="fa-check":"warning"==a?n="fa-warning":"info"==a?n="fa-info-circle":"danger"==a&&(n="fa-close");var i=$("<div style='position:fixed;top:0;left:10%;width:80%;z-index:20000;'></div>").appendTo("body"),o=$("<div class='modal-dialog modal-lg alert "+a+" fade in' style='margin:auto;'><i class='fa fa-lg "+n+"'></i> "+e+"</div>").appendTo(i);$("<span class='close'></span>").appendTo(o),setTimeout(function(){i.fadeOut(1e3,function(){i.remove()})},t?t:3e3)},loading:function(e){var a=$(".lava-msg-loading");if($(".lava-msg-style"),e&&0==a.length){var t=$("<div class='lava-msg-loading' style='position:fixed;top:0;left:0;z-index:2021;width:100%;height:100%;background:rgba(0,0,0,0.25);'></div>").appendTo("body"),n=$("<div class='progress progress-striped active' style='width:20%;margin:22% 40%;'></div>").appendTo(t);$("<div class='progress-bar success' style='width:100%;'></div>").appendTo(n),t.click(function(){lavaMsg.loading(!1)})}else!e&&a.length>0&&a.fadeOut(500,function(){a.remove()})},singleConfirm:function(e,a,t,n,i){var o=$(e),l=o.offset().top<90?"bottom":"top";o.addClass("lava-msg-singleconfirm"),$(".lava-popover").fadeOut(300,function(){$(this).remove()});var r=$("<div class='popover lava-popover "+l+" in'><div class='arrow' style='left:50%;'></div></div>").appendTo("body").show(),d=($("<h3 class='popover-title' style='margin: 0;'>"+(a?a:"Are you sure ?")+"</h3>").appendTo(r),$("<div class='popover-content' style='text-align:center;'></div>").appendTo(r)),s=$("<button type='button' class='btn success'><i class='fa fa-check'></i> "+(t?t:"Yes")+"</button>").appendTo(d),c=o.offset().left+o.innerWidth()/2-r.innerWidth()/2-1,p=o.offset().top-r.innerHeight()-12;c=0>c?0:c,r.css({left:c,top:p}),s.click(function(e){i&&i(!0),r.remove(),e.stopPropagation()})},confirm:function(e,a,t,n){var i=$("<div class='modal fade in lava-msg-confirm'></div>").appendTo("body"),o=$("<div class='modal-dialog modal-md'></div>").appendTo(i),l=$("<div class='modal-content'></div>").appendTo(o),r=$("<div class='modal-header'><h4 class='modal-title' style='margin:0;'>"+e+"</h4></div>").appendTo(l),d=$("<span class='close' data-dismiss='modal' aria-hidden='true'></span>").prependTo(r),s=($("<div class='modal-body'>"+a+"</div>").appendTo(l),$("<div class='modal-footer'></div>").appendTo(l)),c=$("<button type='button' class='btn green'><i class='fa fa-check'></i> "+t+"</button>").appendTo(s);i.modal("show"),c.click(function(){n&&n(!0),i.click()}),i.click(function(){setTimeout(function(){i.remove()},2e3)}),o.click(function(e){e.stopPropagation()}),d.click(function(){i.modal("hide"),i.click()})},bindEvent:function(){$("body").delegate(".popover-title,.popover-content,.lava-msg-singleconfirm","click",function(e){e.stopPropagation()}),$(document).on("click",function(){$(this).hasClass("popover-title")||$(this).hasClass("popover-content")||$(this).hasClass("lava-msg-singleconfirm")||$(".lava-popover").fadeOut(300,function(){$(this).remove()})})}};$(function(){lavaMsg.bindEvent()});var lavaPlayBar={init:function(e){var a=this,t=$(e),n=t.data("playbar").options;t.addClass("lava-playbar");var i=$("<div class='lava-playbar-head' style='background:"+n.headerBgColor+";border-bottom:1px solid "+n.headerColor+";'></div>").appendTo(t),o=$("<div class='lava-playbar-btns'></div>").appendTo(i),l=($("<canvas class='lava-playbar-zoomout' width='50' height='40'></canvas>").appendTo(o),$("<canvas class='lava-playbar-zoomin' width='50' height='40'></canvas>").appendTo(o),$("<div class='lava-playbar-time'></div>").appendTo(i)),r=$("<div class='lava-playbar-timewrapper'></div>").appendTo(l),d=$("<canvas width='1000' height='40'></canvas>").appendTo(r);t.data("playbar").timeCanvas=d;var s=$("<div class='lava-playbar-body' style='background:"+n.bgColor+";'></div>").appendTo(t),c=$("<div class='lava-playbar-channelwrapper' stylel='background:"+n.channelWrapperBgColor+";'></div>").appendTo(s),p=$("<div class='lava-playbar-datawrapper'></div>").appendTo(s),h=$("<div class='lava-playbar-channels'><div>").appendTo(c),v=$("<div class='lava-playbar-linenames' style='background:"+n.channelBgColor+";'></div>").appendTo(c);t.data("playbar").lineNames=v;var f=$("<div class='lava-playbar-lines'></div>").appendTo(p),u=$("<canvas></canvas>").appendTo(f);t.data("playbar").lineCanvas=u;var m=$("<div class='lava-playbar-data'></div>").appendTo(p),b=$("<canvas></canvas>").appendTo(m),g=$("<div class='lava-playbar-rightrollbar' style='background:"+n.rollbarWrapperColor+";'><div>").appendTo(s);$("<div class='lava-playbar-up'></div>").appendTo(g),$("<div class='lava-playbar-down'></div>").appendTo(g),$("<div class='lava-playbar-rightbar' style='background:"+n.rollbarColor+";'></div>").appendTo(g),b[0].width=l.width(),t.data("playbar").dataCanvas=b;var y=$("<div class='lava-playbar-bottomrollbar' style='background:"+n.rollbarWrapperColor+";'></div>").appendTo(t),T=($("<div class='lava-playbar-bottomprev'></div>").appendTo(y),$("<div class='lava-playbar-bottomnext'></div>").appendTo(y),$("<div class='lava-playbar-bottombar' style='background:"+n.rollbarColor+";'></div>").appendTo(y),"<style>.lava-playbar-up:before {border-color:transparent transparent "+n.rollbarAngleColor+" transparent;}\n.lava-playbar-down:before {border-color:"+n.rollbarAngleColor+" transparent transparent transparent;}\n.lava-playbar-bottomprev:before {border-color:transparent "+n.rollbarAngleColor+" transparent transparent;}\n.lava-playbar-bottomnext:before {border-color:transparent transparent transparent "+n.rollbarAngleColor+";}\n.lava-playbar-bottombar:hover,.lava-playbar-rightbar:hover {background:"+n.rollbarHoverColor+" !important;}\n</style>"),w=$(T).appendTo(t);
t.data("playbar").style=w;var C=$("<div class='lava-playbar-line'></div>").appendTo(t);t.data("playbar").line=C;var x=$("<div class='lava-playbar-timelabel'></div>").appendTo(t),k=$("<canvas class='lava-playbar-timelabelcanvas' width='50' height='13' style='position:absolute;z-index:1;'></canvas>").appendTo(x);t.data("playbar").timeLabel=x,t.data("playbar").timeLabelCanvas=k;var D=$("<div class='lava-playbar-point'></div>").appendTo(t),z=$("<canvas width='150' height='95' class='lava-playbar-pointcanvas'></canvas>").appendTo(D);t.data("playbar").point=D,t.data("playbar").pointCanvas=z;for(var I=0;4>I;I++)h.append("<div class='lava-playbar-channel' style='background:"+n.channelBgColor+";color:"+n.channelColor+";'></div>");a.drawZoomBtn(e,"zoomout","mouseout"),a.drawZoomBtn(e,"zoomin","mouseout"),a.loadTimeLabel(e)},drawZoomBtn:function(e,a,t){var n=$(e),i=n.data("playbar").options,o=n.find(".lava-playbar-"+a)[0].getContext("2d");o.clearRect(0,0,50,40);var l="mouseout"==t?i.btnColor:"#fff";"mouseover"==t?(o.fillStyle=i.btnColor,o.fillRect(8,8,34,24)):(o.strokeStyle=i.btnColor,o.lineWidth=1,o.strokeRect(8.5,8.5,34,24)),o.strokeStyle=l,o.lineWidth=1.2,o.beginPath(),o.arc(19,19,7,0,2*Math.PI),o.stroke(),o.fillStyle=l,o.fillRect(15,19,8,1),"zoomout"==a&&o.fillRect(19,15,1,8),o.beginPath(),o.moveTo(24,23),o.lineTo(34,30),o.lineWidth=3,o.stroke()},loadData:function(e,a){var t=this,n=$(e),i=n.data("playbar").options,o=n.find(".lava-playbar-data"),l=n.find(".lava-playbar-linenames"),r=n.find(".lava-playbar-lines"),d=n.data("playbar").point;"channel"==i.type?i.data=a:i.lineData=a;var s=n.find(".lava-playbar-rightbar"),c=n.find(".lava-playbar-data"),p=n.find(".lava-playbar-channels");c.css({top:0}),s.css({top:15}).hide(),p.css({top:0}),"channel"==i.type?(a.length>4&&(s.css({height:4/a.length*65}).show(),setTimeout(function(){s.hide(),setTimeout(function(){s.show()},100)},100)),p.show(),o.show(),l.hide(),r.hide(),d.hide(),t.loadChannelNum(e),t.loadChannelData(e)):"line"==i.type&&(p.hide(),o.hide(),l.show(),r.show(),d.show(),t.loadLineType(e),t.loadLineData(e))},changeType:function(e,a){var t=this,n=$(e),i=n.find(".lava-playbar-channels"),o=n.find(".lava-playbar-data"),l=n.find(".lava-playbar-linenames"),r=n.find(".lava-playbar-lines"),d=n.data("playbar").point,s=n.data("playbar").options;if(a!=s.type)if("channel"==a)i.show(),o.show(),l.hide(),r.hide(),d.hide(),s.type=a,s.data&&(t.loadChannelNum(e),t.loadChannelData(e));else if("line"==a&&(l.show(),r.show(),i.hide(),o.hide(),n.find(".lava-playbar-rightbar").hide(),s.type=a,s.lineData)){t.loadLineType(e),t.loadLineData(e);var c=(s.currentTime-s.startTime)/864e5*s.zoomLevel*s.timeWidth+100;t.loadTimeLabel(e,c)}},loadLineType:function(e){var a=$(e),t=a.find(".lava-playbar-linenames"),n=a.find(".lava-playbar-data"),i=a.data("playbar").options,o=i.lineData;t.empty(),n.css({top:0});for(var l=0;l<o.length;l++)t.append("<div class='lava-playbar-linename' style='color:"+o[l].color+"'>"+o[l].name+"</div>")},loadLineData:function(e){var a=$(e),t=a.data("playbar").options,n=a.find(".lava-playbar-linenames"),i=n.children(),o=(a.find(".lava-playbar-lines"),a.data("playbar").lineCanvas[0]);o.width=t.timeWidth;var l=o.getContext("2d");l.lineWidth=1.5;for(var r=t.lineData,d=0;d<r.length;d++){for(var s=!1,c=0;c<i.length;c++)if(i.eq(c).text()==r[d].name&&i.eq(c).hasClass("lava-playbar-linename-disable")){s=!0;break}if(!s){var p=r[d].data;l.strokeStyle=r[d].color?r[d].color:"#fff",l.lineJoin="round";for(var h=t.startTime+864e5/t.zoomLevel,v=!1,f=864e5/t.zoomLevel,c=(Math.ceil(1*p.length/t.timeWidth/t.zoomLevel),0);c<p.length;c++){var u=p[c].time;if(0==c&&u>=t.startTime||u<=t.startTime&&p[c+1]&&p[c+1].time>t.startTime?(l.beginPath(),t.time=u,l.moveTo((u-t.startTime)/f*t.timeWidth,95-95*(p[c].value/120)),v=!0):(u>=t.startTime&&h>=u||u>h&&p[c-1]&&p[c-1].time<h)&&l.lineTo(parseInt((u-t.startTime)/f*t.timeWidth)+.5,95-95*(p[c].value/120)),v&&(u>=h&&p[c-1]&&p[c-1].time<h||c==p.length-1)){l.stroke();break}}}}},loadChannelNum:function(e){var a=$(e),t=a.data("playbar").options,n=t.data,i=a.find(".lava-playbar-channels");i.empty();for(var o=0;o<n.length;o++)i.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'>"+n[o].name+"</div>");if(n.length<4)for(var o=0;o<4-n.length;o++)i.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'></div>")},loadChannelData:function(e){var a=$(e),t=a.data("playbar").options,n=t.data,i=t.timeWidth,o=t.startTime+864e5/t.zoomLevel,l=a.data("playbar").dataCanvas[0],r=l.getContext("2d");if(n){l.height=24*n.length;for(var d=0;d<n.length;d++){var s=n[d].channel;r.clearRect(0,24*d+4,i,14);for(var c=0;c<s.length;c++)if(r.fillStyle="normal"==s[c].type?t.normalColor:t.alarmColor,s[c].startTime<=t.startTime&&s[c].endTime>t.startTime&&s[c].endTime<=o)r.fillRect(0,24*d+6,(s[c].endTime-t.startTime)/864e5*t.zoomLevel*i,12);else if(s[c].startTime>=t.startTime&&s[c].endTime<=o)r.fillRect((s[c].startTime-t.startTime)/864e5*t.zoomLevel*i,24*d+6,(s[c].endTime-s[c].startTime)/864e5*t.zoomLevel*i,12);else if(s[c].startTime>=t.startTime&&s[c].endTime>o)r.fillRect((s[c].startTime-t.startTime)/864e5*t.zoomLevel*i,24*d+6,(o-t.startTime)/864e5*t.zoomLevel*i,12);else if(s[c].startTime<t.startTime&&s[c].endTime>o)r.fillRect(0,24*d+6,i,12);else if(s[c].endTime<t.startTime&&s[c].startTime>o)break;r.fillStyle=t.channelSplitColor,r.fillRect(0,24*d+24,i,1)}}},drawTime:function(e){var a=this,t=e.data("playbar").options,n=e.find(".lava-playbar-time"),i=e.find(".lava-playbar-timewrapper"),o=e.find(".lava-playbar-bottombar"),l=i.children("canvas")[0],l=e.data("playbar").timeCanvas[0],r=n.width();t.timeWidth=r,i.css({width:r}),l.width=r,r*=t.zoomLevel;var d=0,s=0,c=l.getContext("2d");r-=1,1==t.zoomLevel?o.hide():o.show(),1==t.zoomLevel?(s=24,d=r/24):/^(2|4)$/.test(t.zoomLevel)?(s=144,d=r/144):8==t.zoomLevel?(s=720,d=r/720):24==t.zoomLevel?(s=1440,d=r/1440):48==t.zoomLevel?(s=2880,d=r/2880):144==t.zoomLevel?(s=8640,d=r/8640):288==t.zoomLevel?(s=8640,d=r/8640):1440==t.zoomLevel&&(s=43200,d=r/s),c.fillStyle=t.headerColor;var p=d-parseInt(t.startTime)%parseInt(864e5/s)/parseInt(864e5/s)*d;p=p==d?0:p;var h=parseInt(864e5/s)-parseInt(t.startTime)%parseInt(864e5/s);h=h==864e5/s?0:h;for(var v=0;90>=v;v++){var f=parseInt(p+v*d);if(c.fillRect(f,30,1,10),1==t.zoomLevel&&v%2==0&&v>0)c.fillText(a.round(v)+":00",24==v?f-28:f-14,28);else if(2==t.zoomLevel&&parseInt((10*v*60*1e3+t.startTime+h)/6e5)%6==0){var u=a.getTime(10*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(4==t.zoomLevel&&parseInt((10*v*60*1e3+t.startTime+h)/6e5)%6==0){var u=a.getTime(10*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(8==t.zoomLevel&&parseInt((2*v*60*1e3+t.startTime+h)/12e4)%10==0){var u=a.getTime(2*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(24==t.zoomLevel&&parseInt((60*v*1e3+t.startTime+h)/6e4)%6==0){var u=a.getTime(60*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(48==t.zoomLevel&&parseInt((30*v*1e3+t.startTime+h)/3e4)%6==0){var u=a.getTime(30*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(144==t.zoomLevel&&parseInt((10*v*1e3+t.startTime+h)/1e4)%6==0){var u=a.getTime(10*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(288==t.zoomLevel&&parseInt((10*v*1e3+t.startTime+h)/1e4)%6==0){var u=a.getTime(10*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(1440==t.zoomLevel)if(parseInt((2*v*1e3+t.startTime+h)/2e3)%30==0){var u=a.getTime(2*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else c.fillText(a.getSeconds(2*v*1e3+t.startTime+h),f,30)}a.drawBottomRollBar(e[0])},loadTimeLabel:function(e,a,t){var n=this,i=$(e),o=i.data("playbar").options,l=i.data("playbar").line,r=i.data("playbar").timeLabel,d=i.data("playbar").timeLabelCanvas[0],s=d.getContext("2d"),c=i.data("playbar").point,p=i.data("playbar").pointCanvas[0],h=p.getContext("2d"),v=i.data("playbar").lineNames.children();if(s.clearRect(0,0,50,14),s.fillStyle="#555",h.clearRect(0,0,150,95),a){if(t||(l.show(),r.show(),"line"==o.type&&c.show()),100>a?(a=100,t&&(l.hide(),r.hide(),"line"==o.type&&c.hide())):a>99+o.timeWidth?(a=99+o.timeWidth,t&&(l.hide(),r.hide(),"line"==o.type&&c.hide())):t&&(l.show(),r.show(),"line"==o.type&&c.show()),r.css(125>a?{left:100}:a>o.timeWidth+75?{left:o.timeWidth+50}:{left:a-25}),"line"==o.type&&o.lineData&&o.currentTime>=o.startTime&&o.currentTime<=o.startTime+864e5/o.zoomLevel){for(var f=20,u=0;u<o.lineData.length;u++){for(var m=!1,b=0;b<v.length;b++)if(v.eq(b).text()==o.lineData[u].name&&v.eq(b).hasClass("lava-playbar-linename-disable")){m=!0;break}if(!m){var g=o.lineData[u].data,y=null,T=0;if(!(0==g.length||o.currentTime<g[0].time||o.currentTime>g[g.length-1].time)){var w=n.quickSearch(g,o.currentTime);if(y=w.y,T=w.value,y){if(a>o.timeWidth-40){var C=h.createRadialGradient(140,y,2,140,y,12);C.addColorStop(0,o.lineData[u].color),C.addColorStop(1,"rgba(0,0,0,0)"),h.fillStyle=C,h.fillRect(130,y-10,20,20),h.fillStyle="rgba(0,0,0,0.53)",h.fillRect(0,f-12,130,16),h.fillStyle="#fff",h.font="11px arial",h.fillText(o.lineData[u].name+": "+T+o.lineData[u].unit,4,f)}else{var C=h.createRadialGradient(10,y,2,10,y,10);C.addColorStop(0,o.lineData[u].color),C.addColorStop(1,"rgba(85,85,85,0)"),h.fillStyle=C,h.fillRect(0,y-10,20,20),h.fillStyle="rgba(0,0,0,0.53)",h.fillRect(20,f-12,130,16),h.fillStyle="#fff",h.font="11px arial",h.fillText(o.lineData[u].name+": "+T+o.lineData[u].unit,24,f)}f+=16}}}}c.css(a>o.timeWidth-40?{left:a-140}:{left:a-10})}s.fillText(n.getTime(o.currentTime,!0),2,9),l.css({left:a})}else s.fillText("00:00:00",2,9)},quickSearch:function(e,a){var t=this;if(0==e.length)return{y:null,value:0};if(e.length%2==0)var n=e.length/2-1;else if(e.length%2==1)var n=(e.length-1)/2;return e[n].time==a?{y:95-95*(e[n].value/120),value:e[n].value}:e[n].time<a&&e[n+1]&&e[n+1].time>a?{y:95-95*(e[n].value/120),value:e[n].value}:e[n].time<a&&e[n+1]&&e[n+1].time<=a?t.quickSearch(e.slice(n+1),a):e[n].time>a?t.quickSearch(e.slice(0,n+1),a):void 0},drawBottomRollBar:function(e){var a=$(e),t=a.data("playbar").options,n=(a.find(".lava-playbar-time"),a.find(".lava-playbar-bottombar")),i=(a.width()-30)/t.zoomLevel;t.barWidth=50>i?50:i;var o=(a.width()-t.barWidth-30)*t.startTime/(864e5*(1-1/t.zoomLevel))+15;n.css({width:t.barWidth,left:o})},dragBottomRollBar:function(e,a){var t=this,n=$(e),i=n.find(".lava-playbar-bottomprev"),o=n.find(".lava-playbar-bottomrollbar"),l=n.find(".lava-playbar-bottombar"),r=(n.find(".lava-playbar-timewrapper"),n.data("playbar").options),d=a.clientX-r.lengthX-i.offset().left;15>d&&(d=15),d>o.width()-15-r.barWidth&&(d=o.width()-15-r.barWidth),l.css({left:d});var s=o.width()-30-r.barWidth;r.startTime=parseInt((d-15)/s*(864e5-864e5/r.zoomLevel)),t.drawTime(n),"channel"==r.type?t.loadChannelData(e):"line"==r.type&&t.loadLineData(e)},play:function(e,a){var t=this,n=$(e),i=n.data("playbar").options;i.currentTime=a,a<i.startTime&&(i.startTime=a,"channel"==i.type?t.loadChannelData(e):"line"==i.type&&t.loadLineData(e),t.drawTime(n)),a-i.startTime>864e5/i.zoomLevel&&(i.startTime=a-864e5/i.zoomLevel,"channel"==i.type?t.loadChannelData(e):"line"==i.type&&t.loadLineData(e),t.drawTime(n));var o=(a-i.startTime)/(864e5/i.zoomLevel)*i.timeWidth+100;t.loadTimeLabel(e,o)},getTime:function(e,a){var t=this;return a?t.round(parseInt(e/36e5))+":"+t.round(parseInt(e%36e5/6e4))+":"+t.round(parseInt(e%6e4/1e3)):t.round(parseInt(e/36e5))+":"+t.round(parseInt(e%36e5/6e4))},getSeconds:function(e){var a=this,t=new Date(e);return a.round(t.getSeconds())},round:function(e){return 10>e?"0"+e:e},zoomOutOrIn:function(e,a){var t=this,n=$(e),i=n.data("playbar").options;if(i.zoomLevel,"zoomout"==a){if(1440==i.zoomLevel)return;288==i.zoomLevel?(i.zoomLevel*=5,i.startTime+=.8*(i.currentTime-i.startTime)):48==i.zoomLevel||8==i.zoomLevel?(i.zoomLevel*=3,i.startTime+=(i.currentTime-i.startTime)*(2/3)):(i.zoomLevel*=2,i.startTime+=.5*(i.currentTime-i.startTime))}else if("zoomin"==a){if(1==i.zoomLevel)return;1440==i.zoomLevel?(i.zoomLevel=i.zoomLevel/5,i.startTime-=4*(i.currentTime-i.startTime)):144==i.zoomLevel||24==i.zoomLevel?(i.zoomLevel=i.zoomLevel/3,i.startTime-=2*(i.currentTime-i.startTime)):(i.zoomLevel=i.zoomLevel/2,i.startTime-=i.currentTime-i.startTime)}if(i.startTime<0){i.startTime=0;var o=(i.currentTime-i.startTime)/(864e5/i.zoomLevel)*i.timeWidth+100;t.loadTimeLabel(e,o)}else if(i.startTime>864e5-864e5/i.zoomLevel){i.startTime=864e5-864e5/i.zoomLevel;var o=(i.currentTime-i.startTime)/(864e5/i.zoomLevel)*i.timeWidth+100;t.loadTimeLabel(e,o)}t.drawTime(n),"channel"==i.type?t.loadChannelData(e):"line"==i.type&&t.loadLineData(e)},resize:function(e){var a=this,t=$(e),n=t.data("playbar").options;n.timeWidth=t.find(".lava-playbar-time").width(),a.drawTime(t),a.drawBottomRollBar(e);var i=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;a.loadTimeLabel(e,i,!0);var o=t.data("playbar").dataCanvas[0];o.width=n.timeWidth,"channel"==n.type?a.loadChannelData(e):"line"==n.type&&a.loadLineData(e)},bindEvent:function(e){var a=this,t=$(e),n=t.data("playbar").options,i=t.find(".lava-playbar-bottombar"),o=t.find(".lava-playbar-bottomrollbar"),l=t.find(".lava-playbar-rightbar"),r=t.find(".lava-playbar-rightrollbar"),d=t.find(".lava-playbar-channels"),s=t.find(".lava-playbar-data");o.on("mousedown",function(t){if(!i.is(":visible"))return!1;var o=t.clientX-$(this).offset().left-i.width()/2;15>o&&(o=15),o>$(this).width()-i.width()-15&&(o=$(this).width()-i.width()-15),i.css({left:o}),n.bottomDownFlag=!0,n.lengthX=t.clientX-i.offset().left,a.dragBottomRollBar(e,t);var l=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;return a.loadTimeLabel(e,l,!0),!1}),i.on("mousedown",function(e){return n.bottomDownFlag=!0,n.lengthX=e.clientX-$(this).offset().left,!1}),l.on("mousedown",function(e){return n.rightDownFlag=!0,n.lengthY=e.clientY-$(this).offset().top,!1}),t.find(".lava-playbar-time, .lava-playbar-datawrapper, .lava-playbar-timelabel, .lava-playbar-pointcanvas").on("click",function(i){var o=i.clientX-t.offset().left;return n.currentTime=n.startTime+(o-100)/(n.timeWidth*n.zoomLevel-n.zoomLevel)*864e5,a.loadTimeLabel(e,o),n.onPosition(n.currentTime),!1}),$("body").on("mousemove mouseup",function(i){if("mousemove"==i.type&&n.bottomDownFlag){a.dragBottomRollBar(e,i);var o=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;a.loadTimeLabel(e,o,!0)}else if("mousemove"==i.type&&n.bodyDownFlag){var o=i.clientX-t.offset().left;n.currentTime=n.startTime+(o-100)/(n.timeWidth*n.zoomLevel-n.zoomLevel)*864e5,n.currentTime>864e5&&(n.currentTime=864e5),a.loadTimeLabel(e,o),n.onPosition&&n.onPosition(n.currentTime)}else if("mousemove"==i.type&&n.rightDownFlag){var c=i.clientY-r.offset().top-n.lengthY;15>c&&(c=15),c>80-l.height()&&(c=80-l.height()),l.css({top:c});var p=-(c-15)/(65-l.height())*24*(n.data.length-4);d.css({top:p}),s.css({top:p})}else"mouseup"==i.type&&(n.bottomDownFlag=!1,n.bodyDownFlag=!1,n.rightDownFlag=!1)}),t.on("selectstart",function(){return!1}),e.addEventListener("mousewheel",function(t){if(t.wheelDelta>0)var n="zoomout";else var n="zoomin";return a.zoomOutOrIn(e,n),t.preventDefault(),t.stopPropagation(),!1}),e.addEventListener("DOMMouseScroll",function(t){if(t.detail<0)var n="zoomout";else var n="zoomin";return a.zoomOutOrIn(e,n),t.preventDefault(),t.stopPropagation(),!1}),t.find(".lava-playbar-zoomout,.lava-playbar-zoomin").on("mouseover mouseout click",function(t){var n=t.target.className.replace("lava-playbar-","");"mouseover"==t.type||"mouseout"==t.type?a.drawZoomBtn(e,n,t.type):a.zoomOutOrIn(e,n)}),t.delegate(".lava-playbar-linename","click",function(){$(this).toggleClass("lava-playbar-linename-disable"),a.loadLineData(e);var t=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;a.loadTimeLabel(e,t)}),$(window).on("resize",function(){a.resize(e)})}};$.fn.lavaPlayBar=function(e,a){return"string"==typeof e?$.fn.lavaPlayBar.methods[e](this,a):this.each(function(){var a={};$.extend(a,$.fn.lavaPlayBar.defaults),$(this).data("playbar",{options:a}),$.extend($(this).data("playbar").options,e),lavaPlayBar.init(this),lavaPlayBar.drawTime($(this)),lavaPlayBar.bindEvent(this)})},$.fn.lavaPlayBar.defaults={headerColor:"#999",headerBgColor:"#223",channelBgColor:"#222",channelColor:"#999",bgColor:"#000",channelWrapperBgColor:"#333",btnColor:"#32c5d2",rollbarWrapperColor:"#252525",rollbarColor:"#555",rollbarHoverColor:"#666",rollbarAngleColor:"#888",normalColor:"#00ad76",alarmColor:"#b74201",channelSplitColor:"#333",zoomLevel:1,startTime:0,currentTime:0,type:"channel",time:0,onPosition:function(){}},$.fn.lavaPlayBar.methods={loadData:function(e,a){return lavaPlayBar.loadData(e,a)},changeType:function(e,a){return lavaPlayBar.changeType(e,a)},play:function(e,a){return lavaPlayBar.play(e,a)},resize:function(e){lavaPlayBar.resize(e)},options:function(e){return $(e).data("playbar").options},getType:function(e){return $(e).data("playbar").options.type},getTime:function(e){return $(e).data("playbar").options.currentTime}};var switchButton={init:function(e){var a=$(e),t=a.data("switchbutton").option,n=t.width-2,i=t.height-2;a.css("height",i+"px"),a.css("width",n+"px"),a.addClass("lavaui-switchbutton"),t.disabled&&a.addClass("lavaui-switchbutton-disabled");var o=$('<div class="lavaui-switchbutton-container"></div>');a.html(""),a.append(o);var l='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-on" style="width:{width};line-height:{line-height};{background-color}">{text}</span>',r='<span class="lavaui-switchbutton-handle lavaui-switchbutton-label" style="width:{width};"></span>',d='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-off" style="width:{width};line-height:{line-height};{background-color}">{text}</span>>';l=l.replace("{width}",parseInt(n/2)+"px").replace("{text}",t.onText).replace("{line-height}",i+"px"),l=t.onColor?l.replace("{background-color}","background-color:"+t.onColor+" !important;"):l.replace("{background-color}",""),r=r.replace("{width}",parseInt(n/2)+"px"),d=d.replace("{width}",parseInt(n/2)+"px").replace("{text}",t.offText).replace("{line-height}",i+"px"),d=t.offColor?d.replace("{background-color}","background-color:"+t.offColor+" !important;"):d.replace("{background-color}",""),o.append(l),o.append(r),o.append(d),this.bindEvent(e)},bindEvent:function(e){var a=$(e),t=$(e).data("switchbutton").option;a.children(".lavaui-switchbutton-container").on("click",function(){if(!t.disabled){var e=parseInt($(this).css("margin-left"));0>e?$(this).animate({marginLeft:0},400):0===e&&$(this).animate({marginLeft:parseInt(-(t.width-2)/2)},400);var a=switchButton.getState();return t.onChange&&onChange(a),!1}})},getState:function(e){var a=$(e),t=parseInt(a.children(".lavaui-switchbutton-container").css("margin-left"));return 0>t?"off":"on"}};$.fn.switchButton=function(e,a){return"string"==typeof e?$.fn.switchButton.methods[e](this,a):void $.each(this,function(){var a={};$.extend(a,$.fn.switchButton.defaults),$.extend(a,e),$(this).data("switchbutton",{option:a}),switchButton.init(this)})},$.fn.switchButton.defaults={onText:"on",offText:"off",onColor:"",offColor:"",width:84,height:28,value:"",disabled:!1,onChange:null},$.fn.switchButton.methods={open:function(e){var a=$(e),t=a.data("switchbutton").option,n=a.children(".lavaui-switchbutton-container"),i=parseInt(n.css("margin-left"));0>i&&(n.css("margin-left",0),t.onChange&&t.onChange("on"))},close:function(e){var a=$(e),t=a.data("switchbutton").option,n=a.children(".lavaui-switchbutton-container"),i=parseInt(n.css("margin-left"));0===i&&(n.css("margin-left",parseInt(-(t.width-2)/2)),t.onChange&&t.onChange("off"))},getState:function(e){return switchButton.getState(e)}},!function(e){function a(a){var l=e(a);l.hide();var r=e(a).data("table").option,d=e(a).parent().height()-(r.pagination?40:0),s=r.columns;e(a).nextAll(".div-table").length>0&&e(a).nextAll(".div-table").remove(),e(a).nextAll(".div-pagination").length>0&&e(a).nextAll(".div-pagination").remove();var c=e("<div class='div-table' style='height:"+d+"px;'></div>").insertAfter(e(a));if(l.data("table").tableDiv=c,r.fit&&c.css({overflow:"hidden"}),0==r.frozenNumber){for(var f=e("<div class='div-head' style='width:100%;overflow:hidden;'></div>").appendTo(c),u=e("<div class='div-body' style='width:100%;overflow:auto;'></div>").appendTo(c),m=e("<div class='div-head-table' style='position:relative;'></div>").appendTo(f),b=e("<div class='div-body-table'></div>").appendTo(u),g=0,y=0;y<s.length;y++)g+=s[y].width+1;l.data("table").headDiv=f,l.data("table").bodyDiv=u,t(a,m),n(a,b)}else{for(var T=e("<div class='div-head1' style='float:left;'></div>").appendTo(c),w=e("<div class='div-head2' style='float:left;'></div>").appendTo(c),C=e("<div class='div-body1' style='float:left;'></div>").appendTo(c),x=e("<div class='div-body2' style='float:left;'></div>").appendTo(c),k=e("<div class='div-head-table1'></div>").appendTo(T),D=e("<div class='div-head-table2'></div>").appendTo(w),$=e("<div class='div-body-table1'></div>").appendTo(C),z=e("<div class='div-body-table2'></div>").appendTo(x),I=0,S=0,L=0,N=0,P=0,y=r.checkbox?1:0;y<s.length;y++)y<(r.checkbox?r.frozenNumber+1:r.frozenNumber)?(I+=s[y].width,L+=s[y].width):S+=s[y].width,P+=s[y].width;r.checkbox&&(I+=36,L+=36),S=S<c.width()-I-20?c.width()-I-20:S,L+=1,l.data("table").option.frozenWidth=I,N=parseInt(c.width()-L),T.css({width:L,overflow:"hidden"}),w.css({width:N,overflow:"hidden"}),C.css({width:L,overflow:"hidden"}),x.css({width:N,overflow:"auto"}),k.css({width:I}),D.css({width:S,left:-I-1,position:"relative"}),$.css({width:I,position:"relative"}),e(a).data("table").headDiv1=T,e(a).data("table").headDiv2=w,e(a).data("table").bodyDiv1=C,e(a).data("table").bodyDiv2=x,t(a,k,1),t(a,D,2),n(a,$,1),n(a,z,2)}if(r.columnToggle){var _=e(r.columnToggle);_.data("table",e(a));for(var B=e("<ul class='dropdown-menu pull-right'></ul>").appendTo(_.parent()),M=r.frozenNumber+(r.checkbox?1:0),y=M;y<s.length;y++)if("checkbox"!=s[y].field){var j=e("th[data-field="+s[y].field+"]").html();B.append("<li><a class='a-columntoggle' href='javascript:;' data-field='"+s[y].field+"'><span class='span-checkbox span-checkbox-checked'></span>&nbsp;"+j+"</a></li>")}}r.pagination&&i(a),r.url?h(a):r.data&&(r.pageNumber=1,r.firstPage=null,r.lastPage=null,0==r.frozenNumber?p(a,b):(l.data("table").bodyDiv1.children().children().find("tbody").empty(),l.data("table").bodyDiv2.children().children().find("tbody").empty(),p(a,$,1),p(a,z,2)),r.pagination&&o(a)),v(a)}function t(a,t){var n=e(a).data("table").option,i=n.columns,o=e(a).prop("id"),l=e("<table class='jq-table table table-bordered'></table>").appendTo(t),r=e("<thead></thead>").appendTo(l),d=e(a).children("thead");r.html(d.html());for(var s=r.children(),c=0;c<s.length;c++)for(var p=s.eq(c).children(),h=0;h<p.length;h++){var v=p.eq(h).attr("data-field");if(v){for(var f="<div class='table-"+o+"-"+v+"'>"+p.eq(h).html(),u=0;u<i.length;u++)i[u].field==v&&i[u].order&&("asc"==n.orderType?(f+=v==n.defaultOrderColumn?"<div class='table-angle table-angle-up table-angle-active'></div>":"<div class='table-angle table-angle-up'></div>",p.eq(h).attr("data-ordertype",n.orderType)):"desc"==n.orderType&&(f+=v==n.defaultOrderColumn?"<div class='table-angle table-angle-down table-angle-active'></div>":"<div class='table-angle table-angle-down'></div>",p.eq(h).attr("data-ordertype",n.orderType)));f+="</div>",p.eq(h).html(f)}}}function n(a,t,n){var i=e(a).data("table").option;if(e(a).prop("id"),2===n)var o=e("<table class='jq-table table table-bordered' style='border-left-width:0px;'></table>").appendTo(t);else var o=e("<table class='jq-table table table-bordered'></table>").appendTo(t);e("<tbody></tbody>").appendTo(o),i.striped&&o.addClass("table-striped")}function i(a){for(var t=e(a),n=t.data("table").option.lang,i=t.data("table").option.pageSize,o=e("<div class='div-pagination'></div>").insertAfter(t.data("table").tableDiv),l=(e("<div style='float:left;padding-top:5px;' class='div-pagination-tip'>"+C[n].total+": <span class='span-total'></span>, "+C[n].from+" <span class='span-first'></span> "+C[n].to+" <span class='span-last'></span></div>").appendTo(o),[]),r=1;5>r;r++)l.push(i==10*(r+1)?"<option selected='selected' value='"+10*(r+1)+"'>"+10*(r+1)+"</option>":"<option value='"+10*(r+1)+"'>"+10*(r+1)+"</option>");o.append(e("<select class='page-size' style='margin:5px 0 0 10px;'>"+l.join("")+"</select>"));var d=e("<div style='float:right;' class='div-pagination-btn'></div>").appendTo(o),s="<a href='javascript:;' class='page-first page-btn'>«</a><a href='javascript:;' class='page-pre page-btn'>···</a><div style='float:left;' class='div-pagebtn'><a href='javascript:;' class='page-btn'>1</a><a href='javascript:;' class='page-btn'>2</a><a href='javascript:;' class='page-btn'>3</a><a href='javascript:;' class='page-btn'>4</a><a href='javascript:;' class='page-btn'>5</a></div><a href='javascript:;' class='page-next page-btn'>···</a><a href='javascript:;' class='page-last page-btn'>»</a>";d.html(s),t.data("table").pageDiv=o}function o(a){var t=e(a),n=t.data("table").option,i=n.data,o=n.pageSize,l=n.pageNumber,r=i.total?Math.ceil(i.total/o):1,d=t.data("table").pageDiv,s=d.find(".div-pagebtn");t.data("table").option.totalPage=r,d.find(".span-total").html(i.total),d.find(".span-first").html(i.total>0?(l-1)*o+1:0),d.find(".span-last").html(r>l?l*o:i.total),n.firstPage&&1!=n.firstPage||(t.data("table").option.firstPage=1,t.data("table").option.lastPage=r>5?5:r);var c=t.data("table").option.firstPage,p=t.data("table").option.lastPage;1>=c&&d.find(".page-pre").hide(),p>=r&&d.find(".page-next").hide(),c>1&&d.find(".page-pre").show(),r>p&&d.find(".page-next").show(),5>r?(s.find(".page-btn").show(),s.find(".page-btn").eq(r-1).nextAll().hide()):s.find(".page-btn").show();for(var h=0;p-c+1>h;h++)s.find(".page-btn").eq(h).data("table",{page:c+h}),s.find(".page-btn").eq(h).html(c+h);for(var h=0;p-c+1>h;h++)s.find(".page-btn").eq(h).data("table").page==l?s.find(".page-btn").eq(h).addClass("page-select"):s.find(".page-btn").eq(h).removeClass("page-select")}function l(a,t){var n=e(a),i=n.data("table").option,l=i.pageNumber,r=i.firstPage,d=i.lastPage,s=i.totalPage;if(pageSpan=t-l,t!=l){if(n.data("table").option.pageNumber=t,s>5){var c=r,p=d;t-r>2&&s-d==1?(c+=1,p+=1):s-d>0&&t-r==3?(c+=1,p+=1):s-d>1&&t-r==4?(c+=2,p+=2):3>t-r&&2==r?(c-=1,p-=1):t-r==1&&r>0?(c-=1,p-=1):t-r==0&&r>1&&(c-=2,p-=2),n.data("table").option.firstPage=c,n.data("table").option.lastPage=p}o(a),h(a)}}function r(a){var t=e(a),n=t.data("table").option;1!=n.pageNumber&&(n.totalPage>5&&(t.data("table").option.firstPage=1,t.data("table").option.lastPage=5),t.data("table").option.pageNumber=1,o(a),h(a))}function d(a){var t=e(a).data("table").option;t.pageNumber!=t.totalPage&&(t.totalPage>5&&(e(a).data("table").option.firstPage=t.totalPage-4,e(a).data("table").option.lastPage=t.totalPage),e(a).data("table").option.pageNumber=t.totalPage,o(a),h(a))}function s(a){var t=e(a),n=t.data("table").option,i=n.firstPage;t.data("table").option.firstPage=n.firstPage>6?n.firstPage-5:1,t.data("table").option.lastPage=i>6?n.lastPage-5:n.lastPage-i+1,o(a)}function c(a){var t=e(a),n=t.data("table").option;t.data("table").option.firstPage=n.totalPage-n.lastPage>=5?n.firstPage+5:n.totalPage-4,t.data("table").option.lastPage=n.totalPage-n.lastPage>=5?n.lastPage+5:n.totalPage,o(a)}function p(a,t,n){var i=e(a),o=i.data("table").option,l=i.prop("id"),r=o.data,d=i.siblings(".div-table").find(".div-head,.div-head1"),s=t.children("tbody").empty(),c=r.rows;if(n){if(1==n)var p=o.columns.slice(0,o.checkbox?o.frozenNumber+1:o.frozenNumber);else if(2==n)var p=o.columns.slice(o.checkbox?o.frozenNumber+1:o.frozenNumber)}else var p=o.columns;var h=i.data("table").thArray;if(!h){h=[];for(var f=0;f<p.length;f++)h.push(d.find("th[data-field="+p[f].field+"]"));i.data("table").thArray=h}var u=[];for(f=0;f<h.length;f++)u.push(h[f].hasClass("column-hidden"));for(var m=[],f=0;f<c.length;f++){for(var b=[],g=0;g<p.length;g++){if(o.columnToggle)if(u[g])var y="<td class='column-hidden'>";else var y="<td>";else var y="<td>";var T="";T="checkbox"==p[g].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":p[g].formatter?p[g].formatter(c[f][p[g].field],c[f],f):void 0===c[f][p[g].field]?"":c[f][p[g].field],y+="<div class='table-"+l+"-"+p[g].field+"'>"+T+"</div></td>",b.push(y)}c[f].lavaTableRowIndex=f,m.push("<tr class='table-row-"+f+"'>"+b.join("")+"</tr>")}s.html(m.join("")),setTimeout(function(){v(a)},1),n&&2!=n||!o.onLoadSuccess||o.onLoadSuccess(r)}function h(a){var t=e(a),n=t.data("table").option;if(!n.onBeforeLoad||n.onBeforeLoad()){if(t.data("table").option.formData[n.pageSizeField]=n.pageSize,t.data("table").option.formData[n.pageNumberField]=n.pageNumber,n.showLoader){var i=t.data("table").tableDiv,l=e("<div class='div-loader' style='width:100%;height:100%;'></div>").appendTo(i);e("<div class='lava-table-modal'></div>").appendTo(l),e("<div class='progress progress-striped active lava-progress'><div class='progress-bar'></div></div>").appendTo(l)}e.ajax({url:n.url,type:n.method,dataType:"json",data:n.formData}).done(function(e){n.showLoader&&l.remove(),t.data("table").option.data=n.loadFilter?n.loadFilter(e):e,0==n.frozenNumber?p(a,t.data("table").bodyDiv.children().children()):(t.data("table").bodyDiv1.children().children().find("tbody").empty(),t.data("table").bodyDiv2.children().children().find("tbody").empty(),p(a,t.data("table").bodyDiv1.children().children(),1),p(a,t.data("table").bodyDiv2.children().children(),2)),n.pagination&&o(a)}).fail(function(){n.showLoader&&l.remove(),t.data("table").option.data={total:0,rows:[]},0==n.frozenNumber?p(a,t.data("table").bodyDiv.children().children()):(t.data("table").bodyDiv1.children().children().find("tbody").empty(),t.data("table").bodyDiv2.children().children().find("tbody").empty(),p(a,t.data("table").bodyDiv1.children().children(),1),p(a,t.data("table").bodyDiv2.children().children(),2)),n.pagination&&o(a)})}}function v(a){var t=e(a).data("table").option,n=e(a);if(0==t.frozenNumber){if(t.fit){var i=n.parent().height(),o=n.data("table").headDiv.height(),l=i-o-(t.pagination?40:0);n.data("table").tableDiv.css({height:i-(t.pagination?40:0)}),n.data("table").bodyDiv.css({height:l})}var r="",d=t.columns,s=n.data("table").bodyDiv.children().width();setTimeout(function(){var e=n.data("table").bodyDiv.children().width();n.data("table").headDiv.css({width:e-0})},0);for(var c=0,p=0,h=n.prop("id"),v=0;v<d.length;v++)c+="checkbox"==d[v].field?36:d[v].width;for(var v=0;v<d.length;v++)p=s>c?parseInt(s/c*d[v].width)-17:d[v].width-17,r+=".table-"+h+"-"+d[v].field+"{width:"+p+"px;}";n.data("table").style&&n.data("table").style.remove();var f=e("<style type='text/css'>"+r+"</style>").insertAfter(n);n.data("table").style=f;var u=n.data("table").bodyDiv;u.css(s>c?{"overflow-x":"hidden"}:{"overflow-x":"auto"})}else{if(t.fit){var i=n.parent().height(),o=n.data("table").headDiv1.height(),l=i-o-(t.pagination?40:0);n.data("table").tableDiv.css({height:i-(t.pagination?40:0)}),n.data("table").bodyDiv1.css({height:l}),n.data("table").bodyDiv2.css({height:l})}for(var d=t.columns,p=1,v=0;v<(t.checkbox?t.frozenNumber+1:t.frozenNumber);v++)p+="checkbox"==d[v].field?36:d[v].width;n.data("table").headDiv2.css({width:parseInt(n.data("table").tableDiv.width()-p)-1}),n.data("table").bodyDiv2.css({width:parseInt(n.data("table").tableDiv.width()-p)-1});var m=n.data("table").bodyDiv1.find("tr"),b=n.data("table").bodyDiv2.find("tr");if(b.length>0)for(var v=0;v<m.length;v++){var l=m.eq(v).outerHeight()>b.eq(v).outerHeight()?m.eq(v).outerHeight():b.eq(v).outerHeight();l=Math.ceil(l),m.eq(v).css({height:l}),b.eq(v).css({height:l})}var p=0,c=0,g=n.data("table").bodyDiv2,h=n.prop("id"),y=n.data("table").headDiv2.find("thead"),r="<style type='text/css'>";if(y.find(".column-hidden").length,t.frozenNumber>0)for(var T=0,v=t.checkbox?t.frozenNumber+1:t.frozenNumber;v<d.length;v++)y.find(".table-"+h+"-"+d[v].field).parent().hasClass("column-hidden")||(T+=d[v].width);
for(var v=0;v<d.length;v++)p=d[v].width-17,T<g.width()-18&&v>=(t.checkbox?t.frozenNumber+1:t.frozenNumber)&&(y.find(".table-"+h+"-"+d[v].field).parent().hasClass("column-hidden")?p=parseInt((g.width()-18)/T*d[v].width)-17:(p=parseInt((g.width()-18)/T*d[v].width)-17,c+=p)),"checkbox"!=d[v].field&&(r+=".table-"+h+"-"+d[v].field+"{width:"+p+"px;}");n.data("table").headDiv2.children().css("width",c),r+="</style>",n.data("table").style&&n.data("table").style.remove();var w=e(r).insertAfter(n);if(n.data("table").style=w,n.data("table").bodyDiv2.children().css({width:c-18}),/msie|trident[\s\S]*rv/.test(navigator.userAgent.toLowerCase())){var C=n.data("table").bodyDiv2;C.scroll()}}}function f(a,t){var n=e(a),i=n.prop("id");n.siblings(".div-table").find(".table-"+i+"-"+t).parent().removeClass("column-hidden"),v(a)}function u(a,t){var n=e(a),i=n.prop("id");n.siblings(".div-table").find(".table-"+i+"-"+t).parent().addClass("column-hidden"),v(a)}function m(a){e(window).resize(function(){setTimeout(function(){e(a).parent().is(":visible")&&v(a)},100)});var t=e(a),n=t.data("table").option;if(e(a).data("table").bodyDiv){var i=e(a).data("table").bodyDiv;i.on("scroll",function(){t.data("table").headDiv.children().css({left:-i.scrollLeft()})}),i.delegate("tr","mouseover mouseout",function(a){var n=e(this).prop("class");"mouseover"===a.type?t.data("table").tableDiv.find("."+n).addClass("row-hover"):e(this).hasClass("row-hover")&&t.data("table").tableDiv.find("."+n.split(" ")[0]).removeClass("row-hover")})}if(e(a).data("table").bodyDiv2){var m=t.data("table").bodyDiv1,b=t.data("table").bodyDiv2,g=t.data("table").headDiv2,n=t.data("table").option;b.on("scroll",function(){m.children().css({top:-b.scrollTop()}),g.children().css({left:-b.scrollLeft()-n.frozenWidth-1})}),m.delegate("tr","mouseover mouseout",function(a){var n=e(this).prop("class");"mouseover"===a.type?t.data("table").tableDiv.find("."+n).addClass("row-hover"):e(this).hasClass("row-hover")&&t.data("table").tableDiv.find("."+n.split(" ")[0]).removeClass("row-hover")}),b.delegate("tr","mouseover mouseout",function(a){var n=e(this).prop("class");"mouseover"===a.type?t.data("table").tableDiv.find("."+n).addClass("row-hover"):e(this).hasClass("row-hover")&&t.data("table").tableDiv.find("."+n.split(" ")[0]).removeClass("row-hover")})}if(t.data("table").pageDiv&&(t.data("table").pageDiv.find(".div-pagebtn").children().on("click",function(){e(this).data("table")&&l(a,e(this).data("table").page)}),t.data("table").pageDiv.find(".page-first").on("click",function(){r(a)}),t.data("table").pageDiv.find(".page-last").on("click",function(){d(a)}),t.data("table").pageDiv.find(".page-pre").on("click",function(){s(a)}),t.data("table").pageDiv.find(".page-next").on("click",function(){c(a)}),n.pagination&&t.data("table").pageDiv.delegate("select.page-size","change",function(){var i=e(this).val();n.pageSize=i,n.onPageSizeChange&&n.onPageSizeChange(i),n.url?(Math.ceil(n.data.total/n.pageSize)?n.pageNumber>Math.ceil(n.data.total/n.pageSize)&&(n.pageNumber=Math.ceil(n.data.total/n.pageSize)):n.pageNumber=1,h(a)):n.data&&(0==n.frozenNumber?p(a,e(".div-body-table")):(t.data("table").bodyDiv1.children().children().find("tbody").empty(),t.data("table").bodyDiv2.children().children().find("tbody").empty(),p(a,t.data("table").bodyDiv1.children().children(),1),p(a,t.data("table").bodyDiv2.children().children(),2)),n.pagination&&o(a))})),0==n.frozenNumber)var y=t.data("table").headDiv,T=t.data("table").bodyDiv;else var y=t.siblings(".div-table").find(".div-head1,.div-head2"),T=t.data("table").bodyDiv1;t.data("table").option.checkbox&&(y.find(".jq-table").find(".checkbox").on("click",function(){var a=e(this);setTimeout(function(){var e=a.children("input").prop("checked");T.find(".checkbox").children("input").prop("checked",e)},1)}),T.delegate(".checkbox","click",function(){setTimeout(function(){var e=T.find(".checkbox>input").length==T.find(".checkbox>input:checked").length?!0:!1;y.find(".jq-table>thead>tr>th .checkbox>input").prop("checked",e)},1)})),e("body").delegate(".a-columntoggle","click",function(){var t=e(this).children(".span-checkbox");if(1==t.parent().parent().parent().find(".span-checkbox-checked").length&&t.hasClass("span-checkbox-checked"))return!1;t.toggleClass("span-checkbox-checked");var n=e(this).attr("data-field");return e(this).parent().parent().data("table"),t.hasClass("span-checkbox-checked")?f(a,n):u(a,n),!1}),n.frozenNumber>0&&(y=t.siblings(".div-table").find(".div-head1,.div-head2")),y.delegate("th[data-ordertype]","click",function(){var n=e(this).find(".table-angle"),i=t.data("table").option.formData,o=e(this).attr("data-field");n.hasClass("table-angle-up")?n.hasClass("table-angle-active")?(n.removeClass("table-angle-up").addClass("table-angle-down"),i.orderType="desc"):i.orderType="asc":n.hasClass("table-angle-down")&&(n.hasClass("table-angle-active")?(n.removeClass("table-angle-down").addClass("table-angle-up"),i.orderType="asc"):i.orderType="desc"),y.find(".table-angle-active").removeClass("table-angle-active"),n.addClass("table-angle-active"),i.orderField=o,h(a)})}function b(a,t){for(var n=e(a),i=n.data("table").option,o=i.data.rows,l=0;l<o.length;l++){var r=g(t,o[l]);if(r)return o[l].lavaTableRowIndex}return null}function g(e,a){var t=!0;for(var n in e)a.hasOwnProperty(n)?a[n]!==e[n]&&(t=!1):t=!1;return t}function y(a,t,n){var i=e(a),o=i.data("table"),l=o.option,r=l.columns,d=l.data.rows,s=i.prop("id");if(null===t.index||void 0===t.index)return void(console.error&&console.error("请指定行号"));var c=parseInt(t.index);if(n){var p=o["bodyDiv"+n].find(".table-row-"+c);if(1===n)var r=l.columns.slice(0,l.checkbox?l.frozenNumber+1:l.frozenNumber);else if(2===n)var r=l.columns.slice(l.checkbox?l.frozenNumber+1:l.frozenNumber)}else var r=l.columns;for(var h=0;h<r.length;h++)p.find(".table-"+s+"-"+attr).html(r[h].formatter?r[h].formatter(t.row[attr],t.row,c):t.row[attr]);t.row.lavaTableRowIndex=t.index,d[c]=t.row}function T(a,t,n,i){var o=e(a),l=o.data("table").option,r=(o.data("table"),l.columns),d=(l.data.rows,l.data.total),s=o.prop("id");if(n){if(1==n)var r=l.columns.slice(0,l.checkbox?l.frozenNumber+1:l.frozenNumber);else if(2==n)var r=l.columns.slice(l.checkbox?l.frozenNumber+1:l.frozenNumber)}else var r=l.columns;for(var c=[],p=0;p<r.length;p++){if(l.columnToggle)if(hiddenArray[j])var h="<td class='column-hidden'>";else var h="<td>";else var h="<td>";var v="";v="checkbox"==r[p].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":r[p].formatter?r[p].formatter(i[r[p].field],i,d):void 0===i[r[p].field]?"":i[r[p].field],h+="<div class='table-"+s+"-"+r[p].field+"'>"+v+"</div></td>",c.push(h)}if(c.length>0){var f="<tr class='table-row-"+d+"'>"+c.join("")+"</tr>";n&&2!==n||(l.data.total+=1,i.lavaTableRowIndex=d,l.data.rows.push(i)),t.find("tbody").append(f)}}function w(a,t){var n=e(a),i=n.data("table").tableDiv,o=n.data("table").option.data.rows;i.find(".table-row-"+t).remove();for(var l=0;l<o.length;l++)t==o[l].lavaTableRowIndex&&o.splice(l,1)}e.fn.table=function(t,n){return"string"==typeof t?e.fn.table.methods[t](this,n):this.each(function(){e(this).data("table")&&e(this).data("table").option||e(this).data("table",{option:e.extend({},e.fn.table.defaults)}),e.extend(e(this).data("table").option,t),a(this),m(this)})},e.fn.table.defaults={url:"",method:"post",pagination:!0,pageSize:20,pageNumber:1,pageSizeField:"rows",pageNumberField:"page",nowrap:!0,striped:!0,rownumbers:!1,formData:{},frozenNumber:0,lang:"zh-CN",fit:!1,checkbox:!1,showLoader:!0,data:{total:0,rows:[]},onBeforeLoad:null,onLoadSuccess:null},e.fn.table.methods={load:function(a,t){var n=e(a);n.data("table").option.formData=t,n.data("table").option.pageNumber=1,n.data("table").option.firstPage=null,n.data("table").option.lastPage=null,h(a)},reload:function(e){h(e)},loadData:function(a,t){var n=e(a),i=n.data("table").option;n.data("table").option.data=t,n.data("table").option.pageNumber=1,n.data("table").option.firstPage=null,n.data("table").option.lastPage=null,0==i.frozenNumber?p(a,n.data("table").bodyDiv.children().children()):(n.data("table").bodyDiv1.children().children().find("tbody").empty(),n.data("table").bodyDiv2.children().children().find("tbody").empty(),p(a,n.data("table").bodyDiv1.children().children(),1),p(a,n.data("table").bodyDiv2.children().children(),2)),i.pagination&&o(a)},getChecked:function(a){for(var t=e(a),n=t.data("table").tableDiv,i=t.data("table").option.data.rows,o=[],l=n.find("td .checkbox input[type='checkbox']"),r=0;r<i.length;r++)l.eq(r).prop("checked")&&o.push(i[l.eq(r).parent().parent().parent().parent().index()]);return o},options:function(a){return e(a).data("table").option},resize:function(e){v(e)},updateRow:function(a,t){var n=e(a);n.data("table").bodyDiv2?(y(a,t,1),y(a,t,2)):y(a,t),window.setTimeout(function(){v(a)},1)},getRowIndex:function(e,a){return b(e,a)},appendRow:function(a,t){var n=e(a);n.data("table").bodyDiv?(T(a,n.data("table").bodyDiv,null,t),window.setTimeout(function(){v(a)},1)):(T(a,n.data("table").bodyDiv1,1,t),T(a,n.data("table").bodyDiv2,2,t),window.setTimeout(function(){v(a)},1))},deleteRow:function(e,a){w(e,a)}};var C={"zh-CN":{total:"总共",from:"显示",to:"到"},"en-US":{total:"Total",from:"displaying from",to:"to"},"zh-TW":{total:"總共",from:"顯示",to:"到"},"pt-PT":{total:"Total de",from:"Exibindo",to:"para"},af:{total:"van",from:"Wys",to:"tot"},am:{total:"-ը",from:"Դիտել",to:"-ից"},fr:{total:"au",from:"Affichage de",to:"et"},jp:{total:"全",from:"アイテム中",to:"から"},"pt-br":{total:"de",from:"Mostrando",to:"a"},ar:{total:"من",from:"عرض",to:"إلى"}}}(jQuery);var lavaTabs={tabIndex:0,timer:null,initDom:function(e){var a=this,t=$(e);t.addClass("lava-tabs");var n=$(e).data("tabs").options,i=$("<div class='lava-tabs-toolbar'></div>").appendTo(t),o=$("<div class='lava-tabs-pre'><a href='javascript:;' class='lava-tabs-btn-pre'><span class='glyphicon glyphicon-backward'></span></a></div>").appendTo(i),l=$("<div class='lava-tabs-btn-wrapper'></div>").appendTo(i),r=($("<div class='lava-tabs-next'><a href='javascript:;' class='lava-tabs-btn-next'><span class='glyphicon glyphicon-forward'></span></a></div>").appendTo(i),$("<div class='lava-tabs-btns'></div>").appendTo(l),o.width());l.css({"margin-left":r}),n.fit&&t.css({width:"100%",height:"100%"}).addClass("fit"),n.border&&t.addClass("bordered"),a.bindEvent(e),a.setOption(e)},addTab:function(e,a){var t=lavaTabs,n=$(e),i=n.children(".lava-tabs-toolbar").find(".lava-tabs-btns"),o=(n.data("tabs").options,a.hideType?a.hideType:"hide"),l=n.children(".lava-tabs-toolbar").find(".lava-tabs-btn-next");i.find(".lava-tabs-btn-selected").removeClass("lava-tabs-btn-selected");var r=$("<a href='javascript:;' class='lava-tabs-btn lava-tabs-btn-selected' data-for='lava-tabs-"+ ++t.tabIndex+"' data-hidetype='"+o+"'>"+a.title+" </a>").appendTo(i);a.closable!==!1&&$("<span class='close'></span>").appendTo(r),t.hideAll(e),$("<div class='lava-tabs-tab' id='lava-tabs-"+t.tabIndex+"' data-hidetype='"+o+"'>"+a.content+"</div>").appendTo(n),r.offset().left+r.outerWidth()>l.offset().left&&l.click()},select:function(e,a){for(var t=null,n=$(e).children(".lava-tabs-toolbar"),i=n.find(".lava-tabs-btn"),o=0;o<i.length;o++)if(a==o||a==i.eq(o).text()){t=i.eq(o);break}if(t){t.click();var l=n.children(".lava-tabs-btn-wrapper"),r=l.children(),d=n.find(".lava-tabs-btn-next"),s=r.css("left").replace("px","");s=s?parseInt(s):0,t.offset().left<l.offset().left?(s+=l.offset().left-t.offset().left,r.animate({left:s},"fast")):t.offset().left+t.outerWidth()>d.offset().left&&(s-=t.offset().left+t.outerWidth()-d.offset().left,r.animate({left:s},"fast"))}},setOption:function(e,a){var t=$(e),n=t.data("tabs").options;a&&$.extend(n,a);var i=t.find(".lava-tabs-toolbar"),o=["<style>"];n.bgColor&&o.push(".lava-tabs-toolbar,.lava-tabs-btn-pre,.lava-tabs-btn-next{background-color:"+n.bgColor+";}"),n.color&&o.push(".lava-tabs-btn,.lava-tabs-btn-pre,.lava-tabs-btn-next{color:"+n.color+";}"),n.borderColor&&(o.push(".lava-tabs-btn-pre,.lava-tabs-btn-next,.lava-tabs-btn{border-color:"+n.borderColor+";}"),i.css({"border-bottom-color":n.borderColor})),n.activeColor&&(o.push(".lava-tabs-btn-pre:hover,.lava-tabs-btn-next:hover,.lava-tabs-btn:hover,.lava-tabs-btn-selected,.lava-tabs-btn:focus {background-color:"+n.activeColor+";"),o.push(n.color?"color:"+n.color+";}":"}")),o.push("</style>"),t.data("tabs").style&&t.data("tabs").style.remove();var l=$(o.join("\n")).insertAfter(t);t.data("tabs").style=l},bindEvent:function(e){var a=this,t=$(e),n=t.data("tabs").options,i=t.children(".lava-tabs-toolbar"),o=i.children(".lava-tabs-btn-wrapper"),l=o.children(),r=i.find(".lava-tabs-btn-pre"),d=i.find(".lava-tabs-btn-next");i.delegate(".lava-tabs-btn","click",function(){if(!$(this).hasClass("lava-tabs-btn-selected")){i.find(".lava-tabs-btn").removeClass("lava-tabs-btn-selected"),$(this).addClass("lava-tabs-btn-selected"),a.hideAll(e);var t=$(this).attr("data-for");"position"==$(this).attr("data-hidetype")?$("#"+t).css({position:"relative",left:0}):$("#"+t).removeClass("lava-tabs-tab-close"),n.onSelect&&n.onSelect($.trim($(this).text()))}}),i.delegate(".close","click",function(){var e=$(this).parent().attr("data-for"),a=$(this).parent();return a.hasClass("lava-tabs-btn-selected")&&(a.next().length>0?a.next().click():a.prev().length>0&&a.prev().click()),n.onClose&&n.onClose($.trim(a.text())),a.remove(),$("#"+e).remove(),!1}),r.on("click",function(){var e=l.children(),a=e.first();if(a.offset().left<o.offset().left)for(var t=0;t<e.length;t++){var n=e.eq(t);if(n.offset().left+n.outerWidth()>=o.offset().left){var i=l.css("left").replace("px","");i=i?parseInt(i):0,n.offset().left-l.offset().left<=d.offset().left-e.eq(t+1).offset().left?i=0:i+=d.offset().left-e.eq(t+1).offset().left,l.animate({left:i},"fast");break}}}),d.on("click",function(){var e=l.children();if(e.last().offset().left+e.last().width()>d.offset().left)for(var a=0;a<e.length;a++){var t=e.eq(a);if(t.offset().left+t.width()>d.offset().left){var n=l.css("left").replace("px","");n=n?parseInt(n):0,e.last().offset().left+e.last().outerWidth()-t.offset().left<o.width()-d.outerWidth()?n-=e.last().offset().left+e.last().outerWidth()-d.offset().left:t.offset().left<=d.offset().left?n-=t.offset().left-o.offset().left:t.prev().length>0&&(n-=t.prev().offset().left-o.offset().left),l.animate({left:n},"fast");break}}}),window.onresize=function(){/msie 8/.test(navigator.userAgent.toLowerCase())&&(a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){a.resizeDom(e)},10))}},hideAll:function(e){for(var a=$(e),t=a.children(".lava-tabs-tab"),n=0;n<t.length;n++){var i=t.eq(n);"position"==i.attr("data-hidetype")?i.css({position:"absolute",left:-1e4}):i.addClass("lava-tabs-tab-close")}},resizeDom:function(e){var a=$(e),t=a.children(".lava-tabs-toolbar"),n=a.children(".lava-tabs-tab").not(".lava-tabs-tab-close"),i=a.height()-t.height()-2;n.css({height:i})}};$.fn.lavaTabs=function(e,a){return"string"==typeof e?$.fn.lavaTabs.methods[e](this,a):this.each(function(){var a={};$.extend(a,$.fn.lavaTabs.defaults),$(this).data("tabs",{options:a}),$.extend($(this).data("tabs").options,e),lavaTabs.initDom(this)})},$.fn.lavaTabs.defaults={border:!1,fit:!0,bgColor:"",color:"",borderColor:"",activeColor:"",onClose:null,onSelect:null},$.fn.lavaTabs.methods={add:function(e,a){lavaTabs.addTab(e,a)},select:function(e,a){lavaTabs.select(e,a)},setOption:function(e,a){lavaTabs.setOption(e,a)}},!function(e){var a={init:function(a){var t=e(a).css({paddingRight:20}),n=t.parent();n.css({position:"relative"});var i=e("<div class='timespinner-add'></div>").appendTo(n),o=e("<div class='timespinner-minus'></div>").appendTo(n),l=(t.innerHeight()/2,20);i.css({height:"45%",width:l}),o.css({height:"45%",width:l}),t.data("timespinner").add=i,t.data("timespinner").minus=o,this.initEvent(a)},initEvent:function(a){var t=this,n=e(a),i=n.data("timespinner").options,o=n.data("timespinner").add,l=n.data("timespinner").minus;n.on("click blur",function(e){if("click"==e.type){var o=t.getCursorIndex(a);if(1>o||o%3==0)return;if(o%3==1)var l=o-1;else if(o%3==2)var l=o-2;var r=l+2;i.start=l,i.end=r,t.setSelection(a,l,r)}else{var d=t.formatData(n.val(),i.showSeconds,i.separator);n.val(d),i.onChange&&i.onChange(d)}}),o.on("click",function(){var e=n.val(),o=new Date("2000/01/01 "+e).getTime();0==i.start?o+=36e5:3==i.start?o+=6e4:6==i.start&&(o+=1e3);var l=new Date(o),e=t.formatData(l.getHours()+i.separator+l.getMinutes()+i.separator+l.getSeconds(),i.showSeconds,i.separator);n.val(e),n.focus(),t.setSelection(a,i.start,i.end),i.onChange&&i.onChange(e)}),l.on("click",function(){var e=n.val(),o=new Date("2000/01/01 "+e).getTime();0==i.start?o-=36e5:3==i.start?o-=6e4:6==i.start&&(o-=1e3);var l=new Date(o),e=t.formatData(l.getHours()+i.separator+l.getMinutes()+i.separator+l.getSeconds(),i.showSeconds,i.separator);n.val(e),n.focus(),t.setSelection(a,i.start,i.end),i.onChange&&i.onChange(e)})},getCursorIndex:function(e){var a=-1;if(e.selectionStart)a=e.selectionStart;else if(document.selection){var t=document.selection.createRange();t.moveStart("character",-e.value.length),a=t.text.length}return a},setSelection:function(e,a,t){if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",a),n.select()}else e.setSelectionRange&&e.setSelectionRange(a,t)},formatData:function(e,a,t){var n=this,i=null;if(e){var o=e.split(t),l=n.round(parseInt(o[0]),24),r=n.round(parseInt(o[1]),60),d=n.round(parseInt(o[2]),60);i=a?l+t+r+t+d:l+t+r}else i="";return i},round:function(e,a){var t=null;return t=e&&0/0!==e?e%a+"":"00",1==t.length?"0"+t:t},setValue:function(a,t){var n=this,i=e(a),o=i.data("timespinner").options,t=n.formatData(t,o.showSeconds,o.separator);i.val(t)}};e.fn.timespinner=function(t,n){return"string"==typeof t?e.fn.timespinner.methods[t](this,n):void e.each(this,function(){var n={};e.extend(n,e.fn.timespinner.defaults),e.extend(n,t),e(this).data("timespinner",{options:n}),a.init(this)})},e.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},e.fn.timespinner.methods={setValue:function(e,t){a.setValue(e,t)}}}(jQuery),!function(e,a){var t={treeId:1,isIE:void 0,init:function(e){var a=this;a.bindEvent(e),a.checkIsIE()},checkIsIE:function(){var e=this;e.isIE=/msie|edge|trident/.test(a.navigator.userAgent.toLowerCase())?!0:!1},loadLocalData:function(a){var t=this,n=e(a),i=n.data("tree").options;i.data.length>0?(i.loadFilter&&(i.data=i.loadFilter(i.data)),t.loadData(a,i.data)):console.error("本地数据为空")},loadData:function(a,n,i){var o=e(a),l=o.data("tree").options;o.addClass("lavaui-tree"),o.html(""),t.initData(n,l.htmlArray,0,void 0,l),t.initDom(a,a,l.htmlArray,i)},remoteData:function(a){var t=this,n=e(a),i=n.data("tree").options,o=n.data("tree").options.url;e.ajax({url:o,type:i.method,dataType:"json",data:i.queryParams}).done(function(e){e?(i.data=e,i.loadFilter&&(i.data=i.loadFilter(i.data)),t.loadData(a,i.data,function(){if(i.onLoadSuccess){var e=i.data;i.onLoadSuccess(e)}})):console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空")}).fail(function(){i.onLoadError&&i.onLoadError(),console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败")})},initData:function(e,a,t,n,i){for(var o=this,l=0;l<e.length;l++){e[l].treeId="lava_tree_"+o.treeId++,e[l].level=t?t:0,e[l].parentTreeId=n?n:void 0;var r=i.checkbox,d=i.async;if(r){var s="<li id='"+e[l].treeId+"' {0}><a href='javascript:;'><span class='tree-chkbx {2}'></span><span class='{3}'></span><span>"+e[l].text+"</span>{1}</a>{4}</li>",c="";if(d?e[l].closed?(s=s.replace("{0}","class='closed'"),s=s.replace("{1}","<span class='button-open'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):e[l].children&&e[l].children.length>0?(s=s.replace("{0}",""),s=s.replace("{1}","<span class='button-cloed'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}",""),c="icon-file",s=s.replace("{4}","")):e[l].children&&e[l].children.length>0?e[l].closed?(s=s.replace("{0}","class='closed'"),s=s.replace("{1}","<span class='button-open'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}","<span class='button-close'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}",""),c="icon-file",s=s.replace("{4}","")),s=e[l].iconCls?s.replace("{3}","icon "+e[l].iconCls):s.replace("{3}","node-icon "+c),e[l].checked)e[l].checked=2,s=s.replace("{2}","tree-chk");else if(e[l].children&&e[l].children.length>0){for(var p=[],h=0;h<e[l].children.length;h++)p.push(e[l].children[h].checked?!0:!1);/\/false/.test("/"+p.join("/"))?/\/true/.test("/"+p.join("/"))?(e[l].checked=1,s=s.replace("{2}","tree-halfchk")):(e[l].checked=0,s=s.replace("{2}","tree-nochk")):(e[l].checked=2,s=s.replace("{2}","tree-chk"))}else e[l].checked=0,s=s.replace("{2}","tree-nochk")}else{var c="";if(d)if(e[l].closed){c="icon-folder";var s="<li id='"+e[l].treeId+"' class='closed'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span><span class='button-open'></span></a><ul></ul></li>"}else if(e[l].children&&e[l].children.length>0){c="icon-folder";var s="<li id='"+e[l].treeId+"'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span><span class='button-close'></span></a><ul></ul></li>"}else{c="icon-file";var s="<li id='"+e[l].treeId+"'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span></a></li>"}else if(e[l].children&&e[l].children.length>0)if(e[l].closed){c="icon-folder";var s="<li id='"+e[l].treeId+"' class='closed'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span><span class='button-open'></span></a><ul></ul></li>"}else{c="icon-folder";var s="<li id='"+e[l].treeId+"'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span><span class='button-close'></span></a><ul></ul></li>"}else{c="icon-file";var s="<li id='"+e[l].treeId+"'><a href='javascript:;'><span class='{0}'></span><span>"+e[l].text+"</span></a></li>"}s=e[l].iconCls?s.replace("{0}","icon "+e[l].iconCls):s.replace("{0}","node-icon "+c)}a.push({html:s,parentTreeId:n});var v=t+1;e[l].children&&o.initData(e[l].children,a,v,e[l].treeId,i)}},initDom:function(a,t,n,i){var o=this,l=e(a).data("tree").options.closedChildren;if(0==n.length)return void(i&&i());var r=e(t),d=e(a);d.data("tree").options,n[0].parentTreeId&&(r=e("#"+n[0].parentTreeId).children("ul"));var s=n[0].parentTreeId,c=100;o.isIE&&(c=1e4),c=n.length>c?c:n.length;var p=n.splice(0,c),h=[],v=[];if(a==t)var f=!0;else var f=!r.parent("li").hasClass("closed");for(var u=!1,m=((new Date).getTime(),0);m<p.length;m++)s==p[m].parentTreeId?f?h.push(p[m].html):v.push(p[m]):(f?(r[0].childNodes.length>0?r.append(h.join("")):r[0].innerHTML=h.join(""),u=!0):l[s]=l[s]?l[s].concat(v):v,s=p[m].parentTreeId,r=s?e("#"+s).children("ul"):e(a),f=!r.parent("li").hasClass("closed"),f?(h=[p[m].html],v=[]):(h=[],v=[p[m]]));h.length>0&&(r[0].childNodes.length>0?r.append(h.join("")):r[0].innerHTML=h.join(""),u=!0),v.length>0&&(l[s]=l[s]?l[s].concat(v):v);var b=u?5:0;o.isIE&&u&&(b=3e3),n.length>0?b?setTimeout(function(){o.initDom(a,r,n,i)},b):o.initDom(a,r,n,i):i&&i()},bindEvent:function(a){var t=this,n=e(a),i=n.data("tree").options;n.delegate(".button-open, .button-close, a, .tree-chkbx","click",function(n){var o=e(this);if(o.hasClass("button-open")){t.expandNodes(o.parent("a").parent("li"),a,i);var l=o.parent().prop("id"),r=t.findNode(i.data,l);i.onExpand&&i.onExpand(r),n.stopPropagation()}else if(o.hasClass("button-close")){t.collapseNodes(o);var l=o.parent().prop("id"),r=t.findNode(i.data,l);i.onCollapse&&i.onCollapse(r),n.stopPropagation()}else if("A"==o[0].tagName)o.children(".tree-chkbx").click();else if(o.hasClass("tree-chkbx")){t.checkNodes(a,o);var r=t.findNode(i.data,o.parent().parent().prop("id"));i.onCheck&&i.onCheck(r),n.stopPropagation()}})},expandNodes:function(a,n,i){var o=this,l=e(n),i=l.data("tree").options,r=a,d=r.attr("id"),s=o.findNode(i.data,d),c=s.level,p=s.id;r.hasClass("closed")&&r.removeClass("closed"),r.children("a").children(".button-open")[0].setAttribute("class","button-close"),r.children("a").children(".node-icon").removeClass("icon-folder node-icon").addClass("icon-loading"),r.children("ul")||r.append("<ul></ul>");var h=r.children("ul"),v=null;if(i.async)if(i.closedChildren[d]&&i.closedChildren[d].length>0)v=i.closedChildren[d],r.hasClass("closed")&&r.removeClass("closed"),v&&(o.initDom(n,h,v),r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open"));else{if(s.children&&s.children.length>0)return void r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open");e.ajax({url:i.url,type:i.method,dataType:"json",data:{id:p},success:function(e){if(e.length>0){var a=c+1;o.initData(e,i.htmlArray,a,d,i),o.findNode(i.data,d,function(a){a.children=e}),t.initDom(n,h,i.htmlArray)}else console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空");r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")},error:function(){console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败"),r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}})}else{if(v=i.closedChildren[d]){if(i.cascadeCheck)if(0===s.checked){var f=JSON.stringify(v);f.replace(/(tree\-chk)|(tree\-halfchk)/g,function(){return"tree-nochk"}),v=JSON.parse(f)}else if(2===s.checked){var f=JSON.stringify(v);f=f.replace(/(tree\-nochk)|(tree\-halfchk)/g,function(){return"tree-chk"}),v=JSON.parse(f)}o.initDom(n,h,v)}r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}},collapseNodes:function(e){var a=e;a[0].setAttribute("class","button-open"),a.parent("a").children(".node-icon").removeClass("icon-folder_open").addClass("icon-folder"),a.parent("a").parent("li").addClass("closed")},selectNode:function(a,t,n){var i=this,o=t,l=e(a),r=l.data("tree").options;r.selectedNodes||(r.selectedNodes=[]);var d=r.selectedNodes,s=o.parent().prop("id"),c=i.findNode(r.data,s);if(void 0===n||null===n)if(o.hasClass("selectNode")){if(o.removeClass("selectNode"),d.length>0){for(var p=0,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}d.splice(p,1)}}else{if(r.multiSelect||(l.find(".selectNode").eq(0).removeClass("selectNode"),d=[]),o.addClass("selectNode"),r.onSelect&&r.onSelect(c),d.length>=0)for(var p=null,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}null===p&&d.push(c)}else if(n===!1){if(o.hasClass("selectNode")&&o.removeClass("selectNode"),d.length>0){for(var p=0,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}d.splice(p,1)}}else if(n===!0){if(r.multiSelect||(l.find(".selectNode").eq(0).removeClass("selectNode"),d=[]),o.hasClass("selectNode")||(o.addClass("selectNode"),r.onSelect&&r.onSelect(c)),d.length>=0)for(var p=null,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}null===p&&d.push(c)}r.selectedNodes=d},checkNodes:function(a,t){var n=this,i=t,o=e(a).data("tree").options,l=(o.data,i.hasClass("tree-chk")),r=i.hasClass("tree-nochk"),d=i.hasClass("tree-halfchk");l?n.setCheckStatus(a,i,0):r?n.setCheckStatus(a,i,2):d&&n.setCheckStatus(a,i,2)},setCheckStatus:function(a,t,n){var i=this,o=e(a),l=o.data("tree").options,r=l.data,d=t,s=d.parent().parent(),c=s.children("ul").find(".tree-chkbx"),p=s.prop("id"),h=i.findNode(r,p),v=!1,f=null;h.children&&h.children.length>0&&(v=!0),h.parentTreeId&&h.parentTreeId.length>0&&(f=h.parentTreeId);var u="";if(0===n?u="tree-nochk":1===n?u="tree-halfchk":2===n&&(u="tree-chk"),d[0].setAttribute("class","tree-chkbx "+u),i.updateCheckStatusData(r,p,n),l.cascadeCheck){if(v&&(0===n||2===n)){for(var m=0,b=c.length;b>m;m++)c[m].setAttribute("class","tree-chkbx "+u);i.updateChildCheckStatusData(r,p,n)}f&&i.cascadeCheck(r,f)}},cascadeCheck:function(a,t){var n=this,i=e("#"+t).children("a").children(".tree-chkbx"),o=n.findNode(a,t),l=o.children,r=o.parentTreeId,d=null,s=/"checked":2/.test(JSON.stringify(l)),c=/"checked":1/.test(JSON.stringify(l)),p=/"checked":0/.test(JSON.stringify(l));s?c?(i[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):p?(i[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):(i[0].setAttribute("class","tree-chkbx tree-chk"),d=2):c?(i[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):(i[0].setAttribute("class","tree-chkbx tree-nochk"),d=0),n.updateCheckStatusData(a,t,d),void 0!==r&&n.cascadeCheck(a,r)},findNode:function(e,a,t){for(var n=this,i=0;i<e.length;i++){if(e[i].treeId==a)return t?t(e[i]):e[i];if(e[i].children&&e[i].children.length>0&&n.findNode(e[i].children,a))return t?t(n.findNode(e[i].children,a)):n.findNode(e[i].children,a)}},findNodeById:function(a,t,n){for(var i=this,o=e(a).data("tree").options.nodesById,l=0;l<t.length;l++)t[l].id==n&&o.push(t[l]),t[l].children&&t[l].children.length>0&&i.findNodeById(a,t[l].children,n)},findNodeByFilter:function(a,t,n){for(var i=this,o=e(a).data("tree").options,l=0;l<t.length;l++)n(t[l])&&o.nodesFilter.push(t[l]),t[l].children&&t[l].children.length>0&&i.findNodeByFilter(a,t[l].children,n)},removeNodeById:function(e,a,t){for(var n=this,i=0;i<a.length;i++){if(a[i].treeId==t){a.splice(i,1);break}a[i].children&&a[i].children.length>0&&n.removeNodeById(e,a[i].children,t)}},tranverseNode:function(a,t){for(var n=this,i=e(a).data("tree").options,o=0;o<t.length;o++)0==t[o].checked?i.uncheckedNodes.push(t[o]):1==t[o].checked?i.indeterminateNodes.push(t[o]):2==t[o].checked&&i.checkedNodes.push(t[o]),t[o].children&&t[o].children.length>0&&n.tranverseNode(a,t[o].children)},updateChildCheckStatusData:function(e,a,t){var n=this;n.findNode(e,a,function(e){if(e&&e.children&&e.children.length>0){var a=JSON.stringify(e.children);a=a.replace(/"checked":[0|1|2]/g,function(){return'"checked":'+t}),e.children=JSON.parse(a)}})},updateCheckStatusData:function(e,a,t){var n=this;n.findNode(e,a,function(e){e&&(e.checked=t)})}};e.fn.tree=function(a,n){return"string"==typeof a?e.fn.tree.methods[a](this,n):void e.each(this,function(){var n={};e.extend(n,e.fn.tree.defaults),e.extend(n,a);var i=e(this).data("tree"),o={htmlArray:[],closedChildren:{}};e.extend(n,o),e(this).data("tree",{options:n}),i||t.init(this),e(this).data("tree").options.url?t.remoteData(this):"data"in e(this).data("tree").options&&e(this).data("tree").options.data.length>0&&t.loadLocalData(this)})},e.fn.tree.defaults={url:"",method:"GET",data:[],checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,async:!1,onSelect:null,multiSelect:!1,onCheck:null,onExpand:null,onCollapse:null,onLoadSuccess:null,onLoadError:null,queryParams:{},loadFilter:null},e.fn.tree.methods={find:function(a,n){e(a).data("tree").options.nodesById=[];var i=e(a).data("tree").options.data;return t.findNodeById(a,i,n),e(a).data("tree").options.nodesById},check:function(a,n){var i=e("#"+n).children("a").children(".tree-chkbx"),o=e(a).data("tree").options;if(t.setCheckStatus(a,i,2),o.onCheck){var l=t.findNode(o.data,n);o.onCheck(l)}},uncheck:function(a,n){var i=e("#"+n).children("a").children(".tree-chkbx");t.setCheckStatus(a,i,0)},select:function(a,n){var i=e("#"+n).children("a");t.selectNode(a,i,!0)},unSelect:function(a,n){var i=e("#"+n).children("a");t.selectNode(a,i,!1)},getChecked:function(a,n){var i=e(a),o=i.data("tree").options,l=o.data;o.checkedNodes=[],o.indeterminateNodes=[],o.uncheckedNodes=[],t.tranverseNode(a,l);var r={};if("object"==typeof n)for(var d=0;d<n.length;d++){var s=n[d];r[s]=o[s+"Nodes"]}else"string"==typeof n?r[n]=o[n+"Nodes"]:n||(r.checked=o.checkedNodes);return r},getSelected:function(a){var t=e(a).data("tree").options;return t.selectedNodes||(t.selectedNodes=[]),t.selectedNodes},getChildren:function(a,n){var i=e(a),o=i.data("tree").options.data,l=t.findNode(o,n);return l.children?l.children:[]},getParent:function(a,n){var i=e(a),o=i.data("tree").options.data,l=t.findNode(o,n),r=l.parentTreeId;if(void 0!==r)var d=t.findNode(o,r);return d?d:{}},reload:function(a,n){var i=e(a).data("tree").options;
i.queryParams=n?n:{},i.selectedNodes=[],i.checkedNodes=[],t.remoteData(a)},loadData:function(a,n){e(a).data("tree").options.data=n,t.loadData(a,e(a).data("tree").options.data)},getNodesByFilter:function(a,n){var i=e(a).data("tree").options;return i.nodesFilter=[],t.findNodeByFilter(a,i.data,n),i.nodesFilter},removeNode:function(a,n){e("#"+n).remove();var i=e(a).data("tree").options.data;t.removeNodeById(a,i,n)}}}(jQuery,window),!function(e){function a(){return{$container:void 0,containerHeight:0,containerWidth:0,columnNum:4,borderSize:2,boxIndex:0,pageIndex:1,pageSize:4,pageCount:1,borderType:"solid",maxCount:16,isMouseDown:!1,$box:e("<div out='true' style='position:relative;float:left;'><div style='height:20px;width:100%;'></div><div style='position:absolute;width:100%;top:20px;bottom:0;'></div></div>"),$moveBox:e("<div style='position:absolute;z-index:9;pointer-events:none;'></div>"),$focusBox:e("<div style='position:absolute;z-index:998;pointer-events:none;border:2px solid red;'></div>")}}function t(a){var t=e.data(a,"lavaVideoLayout").options,n=e.data(a,"lavaVideoLayout").custom;return n.$container=e(a),n.containerHeight=e(a).height(),n.containerWidth=e(a).width(),e(a).delegate('div[out="true"]',"click",function(){var i=e(this).height(),o=e(this).width(),l=e(this).offset(),r=e(this).attr("index");return n.$moveBox.width(o).height(i).css("top",l.top-e(a).offset().top-1).css("left",l.left-e(a).offset().left-1).show(),n.boxIndex=parseInt(r,10),t.click.call(this,r,e(this)),!1}),e(a).delegate('div[out="true"]',"dblclick",function(){if(1!=n.$container.children("div").length){var i=parseInt(e(this).attr("index"),10);if(void 0===e(this).attr("zoom")){var o=e(this).attr("style");e(this).width("99.7%").height("99.7%").attr("zoom","out").attr("oldStyle",o).siblings("div").hide(),e(this).click(),t.zoomOut.call(this,i,e(this))}else{var l=e(this).attr("oldStyle");e(this).attr("style",l).removeAttr("zoom").removeAttr("oldStyle"),e(a).lavaVideoLayout("to",e(a).data("lavaVideoLayout").custom.pageSize),e(this).click(),t.zoomIn.call(this,i,e(this))}}}),e(a).delegate('div[out="true"]',"mouseenter",function(){var a=parseInt(e(this).attr("index"),10);if(n.isMouseDown&&a!==n.boxIndex){var t=e(this).height(),i=e(this).width(),o=e(this).offset();n.$focusBox.width(i).height(t).css("top",o.top-n.borderSize).css("left",o.left-n.borderSize).show()}}),e(a).delegate('div[out="true"]',"mouseleave",function(){n.isMouseDown!=n.boxIndex&&n.$focusBox.hide()}),e(a).delegate('div[out="true"]',"mousedown",function(a){var i=parseInt(e(this).attr("index"),10);3===a.which?t.rightClick.call(this,i,e(this)):1===a.which&&i===n.boxIndex&&(n.isMouseDown=!0,t.dragStart.call(this,i,e(this)))}),e(a).delegate('div[out="true"]',"mouseup",function(){var a=parseInt(e(this).attr("index"),10);n.isMouseDown&&(n.isMouseDown=!1,n.$focusBox.hide(),e(this).click().focus(),t.dragEnd.call(this,a,e(this)))}),n.$moveBox.css("border","1px "+n.borderType+" "+t.borderColor).appendTo(e(a).parent()).hide(),n.$focusBox.appendTo(e("body")).hide(),e(a).lavaVideoLayout("to",t.defaultCount),e(a)}e.fn.lavaVideoLayout=function(n,i){return"string"==typeof n?e.fn.lavaVideoLayout.methods[n](this,i):(n=n||{},this.each(function(){var i=e.data(this,"lavaVideoLayout");i?e.extend(i.options,n):(e.data(this,"lavaVideoLayout",{options:e.extend({},e.fn.lavaVideoLayout.defaults,n),custom:a()}),e(this).data("lavaVideoLayout").custom.maxCount=n.maxLayout),t(this)}))},e.fn.lavaVideoLayout.methods={options:function(a){return e.data(a[0],"lavaVideoLayout").options},addTool:function(e,a){var t=e.lavaVideoLayout("getItem",a.index),n=t.children("div").eq(0);n.append(a.el)},addContent:function(e,a){var t=e.lavaVideoLayout("getItem",a.index),n=t.children("div").eq(1);n.append(a.el)},getTitlePanel:function(e,a){var t=e.lavaVideoLayout("getItem",a);return null==t?null:t.children("div").eq(0)},getContentPanel:function(e,a){var t=e.lavaVideoLayout("getItem",a);return null==t?null:t.children("div").eq(1)},getItem:function(a,t){var n=e.data(a[0],"lavaVideoLayout").custom,i=n.$container.children("div"),o=null;return t=parseInt(t,10),e.each(i,function(a,n){var i=parseInt(e(this).attr("index"),10);t===i&&(o=e(n))}),o},getSelectedIndex:function(a){var t=e.data(a[0],"lavaVideoLayout").custom;return t.boxIndex},setSelectedIndex:function(a,t){e(a).data("lavaVideoLayout").custom.boxIndex=t,e(a).data("lavaVideoLayout").custom.pageSize=1},pre:function(a){var t=e.data(a[0],"lavaVideoLayout").custom;t.pageIndex>1&&(t.pageIndex--,to(t.pageSize))},next:function(a){var t=e.data(a[0],"lavaVideoLayout").custom;t.pageIndex<t.maxCount&&(t.pageIndex++,to(t.pageSize))},hideSelectedBorder:function(a){var t=e.data(a[0],"lavaVideoLayout").custom;t.$moveBox.hide()},getCount:function(a){var t=e.data(a[0],"lavaVideoLayout").custom,n=t.$container.children("div");return n.length},resize:function(a){var t=e.data(a[0],"lavaVideoLayout").custom;t.containerHeight=t.$container.height(),t.containerWidth=t.$container.width(),a.lavaVideoLayout("to",t.pageSize)},to:function(a,t,n){var i=e.data(a[0],"lavaVideoLayout").options,o=e.data(a[0],"lavaVideoLayout").custom,l=o.$container.children("div"),r=l.length;n&&(o.boxIndex=1),o.pageSize=t,o.pageCount=Math.ceil((r>t?r:t)/o.pageSize),o.pageIndex=Math.ceil((0===o.boxIndex?o.pageSize:o.boxIndex)/o.pageSize);var d=o.pageSize*o.pageCount;d=d>o.maxCount?o.maxCount:d;for(var s=0;d>s;s++)if(l.eq(s).length>0&&(s<(o.pageIndex-1)*o.pageSize||s>=o.pageIndex*o.pageSize))l.eq(s).hide();else if(l.eq(s).length>0&&s>=(o.pageIndex-1)*o.pageSize&&s<o.pageIndex*o.pageSize)l.eq(s).show();else if(0==l.eq(s).length&&s>=(o.pageIndex-1)*o.pageSize&&s<o.pageIndex*o.pageSize){var c=o.$box.css({background:i.bgColor,marginTop:o.borderSize,marginLeft:o.borderSize}),p=c.clone().attr("index",s+1);o.$container.append(p),i.addComplete(s+1,p)}e(".lp-layout.selected").removeClass("selected"),e(".lp-layout"+t).addClass("selected");var h,v,f,u,m,b;o.$container.width(),h="99.66%",v="49.66%",f="32.996%",u="66.05%",m="24.662%",b="49.66%",e.each(o.$container.children("div"),function(a,n){var i=0,l=0;if(a>=(o.pageIndex-1)*o.pageSize&&a<o.pageIndex*o.pageSize){switch(a-=(o.pageIndex-1)*o.pageSize,t){case 1:i=h,l=h;break;case 2:i=h,l=v;break;case 3:0==a?(i=h,l=v):(i=v,l=v);break;case 4:i=v,l=v;break;case 6:0==a?(i=u,l=u):(i=f,l=f);break;case 9:i=f,l=f;break;case 10:2>a?(i=v,l=v):(i=m,l=m);break;case 12:i=f,l=m;break;case 16:i=m,l=m;break;case 25:i="19.59%",l="19.59%";break;case 36:i="16.26%",l="16.26%";break;case 64:i="12.12%",l="12.12%"}e(n).css({width:l,height:i});var a=e(this).attr("index");a=parseInt(a,10),a===o.boxIndex&&e(n).click()}})}},e.fn.lavaVideoLayout.defaults={defaultCount:4,layout:"square",bgColor:"black",borderColor:"rgb(68,176,44)",addComplete:function(){},removeComplete:function(){},zoomIn:function(){},zoomOut:function(){},click:function(){},rightClick:function(){},dragStart:function(){},dragEnd:function(){},resize:function(){},onBeforeRemove:function(){}}}(jQuery);