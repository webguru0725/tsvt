!function(a){function c(){return{$container:void 0,containerHeight:0,containerWidth:0,columnNum:4,borderSize:2,boxIndex:0,pageIndex:1,pageSize:4,pageCount:1,borderType:"solid",maxCount:16,isMouseDown:!1,$box:a("<div out='true' style='position:relative;float:left;'><div style='height:20px;width:100%;'></div><div style='position:absolute;width:100%;top:20px;bottom:0;'></div></div>"),$moveBox:a("<div style='position:absolute;z-index:9;pointer-events:none;'></div>"),$focusBox:a("<div style='position:absolute;z-index:998;pointer-events:none;border:2px solid red;'></div>")}}function h(c){var h=a.data(c,"lavaVideoLayout").options,v=a.data(c,"lavaVideoLayout").custom;return v.$container=a(c),v.containerHeight=a(c).height(),v.containerWidth=a(c).width(),a(c).delegate('div[out="true"]',"click",function(){var g=a(this).height(),y=a(this).width(),b=a(this).offset(),I=a(this).attr("index");return v.$moveBox.width(y).height(g).css("top",b.top-a(c).offset().top-1).css("left",b.left-a(c).offset().left-1).show(),v.boxIndex=parseInt(I,10),h.click.call(this,I,a(this)),!1}),a(c).delegate('div[out="true"]',"dblclick",function(){if(1!=v.$container.children("div").length){var g=parseInt(a(this).attr("index"),10);if(void 0===a(this).attr("zoom")){var y=a(this).attr("style");a(this).width("99.7%").height("99.7%").attr("zoom","out").attr("oldStyle",y).siblings("div").hide(),a(this).click(),h.zoomOut.call(this,g,a(this))}else{var b=a(this).attr("oldStyle");a(this).attr("style",b).removeAttr("zoom").removeAttr("oldStyle"),a(c).lavaVideoLayout("to",a(c).data("lavaVideoLayout").custom.pageSize),a(this).click(),h.zoomIn.call(this,g,a(this))}}}),a(c).delegate('div[out="true"]',"mouseenter",function(){var c=parseInt(a(this).attr("index"),10);if(v.isMouseDown&&c!==v.boxIndex){var h=a(this).height(),g=a(this).width(),y=a(this).offset();v.$focusBox.width(g).height(h).css("top",y.top-v.borderSize).css("left",y.left-v.borderSize).show()}}),a(c).delegate('div[out="true"]',"mouseleave",function(){v.isMouseDown!=v.boxIndex&&v.$focusBox.hide()}),a(c).delegate('div[out="true"]',"mousedown",function(e){var c=parseInt(a(this).attr("index"),10);3===e.which?h.rightClick.call(this,c,a(this)):1===e.which&&c===v.boxIndex&&(v.isMouseDown=!0,h.dragStart.call(this,c,a(this)))}),a(c).delegate('div[out="true"]',"mouseup",function(){var c=parseInt(a(this).attr("index"),10);v.isMouseDown&&(v.isMouseDown=!1,v.$focusBox.hide(),a(this).click().focus(),h.dragEnd.call(this,c,a(this)))}),v.$moveBox.css("border","1px "+v.borderType+" "+h.borderColor).appendTo(a(c).parent()).hide(),v.$focusBox.appendTo(a("body")).hide(),a(c).lavaVideoLayout("to",h.defaultCount),a(c)}a.fn.lavaVideoLayout=function(v,g){return"string"==typeof v?a.fn.lavaVideoLayout.methods[v](this,g):(v=v||{},this.each(function(){var g=a.data(this,"lavaVideoLayout");g?a.extend(g.options,v):(a.data(this,"lavaVideoLayout",{options:a.extend({},a.fn.lavaVideoLayout.defaults,v),custom:c()}),a(this).data("lavaVideoLayout").custom.maxCount=v.maxLayout),h(this)}))},a.fn.lavaVideoLayout.methods={options:function(c){return a.data(c[0],"lavaVideoLayout").options},addTool:function(a,c){var h=a.lavaVideoLayout("getItem",c.index),v=h.children("div").eq(0);v.append(c.el)},addContent:function(a,c){var h=a.lavaVideoLayout("getItem",c.index),v=h.children("div").eq(1);v.append(c.el)},getTitlePanel:function(a,c){var h=a.lavaVideoLayout("getItem",c);return null==h?null:h.children("div").eq(0)},getContentPanel:function(a,c){var h=a.lavaVideoLayout("getItem",c);return null==h?null:h.children("div").eq(1)},getItem:function(c,h){var v=a.data(c[0],"lavaVideoLayout").custom,g=v.$container.children("div"),y=null;return h=parseInt(h,10),a.each(g,function(c,v){var g=parseInt(a(this).attr("index"),10);h===g&&(y=a(v))}),y},getSelectedIndex:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;return h.boxIndex},setSelectedIndex:function(c,h){a(c).data("lavaVideoLayout").custom.boxIndex=h,a(c).data("lavaVideoLayout").custom.pageSize=1},pre:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.pageIndex>1&&(h.pageIndex--,to(h.pageSize))},next:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.pageIndex<h.maxCount&&(h.pageIndex++,to(h.pageSize))},hideSelectedBorder:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.$moveBox.hide()},getCount:function(c){var h=a.data(c[0],"lavaVideoLayout").custom,v=h.$container.children("div");return v.length},resize:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.containerHeight=h.$container.height(),h.containerWidth=h.$container.width(),c.lavaVideoLayout("to",h.pageSize)},to:function(c,h,v){var g=a.data(c[0],"lavaVideoLayout").options,y=a.data(c[0],"lavaVideoLayout").custom,b=y.$container.children("div"),I=b.length;v&&(y.boxIndex=1),y.pageSize=h,y.pageCount=Math.ceil((I>h?I:h)/y.pageSize),y.pageIndex=Math.ceil((0===y.boxIndex?y.pageSize:y.boxIndex)/y.pageSize);var z=y.pageSize*y.pageCount;z=z>y.maxCount?y.maxCount:z;for(var i=0;z>i;i++)if(b.eq(i).length>0&&(i<(y.pageIndex-1)*y.pageSize||i>=y.pageIndex*y.pageSize))b.eq(i).hide();else if(b.eq(i).length>0&&i>=(y.pageIndex-1)*y.pageSize&&i<y.pageIndex*y.pageSize)b.eq(i).show();else if(0==b.eq(i).length&&i>=(y.pageIndex-1)*y.pageSize&&i<y.pageIndex*y.pageSize){var S=y.$box.css({background:g.bgColor,marginTop:y.borderSize,marginLeft:y.borderSize}),L=S.clone().attr("index",i+1);y.$container.append(L),g.addComplete(i+1,L)}a(".lp-layout.selected").removeClass("selected"),a(".lp-layout"+h).addClass("selected");{var V,w,C,k,$,B;y.$container.width()}V="99.66%",w="49.66%",C="32.996%",k="66.05%",$="24.662%",B="49.66%",a.each(y.$container.children("div"),function(c,v){var g=0,b=0;if(c>=(y.pageIndex-1)*y.pageSize&&c<y.pageIndex*y.pageSize){switch(c-=(y.pageIndex-1)*y.pageSize,h){case 1:g=V,b=V;break;case 2:g=V,b=w;break;case 3:0==c?(g=V,b=w):(g=w,b=w);break;case 4:g=w,b=w;break;case 6:0==c?(g=k,b=k):(g=C,b=C);break;case 9:g=C,b=C;break;case 10:2>c?(g=w,b=w):(g=$,b=$);break;case 12:g=C,b=$;break;case 16:g=$,b=$;break;case 25:g="19.59%",b="19.59%";break;case 36:g="16.26%",b="16.26%";break;case 64:g="12.12%",b="12.12%"}a(v).css({width:b,height:g});var c=a(this).attr("index");c=parseInt(c,10),c===y.boxIndex&&a(v).click()}})}},a.fn.lavaVideoLayout.defaults={defaultCount:4,layout:"square",bgColor:"black",borderColor:"rgb(68,176,44)",addComplete:function(){},removeComplete:function(){},zoomIn:function(){},zoomOut:function(){},click:function(){},rightClick:function(){},dragStart:function(){},dragEnd:function(){},resize:function(){},onBeforeRemove:function(){}}}(jQuery);