var lavaTabs={tabIndex:0,timer:null,initDom:function(a){var b=this,v=$(a);v.addClass("lava-tabs");var c=$(a).data("tabs").options,h=$("<div class='lava-tabs-toolbar'></div>").appendTo(v),g=$("<div class='lava-tabs-pre'><a href='javascript:;' class='lava-tabs-btn-pre'><span class='glyphicon glyphicon-backward'></span></a></div>").appendTo(h),T=$("<div class='lava-tabs-btn-wrapper'></div>").appendTo(h),C=($("<div class='lava-tabs-next'><a href='javascript:;' class='lava-tabs-btn-next'><span class='glyphicon glyphicon-forward'></span></a></div>").appendTo(h),$("<div class='lava-tabs-btns'></div>").appendTo(T),g.width());T.css({"margin-left":C}),c.fit&&v.css({width:"100%",height:"100%"}).addClass("fit"),c.border&&v.addClass("bordered"),b.bindEvent(a),b.setOption(a)},addTab:function(a,b){var v=lavaTabs,c=$(a),h=c.children(".lava-tabs-toolbar").find(".lava-tabs-btns"),g=(c.data("tabs").options,b.hideType?b.hideType:"hide"),T=c.children(".lava-tabs-toolbar").find(".lava-tabs-btn-next");h.find(".lava-tabs-btn-selected").removeClass("lava-tabs-btn-selected");var C=$("<a href='javascript:;' class='lava-tabs-btn lava-tabs-btn-selected' data-for='lava-tabs-"+ ++v.tabIndex+"' data-hidetype='"+g+"'>"+b.title+" </a>").appendTo(h);b.closable!==!1&&$("<span class='close'></span>").appendTo(C),v.hideAll(a);$("<div class='lava-tabs-tab' id='lava-tabs-"+v.tabIndex+"' data-hidetype='"+g+"'>"+b.content+"</div>").appendTo(c);C.offset().left+C.outerWidth()>T.offset().left&&T.click()},select:function(a,b){for(var v=null,c=$(a).children(".lava-tabs-toolbar"),h=c.find(".lava-tabs-btn"),i=0;i<h.length;i++)if(b==i||b==h.eq(i).text()){v=h.eq(i);break}if(v){v.click();var g=c.children(".lava-tabs-btn-wrapper"),T=g.children(),C=c.find(".lava-tabs-btn-next"),y=T.css("left").replace("px","");y=y?parseInt(y):0,v.offset().left<g.offset().left?(y+=g.offset().left-v.offset().left,T.animate({left:y},"fast")):v.offset().left+v.outerWidth()>C.offset().left&&(y-=v.offset().left+v.outerWidth()-C.offset().left,T.animate({left:y},"fast"))}},setOption:function(a,b){var v=$(a),c=v.data("tabs").options;b&&$.extend(c,b);var h=v.find(".lava-tabs-toolbar"),g=["<style>"];c.bgColor&&g.push(".lava-tabs-toolbar,.lava-tabs-btn-pre,.lava-tabs-btn-next{background-color:"+c.bgColor+";}"),c.color&&g.push(".lava-tabs-btn,.lava-tabs-btn-pre,.lava-tabs-btn-next{color:"+c.color+";}"),c.borderColor&&(g.push(".lava-tabs-btn-pre,.lava-tabs-btn-next,.lava-tabs-btn{border-color:"+c.borderColor+";}"),h.css({"border-bottom-color":c.borderColor})),c.activeColor&&(g.push(".lava-tabs-btn-pre:hover,.lava-tabs-btn-next:hover,.lava-tabs-btn:hover,.lava-tabs-btn-selected,.lava-tabs-btn:focus {background-color:"+c.activeColor+";"),g.push(c.color?"color:"+c.color+";}":"}")),g.push("</style>"),v.data("tabs").style&&v.data("tabs").style.remove();var T=$(g.join("\n")).insertAfter(v);v.data("tabs").style=T},bindEvent:function(a){var b=this,v=$(a),c=v.data("tabs").options,h=v.children(".lava-tabs-toolbar"),g=h.children(".lava-tabs-btn-wrapper"),T=g.children(),C=h.find(".lava-tabs-btn-pre"),y=h.find(".lava-tabs-btn-next");h.delegate(".lava-tabs-btn","click",function(){if(!$(this).hasClass("lava-tabs-btn-selected")){h.find(".lava-tabs-btn").removeClass("lava-tabs-btn-selected"),$(this).addClass("lava-tabs-btn-selected"),b.hideAll(a);var v=$(this).attr("data-for");"position"==$(this).attr("data-hidetype")?$("#"+v).css({position:"relative",left:0}):$("#"+v).removeClass("lava-tabs-tab-close"),c.onSelect&&c.onSelect($.trim($(this).text()))}}),h.delegate(".close","click",function(){var a=$(this).parent().attr("data-for"),b=$(this).parent();return b.hasClass("lava-tabs-btn-selected")&&(b.next().length>0?b.next().click():b.prev().length>0&&b.prev().click()),c.onClose&&c.onClose($.trim(b.text())),b.remove(),$("#"+a).remove(),!1}),C.on("click",function(){var a=T.children(),b=a.first();if(b.offset().left<g.offset().left)for(var i=0;i<a.length;i++){var v=a.eq(i);if(v.offset().left+v.outerWidth()>=g.offset().left){var c=T.css("left").replace("px","");c=c?parseInt(c):0,v.offset().left-T.offset().left<=y.offset().left-a.eq(i+1).offset().left?c=0:c+=y.offset().left-a.eq(i+1).offset().left,T.animate({left:c},"fast");break}}}),y.on("click",function(){var a=T.children();if(a.last().offset().left+a.last().width()>y.offset().left)for(var i=0;i<a.length;i++){var b=a.eq(i);if(b.offset().left+b.width()>y.offset().left){var v=T.css("left").replace("px","");v=v?parseInt(v):0,a.last().offset().left+a.last().outerWidth()-b.offset().left<g.width()-y.outerWidth()?v-=a.last().offset().left+a.last().outerWidth()-y.offset().left:b.offset().left<=y.offset().left?v-=b.offset().left-g.offset().left:b.prev().length>0&&(v-=b.prev().offset().left-g.offset().left),T.animate({left:v},"fast");break}}}),window.onresize=function(){/msie 8/.test(navigator.userAgent.toLowerCase())&&(b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){b.resizeDom(a)},10))}},hideAll:function(a){for(var b=$(a),v=b.children(".lava-tabs-tab"),i=0;i<v.length;i++){var c=v.eq(i);"position"==c.attr("data-hidetype")?c.css({position:"absolute",left:-1e4}):c.addClass("lava-tabs-tab-close")}},resizeDom:function(a){var b=$(a),v=b.children(".lava-tabs-toolbar"),c=b.children(".lava-tabs-tab").not(".lava-tabs-tab-close"),h=b.height()-v.height()-2;c.css({height:h})}};$.fn.lavaTabs=function(a,b){return"string"==typeof a?$.fn.lavaTabs.methods[a](this,b):this.each(function(){var b={};$.extend(b,$.fn.lavaTabs.defaults),$(this).data("tabs",{options:b}),$.extend($(this).data("tabs").options,a),lavaTabs.initDom(this)})},$.fn.lavaTabs.defaults={border:!1,fit:!0,bgColor:"",color:"",borderColor:"",activeColor:"",onClose:null,onSelect:null},$.fn.lavaTabs.methods={add:function(a,b){lavaTabs.addTab(a,b)},select:function(a,b){lavaTabs.select(a,b)},setOption:function(a,b){lavaTabs.setOption(a,b)}};