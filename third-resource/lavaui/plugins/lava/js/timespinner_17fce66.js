!function(e){var t={init:function(t){var n=e(t).css({paddingRight:20}),a=n.parent();a.css({position:"relative"});var i=e("<div class='timespinner-add'></div>").appendTo(a),r=e("<div class='timespinner-minus'></div>").appendTo(a),s=(n.innerHeight()/2,20);i.css({height:"45%",width:s}),r.css({height:"45%",width:s}),n.data("timespinner").add=i,n.data("timespinner").minus=r,this.initEvent(t)},initEvent:function(t){var n=this,a=e(t),i=a.data("timespinner").options,r=a.data("timespinner").add,s=a.data("timespinner").minus;a.on("click blur",function(e){if("click"==e.type){var r=n.getCursorIndex(t);if(1>r||r%3==0)return;if(r%3==1)var s=r-1;else if(r%3==2)var s=r-2;var o=s+2;i.start=s,i.end=o,n.setSelection(t,s,o)}else{var c=a.val(),d=n.formatData(a.val(),i.showSeconds,i.separator);a.val(d),i.onChange&&i.onChange(c,d)}}),r.on("click",function(){if(!a.attr("disabled")){var e=a.val(),r=new Date("2000/01/01 "+e).getTime();0==i.start?r+=36e5:3==i.start?r+=6e4:6==i.start&&(r+=1e3);var s=new Date(r),o=a.val(),e=n.formatData(s.getHours()+i.separator+s.getMinutes()+i.separator+s.getSeconds(),i.showSeconds,i.separator);a.val(e),a.focus(),n.setSelection(t,i.start,i.end),i.onChange&&i.onChange(o,e)}}),s.on("click",function(){if(!a.attr("disabled")){var e=a.val(),r=new Date("2000/01/01 "+e).getTime();0==i.start?r-=36e5:3==i.start?r-=6e4:6==i.start&&(r-=1e3);var s=new Date(r),o=a.val(),e=n.formatData(s.getHours()+i.separator+s.getMinutes()+i.separator+s.getSeconds(),i.showSeconds,i.separator);a.val(e),a.focus(),n.setSelection(t,i.start,i.end),i.onChange&&i.onChange(o,e)}})},getCursorIndex:function(e){var t=-1;if(e.selectionStart)t=e.selectionStart;else if(document.selection){var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}return t},setSelection:function(e,t,n){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select()}else e.setSelectionRange&&e.setSelectionRange(t,n)},formatData:function(e,t,n){var a=this,i=null;if(e){var r=e.split(n),s=a.round(parseInt(r[0]),24),o=a.round(parseInt(r[1]),60),c=a.round(parseInt(r[2]),60);i=t?s+n+o+n+c:s+n+o}else i="";return i},round:function(e,t){var n=null;return n=e&&0/0!==e?e%t+"":"00",1==n.length?"0"+n:n},setValue:function(t,n){var a=this,i=e(t),r=i.data("timespinner").options,n=a.formatData(n,r.showSeconds,r.separator);i.val(n)}};e.fn.timespinner=function(n,a){return"string"==typeof n?e.fn.timespinner.methods[n](this,a):void e.each(this,function(){var a={};e.extend(a,e.fn.timespinner.defaults),e.extend(a,n),e(this).data("timespinner",{options:a}),t.init(this)})},e.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},e.fn.timespinner.methods={setValue:function(e,n){t.setValue(e,n)}}}(jQuery);