var lavaCalendar={init:function(a){var e=this,t=$(a),n=t.data("calendar").options,o=$.fn.lavaCalendar.locales[n.lang];t.hasClass("lava-calendar")?t.html(""):t.addClass("lava-calendar");for(var l=$("<div class='lava-calendar-header' style='background:"+n.color+";'></div>").appendTo(t),i=($("<div class='lava-calendar-prevyear'>«</div>").appendTo(l),$("<div class='lava-calendar-nextyear'>»</div>").appendTo(l),$("<div class='lava-calendar-prevmonth'><</div>").appendTo(l),$("<div class='lava-calendar-nextmonth'>></div>").appendTo(l),$("<span class='lava-calendar-text'></span>").appendTo(l),$("<table class='lava-calendar-table'></table>").appendTo(t)),r=$("<thead class='lava-calendar-thead'></thead>").appendTo(i),d=$("<tbody class='lava-calendar-tbody'></tbody>").appendTo(i),s=["<tr>"],c=0;7>c;c++)s.push("<th style='color:"+n.color+";'>"+o[c]+"</th>");s.push("</tr>");for(var p=[],c=0;6>c;c++){for(var h=["<tr>"],v=0;7>v;v++)h.push("<td></td>");h.push("</tr>"),p.push(h.join(""))}r.html(s.join("")),d.html(p.join(""));for(var f=$("<div class='lava-calendar-menu hidden'></div>").appendTo(t),u=$("<div class='lava-calendar-menu-year'></div>").appendTo(f),b=($("<div class='lava-calendar-prevyear-inner'>«</div>").appendTo(u),$("<span><input class='lava-calendar-menu-year-input'/></span>").appendTo(u),$("<div class='lava-calendar-nextyear-inner'>»</div>").appendTo(u),$("<div class='lava-calendar-menu-month'></div>").appendTo(f)),m=$("<table></table>").appendTo(b),g=$("<tbody></tbody>").appendTo(m),y=[],c=1;13>c;c++){var x="";(0===c||c%4===1)&&(x+="<tr>"),x=x+"<td data-month='"+c+"'>"+o[c+6]+"</td>",0!==c&&c%4===0&&(x+="</tr>"),y.push(x)}$(y.join("")).appendTo(g),e.loadDate(a),e.resize(a)},loadDate:function(a){var e=this,t=$(a),n=t.data("calendar").options,o=n.currentDate;o.setDate(1);var l=n.currentDate.getFullYear(),i=n.currentDate.getMonth();t.find(".lava-calendar-header span").text(l+"-"+e.round(i+1));var r=t.find(".lava-calendar-table").find("td"),d=o.getDay(),s=new Date(o.getTime());s.setMonth(i+1),s.setTime(s.getTime()-864e5);var c=s.getDate();r.text("").removeAttr("data-date").removeAttr("class");for(var p=0;c>p;p++)r.eq(p+d).text(p+1).attr("data-date",l+"/"+(i+1)+"/"+(p+1));if(n.showOtherDate){for(var h=new Date(o.getTime()-864e5),v=h.getDate(),l=h.getFullYear(),i=h.getMonth(),p=0;d>p;p++){var f=v-d+p+1;r.eq(p).text(f).attr("data-date",l+"/"+(i+1)+"/"+f).addClass("other")}var u=new Date(o.getTime());u.setMonth(i+2);for(var l=u.getFullYear(),i=u.getMonth(),p=0;42-d-c>p;p++)r.eq(d+c+p).text(p+1).attr("data-date",l+"/"+(i+1)+"/"+(p+1)).addClass("other")}if(n.data&&e.loadData(a),n.date){var f=n.date;t.find(".lava-calendar-table").find("td[data-date='"+f.getFullYear()+"/"+(f.getMonth()+1)+"/"+f.getDate()+"']").addClass("active")}n.onLoadDateSuccess&&n.onLoadDateSuccess()},loadData:function(a){var e=$(a),t=e.data("calendar").options,n=t.data,o=e.children("table").find("td");o.css({background:"transparent"}),o.prop("class","").removeAttr("data-type").removeAttr("data-blackbox").children().remove();for(var l=0;l<o.length;l++){var i=o.eq(l).attr("data-date");if(i)for(var r=i.split("/")[0],d=i.split("/")[1],s=i.split("/")[2],c=0;c<n.length;c++){var p=n[c].date;if(p.getFullYear()==r&&p.getMonth()+1==d&&p.getDate()==s){"normal"==n[c].type?o.eq(l).addClass("lava-calendar-normal").attr("data-type","normal").css({background:t.normalColor}):"alarm"==n[c].type?o.eq(l).addClass("lava-calendar-alarm").attr("data-type","alarm").css({background:t.alarmColor}):"warn"==n[c].type&&o.eq(l).addClass("lava-calendar-alarm").attr("data-type","warn").css({background:t.warnColor}),n[c].blackbox&&o.eq(l).append("<div class='lava-calendar-blackbox'></div>").attr("data-blackbox",!0),n[c].device&&o.eq(l).append("<div class='lava-calendar-device'></div>"),n[c].server&&o.eq(l).append("<div class='lava-calendar-server'></div>");break}}}},gotoMonthOrYear:function(a,e,t){var n=this,o=$(a),l=o.data("calendar").options;if("month"===e){var i=l.currentDate.getMonth();l.currentDate.setMonth("next"==t?i+1:i-1)}else if("year"===e){var r=l.currentDate.getFullYear();l.currentDate.setYear("next"==t?r+1:r-1)}else if("monthyear"===e){var r=t.split("-")[0],i=t.split("-")[1];l.currentDate.setYear(parseInt(r)),l.currentDate.setMonth(parseInt(i)-1)}if(n.loadDate(a),l.onMonthChange){var d=l.currentDate,s=new Date(d.getFullYear()+"/"+n.round(d.getMonth()+1)+"/"+n.round(d.getDate())+" 00:00:00"),c=new Date(s.getTime());c.setMonth(c.getMonth()+1),c.setTime(c.getTime()-1),l.onMonthChange(s,c)}},resize:function(a){var e=$(a),t=.6*e.width()/6;e.find(".lava-calendar-table").find("td").css({height:t})},round:function(a){return 10>a?"0"+a:a},bindEvent:function(a){var e=this,t=$(a),n=t.data("calendar").options;t.on("selectstart",function(){return!1}),t.find(".lava-calendar-prevyear").on("click",function(){e.gotoMonthOrYear(a,"year","prev")}),t.find(".lava-calendar-nextyear").on("click",function(){e.gotoMonthOrYear(a,"year","next")}),t.find(".lava-calendar-prevyear-inner").on("click",function(){t.find(".lava-calendar-menu-year-input").val(parseInt(t.find(".lava-calendar-menu-year-input").val())-1)}),t.find(".lava-calendar-nextyear-inner").on("click",function(){t.find(".lava-calendar-menu-year-input").val(parseInt(t.find(".lava-calendar-menu-year-input").val())+1)}),t.find(".lava-calendar-prevmonth").on("click",function(){e.gotoMonthOrYear(a,"month","prev")}),t.find(".lava-calendar-nextmonth").on("click",function(){e.gotoMonthOrYear(a,"month","next")}),t.children("table").find("td").on("click dblclick",function(o){t.find("td").children(".lava-calendar-active").remove();var l=$(this),i=l.width()+2,r=l.height()+2;if(l.append("<div class='lava-calendar-active' style='width:"+i+"px;height:"+r+"px;'></div>"),"click"==o.type&&n.onClick&&l.attr("data-date")){var d={date:new Date(l.attr("data-date")),type:l.attr("data-type"),blackbox:l.attr("data-blackbox")};n.date=d.date,n.onClick(d)}if("dblclick"==o.type&&n.onDblclick&&l.attr("data-date")){var d={date:new Date(l.attr("data-date")),type:l.attr("data-type"),blackbox:l.attr("data-blackbox")};n.date=d.date,n.onDblclick(d)}l.hasClass("active")||(t.find(".active").removeClass("active"),l.addClass("active")),l.hasClass("other")&&(n.currentDate=new Date(l.attr("data-date")),e.loadDate(a))}),t.find(".lava-calendar-header span").on("mouseover mouseout click",function(o){var l=$(o.target);"mouseout"==o.type?$(o.target).removeClass("lava-calendar-nav-hover"):"mouseover"==o.type?l.hasClass("lava-calendar-nav-hover")||$(o.target).addClass("lava-calendar-nav-hover"):"click"==o.type&&(t.find(".lava-calendar-menu").is(":visible")?(t.find(".lava-calendar-menu").hide(),e.gotoMonthOrYear(a,"monthyear",t.find(".lava-calendar-text").text())):(t.find(".lava-calendar-menu-year-input").val(t.find(".lava-calendar-text").text().split("-")[0]),t.find(".lava-calendar-menu-month").find("td[data-month='"+(n.currentDate.getMonth()+1)+"']").click(),t.find(".lava-calendar-menu").show())),o.stopPropagation()}),t.find(".lava-calendar-menu-month").find("td").on("click",function(n){var o=$(n.target);t.find(".lava-calendar-selected-month").removeClass("lava-calendar-selected-month"),o.hasClass("lava-calendar-selected-month")||o.addClass("lava-calendar-selected-month"),t.find(".lava-calendar-text").text(t.find(".lava-calendar-menu-year-input").val()?parseInt(t.find(".lava-calendar-menu-year-input").val())+"-"+e.round(o.attr("data-month")):t.find(".lava-calendar-text").text().split("-")[0]+"-"+e.round(o.attr("data-month"))),e.gotoMonthOrYear(a,"monthyear",t.find(".lava-calendar-text").text()),t.find(".lava-calendar-menu").hide(),n.stopPropagation()})},select:function(a,e){var t=this,n=$(a),o=n.data("calendar").options;o.date=e,o.currentDate=new Date(e.getFullYear()+"/"+(e.getMonth()+1)+"/1"),t.loadDate(a),n.find(".active").removeClass("active");var l=e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate(),i=n.find("td[data-date='"+l+"']");i.addClass("active")}};$.fn.lavaCalendar=function(a,e){return"string"==typeof a?$.fn.lavaCalendar.methods[a](this,e):void $.each(this,function(){var e={};$(this).data("calendar"),$.extend(e,$.fn.lavaCalendar.defaults),$(this).data("calendar",{options:e}),$.extend($(this).data("calendar").options,a),$.extend($.fn.lavaCalendar.locales,$(this).data("calendar").options.weekMonth),lavaCalendar.init(this),lavaCalendar.bindEvent(this),a.data&&lavaCalendar.loadData(this)})},$.fn.lavaCalendar.defaults={lang:"zh-CN",alarmColor:"#e26a6a",normalColor:"#26c281",warnColor:"#b1b323",currentDate:new Date,weekMonth:{},showOtherDate:!1,onClick:null,onDblclick:null,onMonthChange:null,onLoadDateSuccess:null},$.fn.lavaCalendar.methods={loadData:function(a,e){$(a).data("calendar").options.data=e,lavaCalendar.loadData(a)},getDate:function(a){return $(a).data("calendar").options.currentDate},getSelected:function(a){return $(a).data("calendar").options.date},select:function(a,e){lavaCalendar.select(a,e)},unselect:function(a){var e=$(a);e.data("calendar").options.date=null,e.find(".active").removeClass("active")}},$.fn.lavaCalendar.locales={"zh-CN":["日","一","二","三","四","五","六","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],"zh-TW":["日","一","二","三","四","五","六","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ar:"ح_ن_ث_ر_خ_ج_س".split("_"),bo:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),de:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"en-gb":["Su","Mo","Tu","We","Th","Fr","Sa","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"en-US":["Su","Mo","Tu","We","Th","Fr","Sa","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fr:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),it:"D_L_Ma_Me_G_V_S".split("_"),ja:"日_月_火_水_木_金_土".split("_"),ru:"вс_пн_вт_ср_чт_пт_сб".split("_"),"pt-PT":"7_1_2_3_4_5_6".split("_"),fa:"S_M_T_W_T_F_S".split("_")},!function(a){var e={init:function(e,t){var n=this,o=a(e),l=o.data("combo").options;if(t){var i=a("<span class='lavaui-combo-container'></span>");o.after(i),i.append(o)}else{var i=o.parent();i.children(".lavaui-combo-panel").remove()}var r=a("<div class='lavaui-combo-panel'></div>").appendTo(i),d=l.panelWidth?l.panelWidth:o.innerWidth();r.css({width:d,height:l.panelHeight}),"top"===l.panelLocation&&(r.addClass("top"),r.css({top:-(l.panelHeight+3)})),o.data("combo").panel=r,o.parent().children(".lavaui-combo-triangle")&&o.parent().children(".lavaui-combo-triangle").remove(),l.showArrow&&a("<span class='lavaui-combo-triangle'></span>").appendTo(i).css({top:o.innerHeight()/2-3}),n.initEvent(e),l.editable||o.prop("readonly",!0),l.disabled&&o.prop("disabled",!0)},initEvent:function(e){var t=a(e),n=t.data("combo").options,o=t.data("combo").panel,l=t.siblings(".lavaui-combo-triangle");t.on("click",function(a){n.disabled||t.attr("disabled")||(o.is(":visible")?o.hide():(null==n.panelWidth&&o.css("width",t.innerWidth()),o.show())),a.stopPropagation()}),n.showArrow&&l.on("click",function(a){n.disabled||t.attr("disabled")||(o.is(":visible")?o.hide():(null==n.panelWidth&&o.css("width",t.innerWidth()),o.show())),a.stopPropagation()}),o.on("click",function(a){a.stopPropagation()}),a(document).on("click",function(){o.hide()}),a("body").delegate(".modal-dialog","click",function(){o.hide()})}};a.fn.combo=function(t,n){return"string"==typeof t?a.fn.combo.methods[t](this,n):void a.each(this,function(){var n=!0;a(this).data("combo")&&a(this).data("combo").panel&&(n=!1);var o={};a.extend(o,a.fn.combo.defaults),a.extend(o,t),n?a(this).data("combo",{options:o}):a(this).data("combo").options=o,e.init(this,n)})},a.fn.combo.defaults={panelHeight:150,panelWidth:null,editable:!0,showArrow:!0,disabled:!1,panelLocation:"bottom"},a.fn.combo.methods={options:function(e){return a(e).data("combo").options},panel:function(e){return a(e).data("combo").panel}}}(jQuery,window),!function(a){var e={init:function(e){var t=this,n=a(e),o=n.data("combobox").options;n.combo(o);var l=n.data("combo").panel.addClass("list-group").css({overflow:"auto"});n.data("combobox").panel=l,o.url?t.remoteData(n,o,l):o.data&&t.loadData(n,o,l),t.initEvent(n,o,l)},loadData:function(a,e,t,n){for(var o=e.data,l=[],i=a.val(),r=0;r<o.length;r++)(!n||n(i,o[r]))&&l.push("<a href='javascript:;' class='list-group-item' data-value='"+o[r][e.valueField]+"'>"+o[r][e.textField]+"</a>");t.html(l.join("")),e.onLoadSuccess&&e.onLoadSuccess()},remoteData:function(e,t,n){var o=this;a.ajax({url:t.url,type:t.method,dataType:"json",data:t.formData,success:function(a){t.loadFilter&&(a=t.loadFilter(a)),t.data=a,o.loadData(e,t,n)}})},initEvent:function(e,t,n){var o=this;n.delegate(".list-group-item","click",function(){var l=a(this),i=l.attr("data-value");t.multiple?(l.hasClass("active")?(l.removeClass("active"),o.setValue(e,t,i,!1),t.onUnselect&&t.onUnselect(o.getItemByValue(t.data,i,t.valueField))):(l.addClass("active"),o.setValue(e,t,i,!0),t.onSelect&&t.onSelect(o.getItemByValue(t.data,i,t.valueField))),o.setInputValue(e,t.values,t.textField)):(l.hasClass("active")||(n.find(".active").removeClass("active"),l.addClass("active"),o.setValue(e,t,i),t.onSelect&&t.onSelect(o.getItemByValue(t.data,i,t.valueField))),n.hide())}),"local"==t.mode&&t.filter?e.on("keyup",function(){t.value=null,e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){o.loadData(e,t,n,t.filter)},200)}):"remote"==t.mode&&t.loader&&e.on("keyup",function(){t.values={},e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){t.loader({q:e.val()},function(a){t.data=a,o.loadData(e,t,n)},function(){console.log&&console.log("loader: load err.")})},200)})},setValue:function(a,e,t,n){var o=this,l=(e.data,e.values),i=o.getItemByValue(e.data,t,e.valueField);void 0==n?(e.value=t,a.val(i?i[e.textField]:"")):1==n?l[t]=i?i[e.textField]:"":delete l[t]},getItemByValue:function(a,e,t){for(var n=0;n<a.length;n++)if(a[n][t]==e)return a[n];return null},setInputValue:function(a,e){var t=[];for(var n in e)t.push(e[n]);a.val(t.join(","))},setValues:function(e,t){var n=a(e),o=n.data("combobox").options,l=this;o.values={};for(var i=0;i<t.length;i++){var r=l.getItemByValue(o.data,t[i],o.valueField);o.values[t[i]]=r?r[o.textField]:""}l.setInputValue(n,o.values,o.textField)}};a.fn.combobox=function(t,n){return"string"==typeof t?a.fn.combobox.methods[t](this,n):void a.each(this,function(){var n={};a.extend(n,a.fn.combo.defaults),a.extend(n,a.fn.combobox.defaults),a.extend(n,t),a(this).data("combobox",{options:n}),e.init(this)})},a.fn.combobox.defaults={url:null,method:"get",valueField:"id",textField:"text",multiple:!1,panelHeight:250,value:null,values:{},mode:"local",filter:null,formData:{},onSelect:null,onLoadSucces:null},a.fn.combobox.methods={getValue:function(e){return a(e).data("combobox").options.value},getValues:function(e){var t=a(e).data("combobox").options.values,n=[];for(var o in t)n.push(o);return n},setValue:function(t,n){var o=a(t),l=o.data("combobox").options;e.setValue(o,l,n),o.data("combobox").panel.find(".active").removeClass("active"),o.data("combobox").panel.find('[data-value="'+n+'"]').addClass("active")},setValues:function(t,n){var o=a(t);e.setValues(t,n),o.data("combobox").panel.find(".active").removeClass("active");for(var l in n)o.data("combobox").panel.find('[data-value="'+n[l]+'"]').addClass("active")},reload:function(t,n){var o=a(t);n&&(o.data("combobox").options.url=n),e.remoteData(o,o.data("combobox").options,o.data("combo").panel)}}}(jQuery),!function(a){var e={init:function(e){var t=this,n=a(e),o=n.data("daterange"),l=o.options;n.combo({editable:l.editable,panelWidth:160,panelHeight:"auto",showArrow:!1});var i=n.combo("panel").addClass("daterange-dropdown");if(!l.locales.separator&&l.lang&&(l.locales=a.fn.daterange.lang[l.lang]),l.ranges){var r=[],d=l.ranges;for(var s in d)r.push("<a href='javascript:;' class='btn outline daterange-range' data-start='"+d[s][0]+"' data-end='"+d[s][1]+"'>"+s+"</a>");r.push("<a href='javascript:;' class='btn outline daterange-range custom'>"+l.locales.customRange+"</a>"),r.push("<a href='javascript:;' class='btn success apply'>"+l.locales.apply+"</a>"),r.push("<a href='javascript:;' class='btn outline warning cancel'>"+l.locales.cancel+"</a>");var c=a("<div class='daterange-btn-container'></div>");c.html(r.join("")),i.append(c)}var p=a("<div class='datecontainer'><div class='form-group'></div><div class='form-group'></div></div>").appendTo(i),h=a("<input type='text' class='form-control'>").appendTo(p.children().eq(0)),v=a("<input type='text' class='form-control'>").appendTo(p.children().eq(1));t.initDateBox(n,l,h,v),t.initEvent(n,l,i,h,v)},initDateBox:function(a,e,t,n){t.datetimebox({showTime:e.showTime,format:e.format,panelWidth:220,lang:a.data("daterange").options.lang,onLoadDateSuccess:e.onLoadDateSuccess,onMonthChange:e.onMonthChange}),n.datetimebox({showTime:e.showTime,format:e.format,panelWidth:220,lang:a.data("daterange").options.lang,onLoadDateSuccess:e.onLoadDateSuccess,onMonthChange:e.onMonthChange})},initEvent:function(e,t,n,o,l){var i=this,r=n.find(".datecontainer"),d=n.find(".daterange-range"),s=n.find(".apply"),c=n.find(".cancel");d.on("click",function(){var d=a(this);if(d.hasClass("custom")){r.show(),n.css({width:610});var s=e.val();s&&(o.datetimebox("setValue",s.split(" "+t.locales.separator+" ")[0]),l.datetimebox("setValue",s.split(" "+t.locales.separator+" ")[1]))}else{var c=parseInt(d.attr("data-start")),p=parseInt(d.attr("data-end")),h=new Date((new Date).getTime()+864e5*c),v=new Date((new Date).getTime()+864e5*p),f=i.formatDate(h,t.format.split(" ")[0]),u=i.formatDate(v,t.format.split(" ")[0]);t.showTime&&(f+=" 00:00:00",u+=" 23:59:59");var b=e.val();e.val(f+" "+t.locales.separator+" "+u),t.onChange&&t.onChange(b,f+" "+t.locales.separator+" "+u),t.startDate=h,t.endDate=v,t.type="range",n.hide(),d.hasClass("outline")&&(n.find(".daterange-range").addClass("outline"),d.removeClass("outline")),t.startDate=f,t.endDate=u}}),s.on("click",function(){if(o.is(":visible")){var a=o.val(),i=l.val();if(a>i||!a||!i)return;var r=e.val();e.val(a+" "+t.locales.separator+" "+i),t.onChange&&t.onChange(r,a+" "+t.locales.separator+" "+i),n.find(".daterange-range").addClass("outline"),n.find(".custom").removeClass("outline"),t.startDate=a,t.endDate=i}t.type="custom",n.hide()}),c.on("click",function(){n.hide()}),e.on("click",function(){"custom"!=t.type?(n.css({width:160}),r.hide()):(d.addClass("outline"),n.find(".custom").removeClass("outline").click())})},formatDate:function(a,e){var t=this,n=a.getFullYear(),o=a.getMonth()+1,l=a.getDate();return e.replace("yyyy",n).replace("MM",t.round(o)).replace("dd",t.round(l))},round:function(a){return 10>a?"0"+a:a},setStartTime:function(e,t){var n=a(e),o=n.data("daterange").options;o.startDate=t,o.endDate&&n.val(t+" "+o.locales.separator+" "+o.endDate),o.type="custom"},setEndTime:function(e,t){var n=a(e),o=n.data("daterange").options;o.endDate=t,o.startDate&&n.val(o.startDate+" "+o.locales.separator+" "+t),o.type="custom"},clear:function(e){var t=a(e),n=t.data("daterange").options;n.startDate="",n.endDate="",t.val("")}};a.fn.daterange=function(t,n){return"string"==typeof t?a.fn.daterange.methods[t](this,n):void a.each(this,function(){var n={};a.extend(n,a.fn.combo.defaults),a.extend(n,a.fn.lavaCalendar.defaults),a.extend(n,a.fn.datetimebox.defaults),a.extend(n,a.fn.daterange.defaults),n.showTime&&a.extend(n,a.fn.timespinner.defaults),a.extend(n,t),a(this).data("daterange",{options:n}),a.extend(a.fn.lavaCalendar.locales,a(this).data("daterange").options.weekMonth),e.init(this)})},a.fn.daterange.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,panelHeight:"auto",editable:!0,startDate:"",endDate:"",weekMonth:{},locales:{},lang:"en-US",onLoadDateSuccess:null,onChange:null},a.fn.daterange.methods={setStartTime:function(a,t){e.setStartTime(a,t)},setEndTime:function(a,t){e.setEndTime(a,t)},getStartTime:function(e){return a(e).data("daterange").options.startDate},getEndTime:function(e){return a(e).data("daterange").options.endDate},clear:function(a){e.clear(a)}},a.fn.daterange.lang={"en-US":{separator:"to",apply:"apply",cancel:"cancel",customRange:"custom range"},"zh-CN":{separator:"至",apply:"应用",cancel:"取消",customRange:"自定义范围"},"zh-TW":{separator:"至",apply:"應用",cancel:"取消",customRange:"自定義範圍"},"pt-PT":{separator:"para",apply:"Aplicação",cancel:"Cancelar",customRange:"Escala personalizada"},af:{separator:"tot",apply:"toepassing",cancel:"Canceled",customRange:"Aangepast bereik"},fr:{separator:"à",apply:"appliquer",cancel:"annulé",customRange:"Gamme personnalisée"},jp:{separator:"に",apply:"適用する",cancel:"キャンセル",customRange:"カスタムレンジ"},ar:{separator:"إلى",apply:"تطبق",cancel:"إلغاء",customRange:"نطاق مخصص"}}}(jQuery),!function(a){var e={init:function(a){var e=this;e.initDom(a)},initDom:function(e){var t=this,n=a(e),o=n.data("datetimebox").options;n.combo(o);var l=n.combo("panel"),i=a("<div class='datetimebox-container'></div>").appendTo(l),r={showOtherDate:!0,onClick:function(){var a=n.val();t.formatDate(n,i,n.data("datetimebox").timespinner,o),o.onChange&&o.onChange(a,n.val())},lang:o.lang?o.lang:"zh-CN",onLoadDateSuccess:o.onLoadDateSuccess,onMonthChange:o.onMonthChange};if(i.lavaCalendar(r),n.data("datetimebox").calendar=i,o.showTime){var d=a("<div class='form-group' style='margin:5px;'></div>").appendTo(l),s=a("<input type='text' class='form-control' />").appendTo(d),c={showSeconds:/ss/.test(o.format),onChange:function(){var a=n.val();t.formatDate(n,i,s,o),o.onChange&&o.onChange(a,n.val())}};s.timespinner(c),n.data("datetimebox").timespinner=s}o.showIcon&&n.after("<span class='datetimebox-icon'></span>"),t.initEvent(n,i,n.data("datetimebox").timespinner,o)},initEvent:function(a,e,t,n){var o=this;a.on("blur",function(){var l=a.val();if(""!=l){t&&l.split("")[1]&&t.timespinner("setValue",l.split(" ")[1]);var i=l.split(" ")[0].replace(/-/g,"/");if(isNaN(new Date(i).getFullYear()))var r=new Date;else var r=new Date(i);e.lavaCalendar("select",r),o.formatDate(a,e,t,n)}}),n.showIcon&&a.next(".datetimebox-icon").on("click",function(e){a.click(),e.stopPropagation()})},formatDate:function(a,e,t,n){var o=this,l=e.lavaCalendar("getSelected");l||(l=new Date,e.lavaCalendar("select",l));var i=l.getFullYear(),r=o.round(l.getMonth()+1),d=o.round(l.getDate()),s=n.format.split(" ")[0].replace("yyyy",i).replace("MM",r).replace("dd",d);if(t&&!t.val()){var c=new Date,p=n.format.split(" ")[1].replace("hh",o.round(c.getHours())).replace("mm",o.round(c.getMinutes())).replace("ss",o.round(c.getSeconds()));t.val(p)}s=t?s+" "+t.val():s,a.val(s)},round:function(a){return 10>a?"0"+a:a},setValue:function(e,t){var n=this,o=a(e),l=o.data("datetimebox"),i=l.calendar,r=l.timespinner,d=l.options;return""==t?(i.lavaCalendar("unselect"),r&&r.val(""),void o.val("")):(r&&t.split("")[1]&&r.timespinner("setValue",t.split(" ")[1]),i.lavaCalendar("select",new Date(t.split(" ")[0].replace(/-/g,"/"))),void n.formatDate(o,i,r,d))}};a.fn.datetimebox=function(t,n){return"string"==typeof t?a.fn.datetimebox.methods[t](this,n):void a.each(this,function(){var n={};a.extend(n,a.fn.combo.defaults),a.extend(n,a.fn.lavaCalendar.defaults),a.extend(n,a.fn.datetimebox.defaults),n.showTime&&a.extend(n,a.fn.timespinner.defaults),a.extend(n,t),a(this).data("datetimebox",{options:n}),a.extend(a.fn.lavaCalendar.locales,a(this).data("datetimebox").options.weekMonth),e.init(this)})},a.fn.datetimebox.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,showIcon:!1,panelWidth:250,panelHeight:"auto",showArrow:!1,onLoadDateSuccess:null,onMonthChange:null,onChange:null,weekMonth:{}},a.fn.datetimebox.methods={setValue:function(a,t){e.setValue(a,t)}}}(jQuery);var lavaMsg={alert:function(a,e,t){var n=("lavaMsg_alert_"+(new Date).getTime(),"");"success"==e?n="fa-check":"warning"==e?n="fa-warning":"info"==e?n="fa-info-circle":"danger"==e&&(n="fa-close");var o=$("<div style='position:fixed;top:0;left:10%;width:80%;z-index:20000;'></div>").appendTo("body"),l=$("<div class='modal-dialog modal-lg alert "+e+" fade in' style='margin:auto;'><i class='fa fa-lg "+n+"'></i> "+a+"</div>").appendTo(o);$("<span class='close'></span>").appendTo(l),setTimeout(function(){o.fadeOut(1e3,function(){o.remove()})},t?t:3e3)},loading:function(a){var e=$(".lava-msg-loading");if($(".lava-msg-style"),a&&0==e.length){var t=$("<div class='lava-msg-loading' style='position:fixed;top:0;left:0;z-index:2021;width:100%;height:100%;background:rgba(0,0,0,0.25);'></div>").appendTo("body"),n=$("<div class='progress progress-striped active' style='width:20%;margin:22% 40%;'></div>").appendTo(t);$("<div class='progress-bar success' style='width:100%;'></div>").appendTo(n),t.click(function(){lavaMsg.loading(!1)})}else!a&&e.length>0&&e.fadeOut(500,function(){e.remove()})},singleConfirm:function(a,e,t,n,o){var l=$(a),i=l.offset().top<90?"bottom":"top";l.addClass("lava-msg-singleconfirm"),$(".lava-popover").fadeOut(300,function(){$(this).remove()});var r=$("<div class='popover lava-popover "+i+" in'><div class='arrow' style='left:50%;'></div></div>").appendTo("body").show(),d=($("<h3 class='popover-title' style='margin: 0;'>"+(e?e:"Are you sure ?")+"</h3>").appendTo(r),$("<div class='popover-content' style='text-align:center;'></div>").appendTo(r)),s=$("<button type='button' class='btn success'><i class='fa fa-check'></i> "+(t?t:"Yes")+"</button>").appendTo(d),c=l.offset().left+l.innerWidth()/2-r.innerWidth()/2-1,p=l.offset().top-r.innerHeight()-12;c=0>c?0:c,r.css({left:c,top:p}),s.click(function(a){o&&o(!0),r.remove(),a.stopPropagation()})},confirm:function(a,e,t,n){var o=$("<div class='modal fade in lava-msg-confirm'></div>").appendTo("body"),l=$("<div class='modal-dialog modal-md'></div>").appendTo(o),i=$("<div class='modal-content'></div>").appendTo(l),r=$("<div class='modal-header'><h4 class='modal-title' style='margin:0;'>"+a+"</h4></div>").appendTo(i),d=$("<span class='close' data-dismiss='modal' aria-hidden='true'></span>").prependTo(r),s=($("<div class='modal-body'>"+e+"</div>").appendTo(i),$("<div class='modal-footer'></div>").appendTo(i)),c=$("<button type='button' class='btn green'><i class='fa fa-check'></i> "+t+"</button>").appendTo(s);o.modal("show"),c.click(function(){n&&n(!0),o.modal("hide")}),l.click(function(a){a.stopPropagation()}),d.click(function(){o.modal("hide")})},bindEvent:function(){$("body").delegate(".popover-title,.popover-content,.lava-msg-singleconfirm","click",function(a){a.stopPropagation()}),$(document).on("click",function(){$(this).hasClass("popover-title")||$(this).hasClass("popover-content")||$(this).hasClass("lava-msg-singleconfirm")||$(".lava-popover").fadeOut(300,function(){$(this).remove()})})}};$(function(){lavaMsg.bindEvent()});var osdbox={init:function(a){var e=$(a),t=e.data("osdbox").options;e.hasClass("osdbox")?e.html(""):e.addClass("osdbox");var n=$("<div class='osd-container'></div>").appendTo(e);t.container=n,n.css({width:t.width,height:t.height,position:"relative"}),n.css(t.backgroundImg?{"background-image":url(t.backgroundImg)}:{"background-color":t.backgroundColor}),osdbox.loadData(e,t.data),osdbox.bindEvent(e)},isIE:function(){return navigator.userAgent.toUpperCase().indexOf("TRIEDENT")>=0?!0:!1},loadData:function(a,e){var t=a.data("osdbox").options;t.data=e;var n=t.borderColor,o=t.container,l=t.resolutionRatio.split("*")[0],i=t.resolutionRatio.split("*")[1],r=t.width,d=t.height;o.html("");for(var s="<div class='osd-item' data-index = {index} style='position:absolute;left:{x};top:{y};border:1px solid {borderColor};width:{width};height:{height}'><span>{text}</span></div>",c=[],p=0;p<e.length;p++){var h=parseInt(e[p].x*r/l);e[p].x_real=h;var v=parseInt(e[p].y*d/i);e[p].y_real=v;var f=e[p].text,u=s.replace("{index}",p).replace("{borderColor}",n).replace("{x}",h+"px").replace("{y}",v+"px").replace("{text}",f);u=e[p].width?u.replace("{width}",e[p].width):u.replace("{width}","auto"),u=e[p].height?u.replace("{height}",e[p].height):u.replace("{height}","auto"),c.push(u)}o.html(c.join("")),o.find(".osd-item").each(function(a,e){osdbox.isIE?$(e).css("width",$(e).children().width()+2):$(e).css("width",$(e).children().width()),$(e).offset().left+$(e).width()>=o.offset().left+t.width&&$(e).offset({left:o.offset().left+t.width-$(e).width()-2}),osdbox.isIE?$(e).css("height",$(e).children().height()+2):$(e).css("height",$(e).children().height()),$(e).offset().top+$(e).height()>=o.offset().top+t.height&&$(e).offset({top:o.offset().top+t.height-$(e).height()-2})})},getData:function(a){for(var e=$(a),t=e.data("osdbox").options,n=t.data,o=t.resolutionRatio,l=t.container,i=o.split("*")[0],r=o.split("*")[1],d=l.width(),s=l.height(),c=0;c<n.length;c++){var p=n[c].x_real,h=n[c].y_real;n[c].x=parseInt(i*p/d),n[c].y=parseInt(r*h/s)}return n},bindEvent:function(a){var e,t,n,o,l,i=a.data("osdbox").options,r=i.container,d=!1;r.delegate(".osd-item","mousedown",function(a){var i=$(a.target);i.hasClass("osd-item")||(i=i.parent()),l=i,e=parseInt(i.css("left")),t=parseInt(i.css("top")),n=a.clientX,o=a.clientY,d=!0}).on("mousemove mouseup",function(r){var s=l;i=a.data("osdbox").options;var c=i.data;if(d){clientX=r.clientX,clientY=r.clientY;var p=clientX-n,h=clientY-o;n=clientX,o=clientY,e+=p,1>=e&&(e=1),e>=s.parent().width()-s.width()-3&&(e=s.parent().width()-s.width()-3),t+=h,1>=t&&(t=1),t>=s.parent().height()-s.height()-3&&(t=s.parent().height()-s.height()-3),s.css("left",e+"px"),s.css("top",t+"px"),c[s.attr("data-index")].x_real=e,c[s.attr("data-index")].y_real=t}"mouseup"===r.type&&(e=0,t=0,n=0,o=0,d=!1)}),$("body").on("mouseup",function(){e=0,t=0,n=0,o=0,d=!1})}};$.fn.osdbox=function(a,e){return"string"==typeof a?$.fn.osdbox.methods[a](this,e):void $.each(this,function(){var e={};$.extend(e,$.fn.osdbox.default),$.extend(e,a),$(this).data("osdbox",{options:e}),osdbox.init(this)})},$.fn.osdbox.default={width:100,height:100,backgroundColor:"#27313a",backgroundImg:"",borderColor:"#f00",data:[],resolutionRatio:"1024*768"},$.fn.osdbox.methods={getData:function(a){var e=osdbox.getData(a);return e||[]},setData:function(a,e){var t=$(a);osdbox.loadData(t,e)}};var planBox={init:function(a){var e=$(a);e.hasClass("plan-box")?e.html(""):e.addClass("plan-box");var t=e.data("planBox").options,n=$("<div class='plan-box-container' style='width:"+t.width+"px;height:"+t.height+"px;'></div>").appendTo(e);t.container=n;var o=t.color,l="<style>";for(var i in o)l+=" .plan-box-item."+i+"{",l+=t.isFill?"background-color:"+o[i]+";}":"border: 2px solid "+o[i]+";}";l+="</style>",$(l).appendTo("body"),planBox.drawRect(a,t.data),planBox.bindEvent(a)},drawRect:function(a,e){var t=$(a),n=t.data("planBox").options,o=n.container;o.html(""),n.data=e;var l=n.width,i=n.height,r=e.length,d=e[0].length,s=n.rowBlank,c=n.colBlank,p="<span class='{class}' style='width:{width}px;height:{height}px;line-height:{height}px;top:{top};left:{left};' data-left='{left}' data-top='{top}' data-type='{type}' data-row='{row}' data-col='{col}'>{text}</span>";n.colNumber&&(r+=1);var h=Math.floor((l-(d-1)*s)/d),v=Math.floor((i-(r-1)*c)/r);p=p.replace("{width}",h).replace(/{height}/g,v);var f=[];if(n.colNumber)for(var u=0;d>u;u++){var b=p.replace(/{top}/g,"0px").replace(/{left}/g,(h+s-1)*u+"px").replace("{type}","").replace("{row}","").replace("{col}","");b=b.replace("{class}","plan-box-header-item").replace("{text}",u),f.push(b)}for(var u=0;u<e.length;u++){var r=e[u];if(n.colNumber)var m=u+1;else var m=u;for(var g=0;g<r.length;g++){var b=p.replace(/{top}/g,(v+c-1)*m+"px").replace(/{left}/g,(h+s-1)*g+"px").replace("{type}",r[g]).replace("{row}",u).replace("{col}",g);b=0==r[g]?b.replace("{class}","plan-box-item normal"):1==r[g]?b.replace("{class}","plan-box-item selected"):b.replace("{class}","plan-box-item alarm"),b=b.replace("{text}",""),f.push(b)}}o.html(f.join(""))},bindEvent:function(a){var e,t=$(a),n=t.data("planBox").options,o=n.container,l=!1,i=0,r=0,d=0,s=0,c=0,p=0,h=0,v=0,f=0,u=0;o.delegate(".plan-box-item","mousedown mousemove mouseup dragstart",function(a){var t=$(a.target);if("mousedown"==a.type)c=a.clientX,p=a.clientY,h=t.offset().left,v=t.offset().top,l=!0,e=parseInt(t.attr("data-type")),i=parseInt(t.attr("data-left")),r=parseInt(t.attr("data-top"));
else if("dragstart"==a.type)a.preventDefault();else if("mousemove"==a.type){if(l){o.find(".plan-box-rect").remove(),f=a.clientX,u=a.clientY;var b=f-c,m=u-p,g='<div class="plan-box-rect" style="position:absolute;height:'+m+"px;width:"+b+"px;left:"+(i+2)+"px;top:"+(r+2)+'px;"></div>';$(g).appendTo(o)}}else if(l){l=!1,o.find(".plan-box-rect").remove(),d=parseInt(t.attr("data-left")),s=parseInt(t.attr("data-top"));var y=n.data,x=e;if(i==d&&r==s)x+=1,n.color.alarm?3==x&&(x=0):2==x&&(x=0),0==x?t.attr("class","plan-box-item normal"):1==x?t.attr("class","plan-box-item selected"):t.attr("class","plan-box-item alarm"),t.attr("data-type",x),y[t.attr("data-row")][t.attr("data-col")]=x;else{if(i>d){var w=i;i=d,d=w}if(r>s){var w=r;r=s,s=w}o.find(".plan-box-item").each(function(a,e){var t=$(e),n=parseInt(t.attr("data-left")),o=parseInt(t.attr("data-top"));n>=i&&o>=r&&d>=n&&s>=o&&(0==x?t.attr("class","plan-box-item normal"):1==x?t.attr("class","plan-box-item selected"):t.attr("class","plan-box-item alarm"),t.attr("data-type",x),y[t.attr("data-row")][t.attr("data-col")]=x)})}i=0,r=0,h=0,v=0,d=0,s=0,c=0,p=0}})}};$.fn.planbox=function(a,e){return"string"==typeof a?$.fn.planbox.methods[a](this,e):void $.each(this,function(){var e={};$.extend(e,$.fn.planbox.defaults),$.extend(e,a),$(this).data("planBox",{options:e}),planBox.init(this)})},$.fn.planbox.defaults={width:120,height:120,data:[],isFill:!0,color:{normal:"#efefef",selected:"#0f0",alarm:"#f00"},rowBlank:2,colBlank:3,colNumber:!0},$.fn.planbox.methods={getData:function(a){return $(a).data("planBox").options.data},setData:function(a,e){planBox.drawRect(a,e)}};var lavaPlayBar={init:function(a){var e=this,t=$(a),n=t.data("playbar").options;t.addClass("lava-playbar");var o=$("<div class='lava-playbar-head' style='background:"+n.headerBgColor+";border-bottom:1px solid "+n.headerColor+";'></div>").appendTo(t),l=$("<div class='lava-playbar-btns'></div>").appendTo(o),i=($("<canvas class='lava-playbar-zoomout' width='50' height='40'></canvas>").appendTo(l),$("<canvas class='lava-playbar-zoomin' width='50' height='40'></canvas>").appendTo(l),$("<div class='lava-playbar-time'></div>").appendTo(o)),r=$("<div class='lava-playbar-timewrapper'></div>").appendTo(i),d=$("<canvas width='1000' height='40'></canvas>").appendTo(r);t.data("playbar").timeCanvas=d;var s=$("<div class='lava-playbar-body' style='background:"+n.bgColor+";'></div>").appendTo(t),c=$("<div class='lava-playbar-channelwrapper' stylel='background:"+n.channelWrapperBgColor+";'></div>").appendTo(s),p=$("<div class='lava-playbar-datawrapper'></div>").appendTo(s),h=$("<div class='lava-playbar-channels'><div>").appendTo(c),v=$("<div class='lava-playbar-linenames' style='background:"+n.channelBgColor+";'></div>").appendTo(c);t.data("playbar").lineNames=v;var f=$("<div class='lava-playbar-lines'></div>").appendTo(p),u=$("<canvas></canvas>").appendTo(f);t.data("playbar").lineCanvas=u;var b=$("<div class='lava-playbar-data'></div>").appendTo(p),m=$("<canvas></canvas>").appendTo(b),g=$("<div class='lava-playbar-rightrollbar' style='background:"+n.rollbarWrapperColor+";'><div>").appendTo(s);$("<div class='lava-playbar-up'></div>").appendTo(g),$("<div class='lava-playbar-down'></div>").appendTo(g),$("<div class='lava-playbar-rightbar' style='background:"+n.rollbarColor+";'></div>").appendTo(g),m[0].width=i.width(),t.data("playbar").dataCanvas=m;var y=$("<div class='lava-playbar-bottomrollbar' style='background:"+n.rollbarWrapperColor+";'></div>").appendTo(t),x=($("<div class='lava-playbar-bottomprev'></div>").appendTo(y),$("<div class='lava-playbar-bottomnext'></div>").appendTo(y),$("<div class='lava-playbar-bottombar' style='background:"+n.rollbarColor+";'></div>").appendTo(y),"<style>.lava-playbar-up:before {border-color:transparent transparent "+n.rollbarAngleColor+" transparent;}\n.lava-playbar-down:before {border-color:"+n.rollbarAngleColor+" transparent transparent transparent;}\n.lava-playbar-bottomprev:before {border-color:transparent "+n.rollbarAngleColor+" transparent transparent;}\n.lava-playbar-bottomnext:before {border-color:transparent transparent transparent "+n.rollbarAngleColor+";}\n.lava-playbar-bottombar:hover,.lava-playbar-rightbar:hover {background:"+n.rollbarHoverColor+" !important;}\n</style>"),w=$(x).appendTo(t);t.data("playbar").style=w;var T=$("<div class='lava-playbar-line'></div>").appendTo(t);t.data("playbar").line=T;var C=$("<div class='lava-playbar-timelabel'></div>").appendTo(t),k=$("<canvas class='lava-playbar-timelabelcanvas' width='50' height='13' style='position:absolute;z-index:1;'></canvas>").appendTo(C);t.data("playbar").timeLabel=C,t.data("playbar").timeLabelCanvas=k;var D=$("<div class='lava-playbar-point'></div>").appendTo(t),I=$("<canvas width='150' height='95' class='lava-playbar-pointcanvas'></canvas>").appendTo(D);t.data("playbar").point=D,t.data("playbar").pointCanvas=I;for(var z=0;4>z;z++)h.append("<div class='lava-playbar-channel' style='background:"+n.channelBgColor+";color:"+n.channelColor+";'></div>");e.drawZoomBtn(a,"zoomout","mouseout"),e.drawZoomBtn(a,"zoomin","mouseout"),e.loadTimeLabel(a)},drawZoomBtn:function(a,e,t){var n=$(a),o=n.data("playbar").options,l=n.find(".lava-playbar-"+e)[0].getContext("2d");l.clearRect(0,0,50,40);var i="mouseout"==t?o.btnColor:"#fff";"mouseover"==t?(l.fillStyle=o.btnColor,l.fillRect(8,8,34,24)):(l.strokeStyle=o.btnColor,l.lineWidth=1,l.strokeRect(8.5,8.5,34,24)),l.strokeStyle=i,l.lineWidth=1.2,l.beginPath(),l.arc(19,19,7,0,2*Math.PI),l.stroke(),l.fillStyle=i,l.fillRect(15,19,8,1),"zoomout"==e&&l.fillRect(19,15,1,8),l.beginPath(),l.moveTo(24,23),l.lineTo(34,30),l.lineWidth=3,l.stroke()},loadData:function(a,e){var t=this,n=$(a),o=n.data("playbar").options,l=n.find(".lava-playbar-data"),i=n.find(".lava-playbar-linenames"),r=n.find(".lava-playbar-lines"),d=n.data("playbar").point;"channel"==o.type?o.data=e:o.lineData=e;var s=n.find(".lava-playbar-rightbar"),c=n.find(".lava-playbar-data"),p=n.find(".lava-playbar-channels");c.css({top:0}),s.css({top:15}).hide(),p.css({top:0}),"channel"==o.type?(e.length>4&&(s.css({height:4/e.length*65}).show(),setTimeout(function(){s.hide(),setTimeout(function(){s.show()},100)},100)),p.show(),l.show(),i.hide(),r.hide(),d.hide(),t.loadChannelNum(a),t.loadChannelData(a)):"line"==o.type&&(p.hide(),l.hide(),i.show(),r.show(),d.show(),t.loadLineType(a),t.loadLineData(a))},changeType:function(a,e){var t=this,n=$(a),o=n.find(".lava-playbar-channels"),l=n.find(".lava-playbar-data"),i=n.find(".lava-playbar-linenames"),r=n.find(".lava-playbar-lines"),d=n.data("playbar").point,s=n.data("playbar").options;if(e!=s.type)if("channel"==e)o.show(),l.show(),i.hide(),r.hide(),d.hide(),s.type=e,s.data&&(t.loadChannelNum(a),t.loadChannelData(a));else if("line"==e&&(i.show(),r.show(),o.hide(),l.hide(),n.find(".lava-playbar-rightbar").hide(),s.type=e,s.lineData)){t.loadLineType(a),t.loadLineData(a);var c=(s.currentTime-s.startTime)/864e5*s.zoomLevel*s.timeWidth+100;t.loadTimeLabel(a,c)}},loadLineType:function(a){var e=$(a),t=e.find(".lava-playbar-linenames"),n=e.find(".lava-playbar-data"),o=e.data("playbar").options,l=o.lineData;t.empty(),n.css({top:0});for(var i=0;i<l.length;i++)t.append("<div class='lava-playbar-linename' style='color:"+l[i].color+"'>"+l[i].name+"</div>")},loadLineData:function(a){var e=$(a),t=e.data("playbar").options,n=e.find(".lava-playbar-linenames"),o=n.children(),l=(e.find(".lava-playbar-lines"),e.data("playbar").lineCanvas[0]);l.width=t.timeWidth;var i=l.getContext("2d");i.lineWidth=1.5;for(var r=t.lineData,d=0;d<r.length;d++){for(var s=!1,c=0;c<o.length;c++)if(o.eq(c).text()==r[d].name&&o.eq(c).hasClass("lava-playbar-linename-disable")){s=!0;break}if(!s){var p=r[d].data;i.strokeStyle=r[d].color?r[d].color:"#fff",i.lineJoin="round";for(var h=t.startTime+864e5/t.zoomLevel,v=!1,f=864e5/t.zoomLevel,c=(Math.ceil(1*p.length/t.timeWidth/t.zoomLevel),0);c<p.length;c++){var u=p[c].time;if(0==c&&u>=t.startTime||u<=t.startTime&&p[c+1]&&p[c+1].time>t.startTime?(i.beginPath(),t.time=u,i.moveTo((u-t.startTime)/f*t.timeWidth,95-95*(p[c].value/120)),v=!0):(u>=t.startTime&&h>=u||u>h&&p[c-1]&&p[c-1].time<h)&&i.lineTo(parseInt((u-t.startTime)/f*t.timeWidth)+.5,95-95*(p[c].value/120)),v&&(u>=h&&p[c-1]&&p[c-1].time<h||c==p.length-1)){i.stroke();break}}}}},loadChannelNum:function(a){var e=$(a),t=e.data("playbar").options,n=t.data,o=e.find(".lava-playbar-channels");o.empty();for(var l=0;l<n.length;l++)o.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'>"+n[l].name+"</div>");if(n.length<4)for(var l=0;l<4-n.length;l++)o.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'></div>")},loadChannelData:function(a){var e=$(a),t=e.data("playbar").options,n=t.data,o=t.timeWidth,l=t.startTime+864e5/t.zoomLevel,i=e.data("playbar").dataCanvas[0],r=i.getContext("2d");if(n){i.height=24*n.length;for(var d=0;d<n.length;d++){var s=n[d].channel;r.clearRect(0,24*d+4,o,14);for(var c=0;c<s.length;c++)if(r.fillStyle="normal"==s[c].type?t.normalColor:t.alarmColor,s[c].startTime<=t.startTime&&s[c].endTime>t.startTime&&s[c].endTime<=l)r.fillRect(0,24*d+6,(s[c].endTime-t.startTime)/864e5*t.zoomLevel*o,12);else if(s[c].startTime>=t.startTime&&s[c].endTime<=l)r.fillRect((s[c].startTime-t.startTime)/864e5*t.zoomLevel*o,24*d+6,(s[c].endTime-s[c].startTime)/864e5*t.zoomLevel*o,12);else if(s[c].startTime>=t.startTime&&s[c].endTime>l)r.fillRect((s[c].startTime-t.startTime)/864e5*t.zoomLevel*o,24*d+6,(l-t.startTime)/864e5*t.zoomLevel*o,12);else if(s[c].startTime<t.startTime&&s[c].endTime>l)r.fillRect(0,24*d+6,o,12);else if(s[c].endTime<t.startTime&&s[c].startTime>l)break;r.fillStyle=t.channelSplitColor,r.fillRect(0,24*d+24,o,1)}}},drawTime:function(a){var e=this,t=a.data("playbar").options,n=a.find(".lava-playbar-time"),o=a.find(".lava-playbar-timewrapper"),l=a.find(".lava-playbar-bottombar"),i=o.children("canvas")[0],i=a.data("playbar").timeCanvas[0],r=n.width();t.timeWidth=r,o.css({width:r}),i.width=r,r*=t.zoomLevel;var d=0,s=0,c=i.getContext("2d");r-=1,1==t.zoomLevel?l.hide():l.show(),1==t.zoomLevel?(s=24,d=r/24):/^(2|4)$/.test(t.zoomLevel)?(s=144,d=r/144):8==t.zoomLevel?(s=720,d=r/720):24==t.zoomLevel?(s=1440,d=r/1440):48==t.zoomLevel?(s=2880,d=r/2880):144==t.zoomLevel?(s=8640,d=r/8640):288==t.zoomLevel?(s=8640,d=r/8640):1440==t.zoomLevel&&(s=43200,d=r/s),c.fillStyle=t.headerColor;var p=d-parseInt(t.startTime)%parseInt(864e5/s)/parseInt(864e5/s)*d;p=p==d?0:p;var h=parseInt(864e5/s)-parseInt(t.startTime)%parseInt(864e5/s);h=h==864e5/s?0:h;for(var v=0;90>=v;v++){var f=parseInt(p+v*d);if(c.fillRect(f,30,1,10),1==t.zoomLevel&&v%2==0&&v>0)c.fillText(e.round(v)+":00",24==v?f-28:f-14,28);else if(2==t.zoomLevel&&parseInt((10*v*60*1e3+t.startTime+h)/6e5)%6==0){var u=e.getTime(10*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(4==t.zoomLevel&&parseInt((10*v*60*1e3+t.startTime+h)/6e5)%6==0){var u=e.getTime(10*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(8==t.zoomLevel&&parseInt((2*v*60*1e3+t.startTime+h)/12e4)%10==0){var u=e.getTime(2*v*60*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(24==t.zoomLevel&&parseInt((60*v*1e3+t.startTime+h)/6e4)%6==0){var u=e.getTime(60*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(48==t.zoomLevel&&parseInt((30*v*1e3+t.startTime+h)/3e4)%6==0){var u=e.getTime(30*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(144==t.zoomLevel&&parseInt((10*v*1e3+t.startTime+h)/1e4)%6==0){var u=e.getTime(10*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(288==t.zoomLevel&&parseInt((10*v*1e3+t.startTime+h)/1e4)%6==0){var u=e.getTime(10*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else if(1440==t.zoomLevel)if(parseInt((2*v*1e3+t.startTime+h)/2e3)%30==0){var u=e.getTime(2*v*1e3+t.startTime+h);c.fillText(u,"24:00"==u?f-28:f-14,28)}else c.fillText(e.getSeconds(2*v*1e3+t.startTime+h),f,30)}e.drawBottomRollBar(a[0])},loadTimeLabel:function(a,e,t){var n=this,o=$(a),l=o.data("playbar").options,i=o.data("playbar").line,r=o.data("playbar").timeLabel,d=o.data("playbar").timeLabelCanvas[0],s=d.getContext("2d"),c=o.data("playbar").point,p=o.data("playbar").pointCanvas[0],h=p.getContext("2d"),v=o.data("playbar").lineNames.children();if(s.clearRect(0,0,50,14),s.fillStyle="#555",h.clearRect(0,0,150,95),e){if(t||(i.show(),r.show(),"line"==l.type&&c.show()),100>e?(e=100,t&&(i.hide(),r.hide(),"line"==l.type&&c.hide())):e>99+l.timeWidth?(e=99+l.timeWidth,t&&(i.hide(),r.hide(),"line"==l.type&&c.hide())):t&&(i.show(),r.show(),"line"==l.type&&c.show()),r.css(125>e?{left:100}:e>l.timeWidth+75?{left:l.timeWidth+50}:{left:e-25}),"line"==l.type&&l.lineData&&l.currentTime>=l.startTime&&l.currentTime<=l.startTime+864e5/l.zoomLevel){for(var f=20,u=0;u<l.lineData.length;u++){for(var b=!1,m=0;m<v.length;m++)if(v.eq(m).text()==l.lineData[u].name&&v.eq(m).hasClass("lava-playbar-linename-disable")){b=!0;break}if(!b){var g=l.lineData[u].data,y=null,x=0;if(!(0==g.length||l.currentTime<g[0].time||l.currentTime>g[g.length-1].time)){var w=n.quickSearch(g,l.currentTime);if(y=w.y,x=w.value,y){if(e>l.timeWidth-40){var T=h.createRadialGradient(140,y,2,140,y,12);T.addColorStop(0,l.lineData[u].color),T.addColorStop(1,"rgba(0,0,0,0)"),h.fillStyle=T,h.fillRect(130,y-10,20,20),h.fillStyle="rgba(0,0,0,0.53)",h.fillRect(0,f-12,130,16),h.fillStyle="#fff",h.font="11px arial",h.fillText(l.lineData[u].name+": "+x+l.lineData[u].unit,4,f)}else{var T=h.createRadialGradient(10,y,2,10,y,10);T.addColorStop(0,l.lineData[u].color),T.addColorStop(1,"rgba(85,85,85,0)"),h.fillStyle=T,h.fillRect(0,y-10,20,20),h.fillStyle="rgba(0,0,0,0.53)",h.fillRect(20,f-12,130,16),h.fillStyle="#fff",h.font="11px arial",h.fillText(l.lineData[u].name+": "+x+l.lineData[u].unit,24,f)}f+=16}}}}c.css(e>l.timeWidth-40?{left:e-140}:{left:e-10})}s.fillText(n.getTime(l.currentTime,!0),2,9),i.css({left:e})}else s.fillText("00:00:00",2,9)},quickSearch:function(a,e){var t=this;if(0==a.length)return{y:null,value:0};if(a.length%2==0)var n=a.length/2-1;else if(a.length%2==1)var n=(a.length-1)/2;return a[n].time==e?{y:95-95*(a[n].value/120),value:a[n].value}:a[n].time<e&&a[n+1]&&a[n+1].time>e?{y:95-95*(a[n].value/120),value:a[n].value}:a[n].time<e&&a[n+1]&&a[n+1].time<=e?t.quickSearch(a.slice(n+1),e):a[n].time>e?t.quickSearch(a.slice(0,n+1),e):void 0},drawBottomRollBar:function(a){var e=$(a),t=e.data("playbar").options,n=(e.find(".lava-playbar-time"),e.find(".lava-playbar-bottombar")),o=(e.width()-30)/t.zoomLevel;t.barWidth=50>o?50:o;var l=(e.width()-t.barWidth-30)*t.startTime/(864e5*(1-1/t.zoomLevel))+15;n.css({width:t.barWidth,left:l})},dragBottomRollBar:function(a,e){var t=this,n=$(a),o=n.find(".lava-playbar-bottomprev"),l=n.find(".lava-playbar-bottomrollbar"),i=n.find(".lava-playbar-bottombar"),r=(n.find(".lava-playbar-timewrapper"),n.data("playbar").options),d=e.clientX-r.lengthX-o.offset().left;15>d&&(d=15),d>l.width()-15-r.barWidth&&(d=l.width()-15-r.barWidth),i.css({left:d});var s=l.width()-30-r.barWidth;r.startTime=parseInt((d-15)/s*(864e5-864e5/r.zoomLevel)),t.drawTime(n),"channel"==r.type?t.loadChannelData(a):"line"==r.type&&t.loadLineData(a)},play:function(a,e){var t=this,n=$(a),o=n.data("playbar").options;o.currentTime=e,e<o.startTime&&(o.startTime=e,"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a),t.drawTime(n)),e-o.startTime>864e5/o.zoomLevel&&(o.startTime=e-864e5/o.zoomLevel,"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a),t.drawTime(n));var l=(e-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,l)},getTime:function(a,e){var t=this;return e?t.round(parseInt(a/36e5))+":"+t.round(parseInt(a%36e5/6e4))+":"+t.round(parseInt(a%6e4/1e3)):t.round(parseInt(a/36e5))+":"+t.round(parseInt(a%36e5/6e4))},getSeconds:function(a){var e=this,t=new Date(a);return e.round(t.getSeconds())},round:function(a){return 10>a?"0"+a:a},zoomOutOrIn:function(a,e){var t=this,n=$(a),o=n.data("playbar").options;if(o.zoomLevel,"zoomout"==e){if(1440==o.zoomLevel)return;288==o.zoomLevel?(o.zoomLevel*=5,o.startTime+=.8*(o.currentTime-o.startTime)):48==o.zoomLevel||8==o.zoomLevel?(o.zoomLevel*=3,o.startTime+=(o.currentTime-o.startTime)*(2/3)):(o.zoomLevel*=2,o.startTime+=.5*(o.currentTime-o.startTime))}else if("zoomin"==e){if(1==o.zoomLevel)return;1440==o.zoomLevel?(o.zoomLevel=o.zoomLevel/5,o.startTime-=4*(o.currentTime-o.startTime)):144==o.zoomLevel||24==o.zoomLevel?(o.zoomLevel=o.zoomLevel/3,o.startTime-=2*(o.currentTime-o.startTime)):(o.zoomLevel=o.zoomLevel/2,o.startTime-=o.currentTime-o.startTime)}if(o.startTime<0){o.startTime=0;var l=(o.currentTime-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,l)}else if(o.startTime>864e5-864e5/o.zoomLevel){o.startTime=864e5-864e5/o.zoomLevel;var l=(o.currentTime-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,l)}t.drawTime(n),"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a)},resize:function(a){var e=this,t=$(a),n=t.data("playbar").options;n.timeWidth=t.find(".lava-playbar-time").width(),e.drawTime(t),e.drawBottomRollBar(a);var o=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;e.loadTimeLabel(a,o,!0);var l=t.data("playbar").dataCanvas[0];l.width=n.timeWidth,"channel"==n.type?e.loadChannelData(a):"line"==n.type&&e.loadLineData(a)},bindEvent:function(a){var e=this,t=$(a),n=t.data("playbar").options,o=t.find(".lava-playbar-bottombar"),l=t.find(".lava-playbar-bottomrollbar"),i=t.find(".lava-playbar-rightbar"),r=t.find(".lava-playbar-rightrollbar"),d=t.find(".lava-playbar-channels"),s=t.find(".lava-playbar-data");l.on("mousedown",function(t){if(!o.is(":visible"))return!1;var l=t.clientX-$(this).offset().left-o.width()/2;15>l&&(l=15),l>$(this).width()-o.width()-15&&(l=$(this).width()-o.width()-15),o.css({left:l}),n.bottomDownFlag=!0,n.lengthX=t.clientX-o.offset().left,e.dragBottomRollBar(a,t);var i=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;return e.loadTimeLabel(a,i,!0),!1}),o.on("mousedown",function(a){return n.bottomDownFlag=!0,n.lengthX=a.clientX-$(this).offset().left,!1}),i.on("mousedown",function(a){return n.rightDownFlag=!0,n.lengthY=a.clientY-$(this).offset().top,!1}),t.find(".lava-playbar-time, .lava-playbar-datawrapper, .lava-playbar-timelabel, .lava-playbar-pointcanvas").on("click",function(o){var l=o.clientX-t.offset().left;return n.currentTime=n.startTime+(l-100)/(n.timeWidth*n.zoomLevel-n.zoomLevel)*864e5,e.loadTimeLabel(a,l),n.onPosition(n.currentTime),!1}),$("body").on("mousemove mouseup",function(o){if("mousemove"==o.type&&n.bottomDownFlag){e.dragBottomRollBar(a,o);var l=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;e.loadTimeLabel(a,l,!0)}else if("mousemove"==o.type&&n.bodyDownFlag){var l=o.clientX-t.offset().left;n.currentTime=n.startTime+(l-100)/(n.timeWidth*n.zoomLevel-n.zoomLevel)*864e5,n.currentTime>864e5&&(n.currentTime=864e5),e.loadTimeLabel(a,l),n.onPosition&&n.onPosition(n.currentTime)}else if("mousemove"==o.type&&n.rightDownFlag){var c=o.clientY-r.offset().top-n.lengthY;15>c&&(c=15),c>80-i.height()&&(c=80-i.height()),i.css({top:c});var p=-(c-15)/(65-i.height())*24*(n.data.length-4);d.css({top:p}),s.css({top:p})}else"mouseup"==o.type&&(n.bottomDownFlag=!1,n.bodyDownFlag=!1,n.rightDownFlag=!1)}),t.on("selectstart",function(){return!1}),a.addEventListener("mousewheel",function(t){if(t.wheelDelta>0)var n="zoomout";else var n="zoomin";return e.zoomOutOrIn(a,n),t.preventDefault(),t.stopPropagation(),!1}),a.addEventListener("DOMMouseScroll",function(t){if(t.detail<0)var n="zoomout";else var n="zoomin";return e.zoomOutOrIn(a,n),t.preventDefault(),t.stopPropagation(),!1}),t.find(".lava-playbar-zoomout,.lava-playbar-zoomin").on("mouseover mouseout click",function(t){var n=t.target.className.replace("lava-playbar-","");"mouseover"==t.type||"mouseout"==t.type?e.drawZoomBtn(a,n,t.type):e.zoomOutOrIn(a,n)}),t.delegate(".lava-playbar-linename","click",function(){$(this).toggleClass("lava-playbar-linename-disable"),e.loadLineData(a);var t=(n.currentTime-n.startTime)/(864e5/n.zoomLevel)*n.timeWidth+100;e.loadTimeLabel(a,t)}),$(window).on("resize",function(){e.resize(a)})}};$.fn.lavaPlayBar=function(a,e){return"string"==typeof a?$.fn.lavaPlayBar.methods[a](this,e):this.each(function(){var e={};$.extend(e,$.fn.lavaPlayBar.defaults),$(this).data("playbar",{options:e}),$.extend($(this).data("playbar").options,a),lavaPlayBar.init(this),lavaPlayBar.drawTime($(this)),lavaPlayBar.bindEvent(this)})},$.fn.lavaPlayBar.defaults={headerColor:"#999",headerBgColor:"#223",channelBgColor:"#222",channelColor:"#999",bgColor:"#000",channelWrapperBgColor:"#333",btnColor:"#32c5d2",rollbarWrapperColor:"#252525",rollbarColor:"#555",rollbarHoverColor:"#666",rollbarAngleColor:"#888",normalColor:"#00ad76",alarmColor:"#b74201",channelSplitColor:"#333",zoomLevel:1,startTime:0,currentTime:0,type:"channel",time:0,onPosition:function(){}},$.fn.lavaPlayBar.methods={loadData:function(a,e){return lavaPlayBar.loadData(a,e)},changeType:function(a,e){return lavaPlayBar.changeType(a,e)},play:function(a,e){return lavaPlayBar.play(a,e)},resize:function(a){lavaPlayBar.resize(a)},options:function(a){return $(a).data("playbar").options},getType:function(a){return $(a).data("playbar").options.type},getTime:function(a){return $(a).data("playbar").options.currentTime}};var switchButton={init:function(a){var e=$(a),t=e.data("switchbutton").option,n=t.width-2,o=t.height-2;e.css("height",o+"px"),e.css("width",n+"px"),e.addClass("lavaui-switchbutton"),t.disabled&&e.addClass("lavaui-switchbutton-disabled");var l=$('<div class="lavaui-switchbutton-container"></div>');e.html(""),e.append(l);var i='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-on" style="width:{width};line-height:{line-height};{background-color}">{text}</span>',r='<span class="lavaui-switchbutton-handle lavaui-switchbutton-label" style="width:{width};"></span>',d='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-off" style="width:{width};line-height:{line-height};{background-color}">{text}</span>>';i=i.replace("{width}",parseInt(n/2)+"px").replace("{text}",t.onText).replace("{line-height}",o+"px"),i=t.onColor?i.replace("{background-color}","background-color:"+t.onColor+" !important;"):i.replace("{background-color}",""),r=r.replace("{width}",parseInt(n/2)+"px"),d=d.replace("{width}",parseInt(n/2)+"px").replace("{text}",t.offText).replace("{line-height}",o+"px"),d=t.offColor?d.replace("{background-color}","background-color:"+t.offColor+" !important;"):d.replace("{background-color}",""),l.append(i),l.append(r),l.append(d),this.bindEvent(a)},bindEvent:function(a){var e=$(a),t=$(a).data("switchbutton").option;e.children(".lavaui-switchbutton-container").on("click",function(){if(!t.disabled){var a=parseInt($(this).css("margin-left"));0>a?$(this).animate({marginLeft:0},400):0===a&&$(this).animate({marginLeft:parseInt(-(t.width-2)/2)},400);var e=switchButton.getState();return t.onChange&&onChange(e),!1}})},getState:function(a){var e=$(a),t=parseInt(e.children(".lavaui-switchbutton-container").css("margin-left"));return 0>t?"off":"on"}};$.fn.switchButton=function(a,e){return"string"==typeof a?$.fn.switchButton.methods[a](this,e):void $.each(this,function(){var e={};$.extend(e,$.fn.switchButton.defaults),$.extend(e,a),$(this).data("switchbutton",{option:e}),switchButton.init(this)})},$.fn.switchButton.defaults={onText:"on",offText:"off",onColor:"",offColor:"",width:84,height:28,value:"",disabled:!1,onChange:null},$.fn.switchButton.methods={open:function(a){var e=$(a),t=e.data("switchbutton").option,n=e.children(".lavaui-switchbutton-container"),o=parseInt(n.css("margin-left"));0>o&&(n.css("margin-left",0),t.onChange&&t.onChange("on"))},close:function(a){var e=$(a),t=e.data("switchbutton").option,n=e.children(".lavaui-switchbutton-container"),o=parseInt(n.css("margin-left"));0===o&&(n.css("margin-left",parseInt(-(t.width-2)/2)),t.onChange&&t.onChange("off"))},getState:function(a){return switchButton.getState(a)}},!function(a){function e(e){var i=a(e);i.hide();var r=a(e).data("table").option,d=a(e).parent().height()-(r.pagination?40:0),s=r.columns;a(e).nextAll(".div-table").length>0&&a(e).nextAll(".div-table").remove(),a(e).nextAll(".div-pagination").length>0&&a(e).nextAll(".div-pagination").remove();var c=a("<div class='div-table' style='height:"+d+"px;'></div>").insertAfter(a(e));if(i.data("table").tableDiv=c,r.fit&&c.css({overflow:"hidden"}),0==r.frozenNumber){for(var f=a("<div class='div-head' style='width:100%;overflow:hidden;'></div>").appendTo(c),u=a("<div class='div-body' style='width:100%;overflow:auto;'></div>").appendTo(c),b=a("<div class='div-head-table' style='position:relative;'></div>").appendTo(f),m=a("<div class='div-body-table'></div>").appendTo(u),g=0,y=0;y<s.length;y++)g+=s[y].width+1;i.data("table").headDiv=f,i.data("table").bodyDiv=u,t(e,b),n(e,m)}else{for(var x=a("<div class='div-head1' style='float:left;'></div>").appendTo(c),w=a("<div class='div-head2' style='float:left;'></div>").appendTo(c),T=a("<div class='div-body1' style='float:left;'></div>").appendTo(c),C=a("<div class='div-body2' style='float:left;'></div>").appendTo(c),k=a("<div class='div-head-table1'></div>").appendTo(x),D=a("<div class='div-head-table2'></div>").appendTo(w),$=a("<div class='div-body-table1'></div>").appendTo(T),I=a("<div class='div-body-table2'></div>").appendTo(C),z=0,L=0,S=0,N=0,B=0,y=r.checkbox?1:0;y<s.length;y++)y<(r.checkbox?r.frozenNumber+1:r.frozenNumber)?(z+=s[y].width,S+=s[y].width):L+=s[y].width,B+=s[y].width;r.checkbox&&(z+=36,S+=36),L=L<c.width()-z-20?c.width()-z-20:L,S+=1,i.data("table").option.frozenWidth=z,N=parseInt(c.width()-S),x.css({width:S,overflow:"hidden"}),w.css({width:N,overflow:"hidden"}),T.css({width:S,overflow:"hidden"}),C.css({width:N,overflow:"auto"}),k.css({width:z}),D.css({width:L,left:-z-1,position:"relative"}),$.css({width:z,position:"relative"}),a(e).data("table").headDiv1=x,a(e).data("table").headDiv2=w,a(e).data("table").bodyDiv1=T,a(e).data("table").bodyDiv2=C,t(e,k,1),t(e,D,2),n(e,$,1),n(e,I,2)}if(r.columnToggle){var M=a(r.columnToggle);M.data("table",a(e));for(var P=a("<ul class='dropdown-menu pull-right'></ul>").appendTo(M.parent()),q=r.frozenNumber+(r.checkbox?1:0),y=q;y<s.length;y++)if("checkbox"!=s[y].field){var _=a("th[data-field="+s[y].field+"]").html();P.append("<li><a class='a-columntoggle' href='javascript:;' data-field='"+s[y].field+"'><span class='span-checkbox span-checkbox-checked'></span>&nbsp;"+_+"</a></li>")}}r.pagination&&o(e),r.url?h(e):r.data&&(r.pageNumber=1,r.firstPage=null,r.lastPage=null,0==r.frozenNumber?p(e,m):(i.data("table").bodyDiv1.children().children().find("tbody").empty(),i.data("table").bodyDiv2.children().children().find("tbody").empty(),p(e,$,1),p(e,I,2)),r.pagination&&l(e)),v(e)}function t(e,t){var n=a(e).data("table").option,o=n.columns,l=a(e).prop("id"),i=a("<table class='jq-table table table-bordered'></table>").appendTo(t),r=a("<thead></thead>").appendTo(i),d=a(e).children("thead");r.html(d.html());for(var s=r.children(),c=0;c<s.length;c++)for(var p=s.eq(c).children(),h=0;h<p.length;h++){var v=p.eq(h).attr("data-field");if(v){for(var f="<div class='table-"+l+"-"+v+"'>"+p.eq(h).html(),u=0;u<o.length;u++)o[u].field==v&&o[u].order&&("asc"==n.orderType?(f+=v==n.defaultOrderColumn?"<div class='table-angle table-angle-up table-angle-active'></div>":"<div class='table-angle table-angle-up'></div>",p.eq(h).attr("data-ordertype",n.orderType)):"desc"==n.orderType&&(f+=v==n.defaultOrderColumn?"<div class='table-angle table-angle-down table-angle-active'></div>":"<div class='table-angle table-angle-down'></div>",p.eq(h).attr("data-ordertype",n.orderType)));f+="</div>",p.eq(h).html(f)}}}function n(e,t,n){var o=a(e).data("table").option;if(a(e).prop("id"),2===n)var l=a("<table class='jq-table table table-bordered' style='border-left-width:0px;'></table>").appendTo(t);else var l=a("<table class='jq-table table table-bordered'></table>").appendTo(t);a("<tbody></tbody>").appendTo(l),o.striped&&l.addClass("table-striped")}function o(e){var t=a(e),n=t.data("table").option.lang,o=a("<div class='div-pagination'></div>").insertAfter(t.data("table").tableDiv),l=(a("<div style='float:left;padding-top:5px;' class='div-pagination-tip'>"+D[n].total+": <span class='span-total'></span>, "+D[n].from+" <span class='span-first'></span> "+D[n].to+" <span class='span-last'></span></div>").appendTo(o),a("<div style='float:right;' class='div-pagination-btn'></div>").appendTo(o)),i="<a href='javascript:;' class='page-first page-btn'>«</a><a href='javascript:;' class='page-pre page-btn'>···</a><div style='float:left;' class='div-pagebtn'><a href='javascript:;' class='page-btn'>1</a><a href='javascript:;' class='page-btn'>2</a><a href='javascript:;' class='page-btn'>3</a><a href='javascript:;' class='page-btn'>4</a><a href='javascript:;' class='page-btn'>5</a></div><a href='javascript:;' class='page-next page-btn'>···</a><a href='javascript:;' class='page-last page-btn'>»</a>";l.html(i),t.data("table").pageDiv=o}function l(e){var t=a(e),n=t.data("table").option,o=n.data,l=n.pageSize,i=n.pageNumber,r=o.total?Math.ceil(o.total/l):1,d=t.data("table").pageDiv,s=d.find(".div-pagebtn");t.data("table").option.totalPage=r,d.find(".span-total").html(o.total),d.find(".span-first").html(o.total>0?(i-1)*l+1:0),d.find(".span-last").html(r>i?i*l:o.total),n.firstPage&&1!=n.firstPage||(t.data("table").option.firstPage=1,t.data("table").option.lastPage=r>5?5:r);var c=t.data("table").option.firstPage,p=t.data("table").option.lastPage;1>=c&&d.find(".page-pre").hide(),p>=r&&d.find(".page-next").hide(),c>1&&d.find(".page-pre").show(),r>p&&d.find(".page-next").show(),5>r?(s.find(".page-btn").show(),s.find(".page-btn").eq(r-1).nextAll().hide()):s.find(".page-btn").show();for(var h=0;p-c+1>h;h++)s.find(".page-btn").eq(h).data("table",{page:c+h}),s.find(".page-btn").eq(h).html(c+h);for(var h=0;p-c+1>h;h++)s.find(".page-btn").eq(h).data("table").page==i?s.find(".page-btn").eq(h).addClass("page-select"):s.find(".page-btn").eq(h).removeClass("page-select")}function i(e,t){var n=a(e),o=n.data("table").option,i=o.pageNumber,r=o.firstPage,d=o.lastPage,s=o.totalPage;if(pageSpan=t-i,t!=i){if(n.data("table").option.pageNumber=t,s>5){var c=r,p=d;t-r>2&&s-d==1?(c+=1,p+=1):s-d>0&&t-r==3?(c+=1,p+=1):s-d>1&&t-r==4?(c+=2,p+=2):3>t-r&&2==r?(c-=1,p-=1):t-r==1&&r>0?(c-=1,p-=1):t-r==0&&r>1&&(c-=2,p-=2),n.data("table").option.firstPage=c,n.data("table").option.lastPage=p}l(e),h(e)}}function r(e){var t=a(e),n=t.data("table").option;1!=n.pageNumber&&(n.totalPage>5&&(t.data("table").option.firstPage=1,t.data("table").option.lastPage=5),t.data("table").option.pageNumber=1,l(e),h(e))}function d(e){var t=a(e).data("table").option;t.pageNumber!=t.totalPage&&(t.totalPage>5&&(a(e).data("table").option.firstPage=t.totalPage-4,a(e).data("table").option.lastPage=t.totalPage),a(e).data("table").option.pageNumber=t.totalPage,l(e),h(e))}function s(e){var t=a(e),n=t.data("table").option,o=n.firstPage;t.data("table").option.firstPage=n.firstPage>6?n.firstPage-5:1,t.data("table").option.lastPage=o>6?n.lastPage-5:n.lastPage-o+1,l(e)}function c(e){var t=a(e),n=t.data("table").option;t.data("table").option.firstPage=n.totalPage-n.lastPage>=5?n.firstPage+5:n.totalPage-4,t.data("table").option.lastPage=n.totalPage-n.lastPage>=5?n.lastPage+5:n.totalPage,l(e)}function p(e,t,n){var o=a(e),l=o.data("table").option,i=o.prop("id"),r=l.data,d=o.siblings(".div-table").find(".div-head,.div-head1"),s=t.children("tbody").empty(),c=r.rows;if(n){if(1==n)var p=l.columns.slice(0,l.checkbox?l.frozenNumber+1:l.frozenNumber);else if(2==n)var p=l.columns.slice(l.checkbox?l.frozenNumber+1:l.frozenNumber)}else var p=l.columns;var h=o.data("table").thArray;if(!h){h=[];for(var f=0;f<p.length;f++)h.push(d.find("th[data-field="+p[f].field+"]"));o.data("table").thArray=h}var u=[];for(f=0;f<h.length;f++)u.push(h[f].hasClass("column-hidden"));
for(var b=[],f=0;f<c.length;f++){for(var m=[],g=0;g<p.length;g++){if(l.columnToggle)if(u[g])var y="<td class='column-hidden'>";else var y="<td>";else var y="<td>";var x="";x="checkbox"==p[g].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":p[g].formatter?p[g].formatter(c[f][p[g].field],c[f],f):void 0===c[f][p[g].field]?"":c[f][p[g].field],y+="<div class='table-"+i+"-"+p[g].field+"'>"+x+"</div></td>",m.push(y)}c[f].lavaTableRowIndex=f,b.push("<tr class='table-row-"+f+"'>"+m.join("")+"</tr>")}s.html(b.join("")),setTimeout(function(){v(e)},1),n&&2!=n||!l.onLoadSuccess||l.onLoadSuccess(r)}function h(e){var t=a(e),n=t.data("table").option;if(!n.onBeforeLoad||n.onBeforeLoad()){if(t.data("table").option.formData[n.pageSizeField]=n.pageSize,t.data("table").option.formData[n.pageNumberField]=n.pageNumber,n.showLoader){var o=t.data("table").tableDiv,i=a("<div class='div-loader' style='width:100%;height:100%;'></div>").appendTo(o);a("<div class='lava-table-modal'></div>").appendTo(i),a("<div class='progress progress-striped active lava-progress'><div class='progress-bar'></div></div>").appendTo(i)}a.ajax({url:n.url,type:n.method,dataType:"json",data:n.formData}).done(function(a){n.showLoader&&i.remove(),t.data("table").option.data=n.loadFilter?n.loadFilter(a):a,0==n.frozenNumber?p(e,t.data("table").bodyDiv.children().children()):(t.data("table").bodyDiv1.children().children().find("tbody").empty(),t.data("table").bodyDiv2.children().children().find("tbody").empty(),p(e,t.data("table").bodyDiv1.children().children(),1),p(e,t.data("table").bodyDiv2.children().children(),2)),n.pagination&&l(e)}).fail(function(){n.showLoader&&i.remove(),t.data("table").option.data={total:0,rows:[]},0==n.frozenNumber?p(e,t.data("table").bodyDiv.children().children()):(t.data("table").bodyDiv1.children().children().find("tbody").empty(),t.data("table").bodyDiv2.children().children().find("tbody").empty(),p(e,t.data("table").bodyDiv1.children().children(),1),p(e,t.data("table").bodyDiv2.children().children(),2)),n.pagination&&l(e)})}}function v(e){var t=a(e).data("table").option,n=a(e);if(0==t.frozenNumber){if(t.fit){var o=n.parent().height(),l=n.data("table").headDiv.height(),i=o-l-(t.pagination?40:0);n.data("table").tableDiv.css({height:o-(t.pagination?40:0)}),n.data("table").bodyDiv.css({height:i})}var r="",d=t.columns,s=n.data("table").bodyDiv.children().width();setTimeout(function(){var a=n.data("table").bodyDiv.children().width();n.data("table").headDiv.css({width:a-0})},0);for(var c=0,p=0,h=n.prop("id"),v=0;v<d.length;v++)c+="checkbox"==d[v].field?36:d[v].width;for(var v=0;v<d.length;v++)p=s>c?parseInt(s/c*d[v].width)-17:d[v].width-17,r+=".table-"+h+"-"+d[v].field+"{width:"+p+"px;}";n.data("table").style&&n.data("table").style.remove();var f=a("<style type='text/css'>"+r+"</style>").insertAfter(n);n.data("table").style=f;var u=n.data("table").bodyDiv;u.css(s>c?{"overflow-x":"hidden"}:{"overflow-x":"auto"})}else{if(t.fit){var o=n.parent().height(),l=n.data("table").headDiv1.height(),i=o-l-(t.pagination?40:0);n.data("table").tableDiv.css({height:o-(t.pagination?40:0)}),n.data("table").bodyDiv1.css({height:i}),n.data("table").bodyDiv2.css({height:i})}for(var d=t.columns,p=1,v=0;v<(t.checkbox?t.frozenNumber+1:t.frozenNumber);v++)p+="checkbox"==d[v].field?36:d[v].width;n.data("table").headDiv2.css({width:parseInt(n.data("table").tableDiv.width()-p)-1}),n.data("table").bodyDiv2.css({width:parseInt(n.data("table").tableDiv.width()-p)-1});var b=n.data("table").bodyDiv1.find("tr"),m=n.data("table").bodyDiv2.find("tr");if(m.length>0)for(var v=0;v<b.length;v++){var i=b.eq(v).outerHeight()>m.eq(v).outerHeight()?b.eq(v).outerHeight():m.eq(v).outerHeight();i=Math.ceil(i),b.eq(v).css({height:i}),m.eq(v).css({height:i})}var p=0,c=0,g=n.data("table").bodyDiv2,h=n.prop("id"),y=n.data("table").headDiv2.find("thead"),r="<style type='text/css'>";if(y.find(".column-hidden").length,t.frozenNumber>0)for(var x=0,v=t.checkbox?t.frozenNumber+1:t.frozenNumber;v<d.length;v++)y.find(".table-"+h+"-"+d[v].field).parent().hasClass("column-hidden")||(x+=d[v].width);for(var v=0;v<d.length;v++)p=d[v].width-17,x<g.width()-18&&v>=(t.checkbox?t.frozenNumber+1:t.frozenNumber)&&(y.find(".table-"+h+"-"+d[v].field).parent().hasClass("column-hidden")?p=parseInt((g.width()-18)/x*d[v].width)-17:(p=parseInt((g.width()-18)/x*d[v].width)-17,c+=p)),"checkbox"!=d[v].field&&(r+=".table-"+h+"-"+d[v].field+"{width:"+p+"px;}");n.data("table").headDiv2.children().css("width",c),r+="</style>",n.data("table").style&&n.data("table").style.remove();var w=a(r).insertAfter(n);if(n.data("table").style=w,n.data("table").bodyDiv2.children().css({width:c-18}),/msie|trident[\s\S]*rv/.test(navigator.userAgent.toLowerCase())){var T=n.data("table").bodyDiv2;T.scroll()}}}function f(e,t){var n=a(e),o=n.prop("id");n.siblings(".div-table").find(".table-"+o+"-"+t).parent().removeClass("column-hidden"),v(e)}function u(e,t){var n=a(e),o=n.prop("id");n.siblings(".div-table").find(".table-"+o+"-"+t).parent().addClass("column-hidden"),v(e)}function b(e){a(window).resize(function(){setTimeout(function(){a(e).parent().is(":visible")&&v(e)},100)});var t=a(e),n=t.data("table").option;if(a(e).data("table").bodyDiv){var o=a(e).data("table").bodyDiv;o.on("scroll",function(){t.data("table").headDiv.children().css({left:-o.scrollLeft()})}),o.delegate("tr","mouseover mouseout",function(t){var n=a(this).prop("class");"mouseover"===t.type?a(e).siblings(".div-table").find("."+n).addClass("row-hover"):a(this).hasClass("row-hover")&&a(e).siblings(".div-table").find("."+n.split(" ")[0]).removeClass("row-hover")})}if(a(e).data("table").bodyDiv2){var l=t.data("table").bodyDiv1,p=t.data("table").bodyDiv2,b=t.data("table").headDiv2,n=t.data("table").option;p.on("scroll",function(){l.children().css({top:-p.scrollTop()}),b.children().css({left:-p.scrollLeft()-n.frozenWidth-1})}),l.delegate("tr","mouseover mouseout",function(t){var n=a(this).prop("class");"mouseover"===t.type?a(e).siblings(".div-table").find("."+n).addClass("row-hover"):a(this).hasClass("row-hover")&&a(e).siblings(".div-table").find("."+n.split(" ")[0]).removeClass("row-hover")}),p.delegate("tr","mouseover mouseout",function(t){var n=a(this).prop("class");"mouseover"===t.type?a(e).siblings(".div-table").find("."+n).addClass("row-hover"):a(this).hasClass("row-hover")&&a(e).siblings(".div-table").find("."+n.split(" ")[0]).removeClass("row-hover")})}if(t.data("table").pageDiv&&(t.data("table").pageDiv.find(".div-pagebtn").children().on("click",function(){a(this).data("table")&&i(e,a(this).data("table").page)}),t.data("table").pageDiv.find(".page-first").on("click",function(){r(e)}),t.data("table").pageDiv.find(".page-last").on("click",function(){d(e)}),t.data("table").pageDiv.find(".page-pre").on("click",function(){s(e)}),t.data("table").pageDiv.find(".page-next").on("click",function(){c(e)})),0==n.frozenNumber)var m=t.data("table").headDiv,g=t.data("table").bodyDiv;else var m=t.siblings(".div-table").find(".div-head1,.div-head2"),g=t.data("table").bodyDiv1;t.data("table").option.checkbox&&(m.find(".jq-table").find(".checkbox").on("click",function(){var e=a(this);setTimeout(function(){var a=e.children("input").prop("checked");g.find(".checkbox").children("input").prop("checked",a)},1)}),g.delegate(".checkbox","click",function(){setTimeout(function(){var a=g.find(".checkbox>input").length==g.find(".checkbox>input:checked").length?!0:!1;m.find(".jq-table>thead>tr>th .checkbox>input").prop("checked",a)},1)})),a("body").delegate(".a-columntoggle","click",function(){var t=a(this).children(".span-checkbox");if(1==t.parent().parent().parent().find(".span-checkbox-checked").length&&t.hasClass("span-checkbox-checked"))return!1;t.toggleClass("span-checkbox-checked");var n=a(this).attr("data-field");return a(this).parent().parent().data("table"),t.hasClass("span-checkbox-checked")?f(e,n):u(e,n),!1}),n.frozenNumber>0&&(m=t.siblings(".div-table").find(".div-head1,.div-head2")),m.delegate("th[data-ordertype]","click",function(){var n=a(this).find(".table-angle"),o=t.data("table").option.formData,l=a(this).attr("data-field");n.hasClass("table-angle-up")?n.hasClass("table-angle-active")?(n.removeClass("table-angle-up").addClass("table-angle-down"),o.orderType="desc"):o.orderType="asc":n.hasClass("table-angle-down")&&(n.hasClass("table-angle-active")?(n.removeClass("table-angle-down").addClass("table-angle-up"),o.orderType="asc"):o.orderType="desc"),m.find(".table-angle-active").removeClass("table-angle-active"),n.addClass("table-angle-active"),o.orderField=l,h(e)})}function m(e){a("div.page-content").length>0&&(a("div.page-content").hasClass("div-noprint")||(a("div.page-content").addClass("div-noprint"),a("body").append("<style>.div-print{display: none;} @media print {.div-noprint{display: none;} .div-print{display: block;}}.table-print{border-collapse:collapse;border-spacing:0;text-align:center;}.table-print td,.table-print th{border:1px solid #ddd;font-weight:normal;}</style>"))),a("div.container").length>0&&(a("div.container").hasClass("div-noprint")||(a("div.container").addClass("div-noprint"),a("body").append("<style>.div-print{display: none;} @media print {.div-noprint{display: none;} .div-print{display: block;}}.table-print{border-collapse:collapse;border-spacing:0;text-align:center;}.table-print td,.table-print th{border:1px solid #ddd;font-weight:normal;}</style>")));var t=g(e),n=y(e);a(".div-print").length>0?a(".div-print").html("<table cellspacing='0' cellpadding='0' class='table-print' style='width:100%;font-size:12px;'>"+t+n+"</table>"):a("body").append("<div class='div-print'><table cellspacing='0' cellpadding='0' class='table-print' style='width:100%;font-size:12px;'>"+t+n+"</table></div>"),setTimeout(function(){window.print()},10)}function g(e){var t=a(e).nextAll(".div-table"),n=t.children(".div-head1"),o=t.children(".div-head2"),l=[],i=[];if(n.length>0){for(var r=n.find("th"),d=o.find("th"),s=0;s<r.length;s++)if(r.eq(s).is(":visible")){var c=r.eq(s).children("div").html();i.push("<th>"+c+"</th>")}if(o.length>0)for(s;s<d.length;s++)if(d.eq(s).is(":visible")){var c=d.eq(s).children("div").html();i.push("<th>"+c+"</th>")}}else for(var p=t.children(".div-head"),h=p.find("th"),s=0;s<h.length;s++)if(h.eq(s).is(":visible")){var c=h.eq(s).children("div").html();i.push("<th>"+c+"</th>")}return l.push("<tr>"+i.join("")+"</tr>"),"<thead>"+l.join("")+"</thead>"}function y(e){var t=[],n=a(e).nextAll(".div-table"),o=n.children(".div-body1"),l=n.children(".div-body2"),i=n.children(".div-body");if(o.length>0)for(var r=o.find("tr"),d=l.find("tr"),s=0;s<r.length;s++){for(var c=[],p=r.eq(s).children("td"),h=d.eq(s).children("td"),v=0;v<p.length;v++)if(p.eq(v).is(":visible")){var f=p.eq(v).children("div").html();c.push("<td>"+f+"</td>")}if(h.length>0)for(var v=0;v<h.length;v++)if(h.eq(v).is(":visible")){var u=h.eq(v).children("div").html();c.push("<td>"+u+"</td>")}t.push("<tr>"+c.join("")+"</tr>")}else for(var b=i.find("tr"),s=0;s<b.length;s++){for(var c=[],m=b.eq(s).children("td"),v=0;v<m.length;v++)if(m.eq(v).is(":visible")){var g=m.eq(v).children("div").html();c.push("<td>"+g+"</td>")}t.push("<tr>"+c.join("")+"</tr>")}return"<tbody>"+t.join("")+"</tbody>"}function x(e,t){for(var n=a(e),o=n.data("table").option,l=o.data.rows,i=0;i<l.length;i++){var r=w(t,l[i]);if(r)return l[i].lavaTableRowIndex}return null}function w(a,e){var t=!0;for(var n in a)e.hasOwnProperty(n)?e[n]!==a[n]&&(t=!1):t=!1;return t}function T(e,t,n){var o=a(e),l=o.data("table"),i=l.option,r=i.columns,d=i.data.rows,s=o.prop("id");if(null===t.index||void 0===t.index)return void(console.error&&console.error("请指定行号"));var c=parseInt(t.index);if(n){var p=l["bodyDiv"+n].find(".table-row-"+c);if(1===n)var r=i.columns.slice(0,i.checkbox?i.frozenNumber+1:i.frozenNumber);else if(2===n)var r=i.columns.slice(i.checkbox?i.frozenNumber+1:i.frozenNumber)}else var r=i.columns;for(var h=0;h<r.length;h++)p.find(".table-"+s+"-"+attr).html(r[h].formatter?r[h].formatter(t.row[attr],t.row,c):t.row[attr]);t.row.lavaTableRowIndex=t.index,d[c]=t.row}function C(e,t,n,o){var l=a(e),i=l.data("table").option,r=(l.data("table"),i.columns),d=(i.data.rows,i.data.total),s=l.prop("id");if(n){if(1==n)var r=i.columns.slice(0,i.checkbox?i.frozenNumber+1:i.frozenNumber);else if(2==n)var r=i.columns.slice(i.checkbox?i.frozenNumber+1:i.frozenNumber)}else var r=i.columns;for(var c=[],p=0;p<r.length;p++){if(i.columnToggle)if(hiddenArray[j])var h="<td class='column-hidden'>";else var h="<td>";else var h="<td>";var v="";v="checkbox"==r[p].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":r[p].formatter?r[p].formatter(o[r[p].field],o,d):void 0===o[r[p].field]?"":o[r[p].field],h+="<div class='table-"+s+"-"+r[p].field+"'>"+v+"</div></td>",c.push(h)}if(c.length>0){var f="<tr class='table-row-"+d+"'>"+c.join("")+"</tr>";n&&2!==n||(i.data.total+=1,o.lavaTableRowIndex=d,i.data.rows.push(o)),t.find("tbody").append(f)}}function k(e,t){var n=a(e),o=n.data("table").tableDiv,l=n.data("table").option.data.rows;o.find(".table-row-"+t).remove();for(var i=0;i<l.length;i++)t==l[i].lavaTableRowIndex&&l.splice(i,1)}a.fn.table=function(t,n){return"string"==typeof t?a.fn.table.methods[t](this,n):this.each(function(){a(this).data("table")&&a(this).data("table").option||a(this).data("table",{option:a.extend({},a.fn.table.defaults)}),a.extend(a(this).data("table").option,t),a.extend(D,a(this).data("table").option.footLanguage),e(this),b(this)})},a.fn.table.defaults={url:"",method:"post",pagination:!0,pageSize:20,pageNumber:1,pageSizeField:"rows",pageNumberField:"page",footLanguage:{},nowrap:!0,striped:!0,rownumbers:!1,formData:{},frozenNumber:0,lang:"zh-CN",fit:!1,checkbox:!1,showLoader:!0,data:{total:0,rows:[]},onBeforeLoad:null,onLoadSuccess:null},a.fn.table.methods={load:function(e,t){var n=a(e);n.data("table").option.formData=t,n.data("table").option.pageNumber=1,n.data("table").option.firstPage=null,n.data("table").option.lastPage=null,h(e)},reload:function(a){h(a)},loadData:function(e,t){var n=a(e),o=n.data("table").option;n.data("table").option.data=t,n.data("table").option.pageNumber=1,n.data("table").option.firstPage=null,n.data("table").option.lastPage=null,0==o.frozenNumber?p(e,n.data("table").bodyDiv.children().children()):(n.data("table").bodyDiv1.children().children().find("tbody").empty(),n.data("table").bodyDiv2.children().children().find("tbody").empty(),p(e,n.data("table").bodyDiv1.children().children(),1),p(e,n.data("table").bodyDiv2.children().children(),2)),o.pagination&&l(e)},getChecked:function(e){for(var t=a(e),n=t.data("table").tableDiv,o=t.data("table").option.data.rows,l=[],i=n.find("td .checkbox input[type='checkbox']"),r=0;r<o.length;r++)i.eq(r).prop("checked")&&l.push(o[i.eq(r).parent().parent().parent().parent().index()]);return l},options:function(e){return a(e).data("table").option},resize:function(a){v(a)},print:function(a){m(a)},updateRow:function(e,t){var n=a(e);n.data("table").bodyDiv2?(T(e,t,1),T(e,t,2)):T(e,t),window.setTimeout(function(){v(e)},1)},getRowIndex:function(a,e){return x(a,e)},appendRow:function(e,t){var n=a(e);n.data("table").bodyDiv?(C(e,n.data("table").bodyDiv,null,t),window.setTimeout(function(){v(e)},1)):(C(e,n.data("table").bodyDiv1,1,t),C(e,n.data("table").bodyDiv2,2,t),window.setTimeout(function(){v(e)},1))},deleteRow:function(a,e){k(a,e)}};var D={"zh-CN":{total:"总共",from:"显示",to:"到"},"en-US":{total:"Total",from:"displaying from",to:"to"},"zh-TW":{total:"總共",from:"顯示",to:"到"},"pt-PT":{total:"Total de",from:"Exibindo",to:"para"},af:{total:"van",from:"Wys",to:"tot"},am:{total:"-ը",from:"Դիտել",to:"-ից"},fr:{total:"au",from:"Affichage de",to:"et"},jp:{total:"全",from:"アイテム中",to:"から"},"pt-br":{total:"de",from:"Mostrando",to:"a"},ca:{total:"de",from:"Veient",to:"a"}}}(jQuery);var lavaTabs={tabIndex:0,timer:null,initDom:function(a){var e=this,t=$(a);t.addClass("lava-tabs");var n=$(a).data("tabs").options,o=$("<div class='lava-tabs-toolbar'></div>").appendTo(t),l=$("<div class='lava-tabs-pre'><a href='javascript:;' class='lava-tabs-btn-pre'><span class='glyphicon glyphicon-backward'></span></a></div>").appendTo(o),i=$("<div class='lava-tabs-btn-wrapper'></div>").appendTo(o),r=($("<div class='lava-tabs-next'><a href='javascript:;' class='lava-tabs-btn-next'><span class='glyphicon glyphicon-forward'></span></a></div>").appendTo(o),$("<div class='lava-tabs-btns'></div>").appendTo(i),l.width());i.css({"margin-left":r}),n.fit&&t.css({width:"100%",height:"100%"}).addClass("fit"),n.border&&t.addClass("bordered"),e.bindEvent(a),e.setOption(a)},addTab:function(a,e){var t=lavaTabs,n=$(a),o=n.children(".lava-tabs-toolbar").find(".lava-tabs-btns"),l=(n.data("tabs").options,e.hideType?e.hideType:"hide"),i=n.children(".lava-tabs-toolbar").find(".lava-tabs-btn-next");o.find(".lava-tabs-btn-selected").removeClass("lava-tabs-btn-selected");var r=$("<a href='javascript:;' class='lava-tabs-btn lava-tabs-btn-selected' data-for='lava-tabs-"+ ++t.tabIndex+"' data-hidetype='"+l+"'>"+e.title+" </a>").appendTo(o);e.closable!==!1&&$("<span class='close'></span>").appendTo(r),t.hideAll(a),$("<div class='lava-tabs-tab' id='lava-tabs-"+t.tabIndex+"' data-hidetype='"+l+"'>"+e.content+"</div>").appendTo(n),r.offset().left+r.outerWidth()>i.offset().left&&i.click()},select:function(a,e){for(var t=null,n=$(a).children(".lava-tabs-toolbar"),o=n.find(".lava-tabs-btn"),l=0;l<o.length;l++)if(e==l||e==o.eq(l).text()){t=o.eq(l);break}if(t){t.click();var i=n.children(".lava-tabs-btn-wrapper"),r=i.children(),d=n.find(".lava-tabs-btn-next"),s=r.css("left").replace("px","");s=s?parseInt(s):0,t.offset().left<i.offset().left?(s+=i.offset().left-t.offset().left,r.animate({left:s},"fast")):t.offset().left+t.outerWidth()>d.offset().left&&(s-=t.offset().left+t.outerWidth()-d.offset().left,r.animate({left:s},"fast"))}},setOption:function(a,e){var t=$(a),n=t.data("tabs").options;e&&$.extend(n,e);var o=t.find(".lava-tabs-toolbar"),l=["<style>"];n.bgColor&&l.push(".lava-tabs-toolbar,.lava-tabs-btn-pre,.lava-tabs-btn-next{background-color:"+n.bgColor+";}"),n.color&&l.push(".lava-tabs-btn,.lava-tabs-btn-pre,.lava-tabs-btn-next{color:"+n.color+";}"),n.borderColor&&(l.push(".lava-tabs-btn-pre,.lava-tabs-btn-next,.lava-tabs-btn{border-color:"+n.borderColor+";}"),o.css({"border-bottom-color":n.borderColor})),n.activeColor&&(l.push(".lava-tabs-btn-pre:hover,.lava-tabs-btn-next:hover,.lava-tabs-btn:hover,.lava-tabs-btn-selected,.lava-tabs-btn:focus {background-color:"+n.activeColor+";"),l.push(n.color?"color:"+n.color+";}":"}")),l.push("</style>"),t.data("tabs").style&&t.data("tabs").style.remove();var i=$(l.join("\n")).insertAfter(t);t.data("tabs").style=i},bindEvent:function(a){var e=this,t=$(a),n=t.data("tabs").options,o=t.children(".lava-tabs-toolbar"),l=o.children(".lava-tabs-btn-wrapper"),i=l.children(),r=o.find(".lava-tabs-btn-pre"),d=o.find(".lava-tabs-btn-next");o.delegate(".lava-tabs-btn","click",function(){if(!$(this).hasClass("lava-tabs-btn-selected")){o.find(".lava-tabs-btn").removeClass("lava-tabs-btn-selected"),$(this).addClass("lava-tabs-btn-selected"),e.hideAll(a);var t=$(this).attr("data-for");"position"==$(this).attr("data-hidetype")?$("#"+t).css({position:"relative",left:0}):$("#"+t).removeClass("lava-tabs-tab-close"),n.onSelect&&n.onSelect($.trim($(this).text()))}}),o.delegate(".close","click",function(){var a=$(this).parent().attr("data-for"),e=$(this).parent();return e.hasClass("lava-tabs-btn-selected")&&(e.next().length>0?e.next().click():e.prev().length>0&&e.prev().click()),n.onClose&&n.onClose($.trim(e.text())),e.remove(),$("#"+a).remove(),!1}),r.on("click",function(){var a=i.children(),e=a.first();if(e.offset().left<l.offset().left)for(var t=0;t<a.length;t++){var n=a.eq(t);if(n.offset().left+n.outerWidth()>=l.offset().left){var o=i.css("left").replace("px","");o=o?parseInt(o):0,n.offset().left-i.offset().left<=d.offset().left-a.eq(t+1).offset().left?o=0:o+=d.offset().left-a.eq(t+1).offset().left,i.animate({left:o},"fast");break}}}),d.on("click",function(){var a=i.children();if(a.last().offset().left+a.last().width()>d.offset().left)for(var e=0;e<a.length;e++){var t=a.eq(e);if(t.offset().left+t.width()>d.offset().left){var n=i.css("left").replace("px","");n=n?parseInt(n):0,a.last().offset().left+a.last().outerWidth()-t.offset().left<l.width()-d.outerWidth()?n-=a.last().offset().left+a.last().outerWidth()-d.offset().left:t.offset().left<=d.offset().left?n-=t.offset().left-l.offset().left:t.prev().length>0&&(n-=t.prev().offset().left-l.offset().left),i.animate({left:n},"fast");break}}}),window.onresize=function(){/msie 8/.test(navigator.userAgent.toLowerCase())&&(e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){e.resizeDom(a)},10))}},hideAll:function(a){for(var e=$(a),t=e.children(".lava-tabs-tab"),n=0;n<t.length;n++){var o=t.eq(n);"position"==o.attr("data-hidetype")?o.css({position:"absolute",left:-1e4}):o.addClass("lava-tabs-tab-close")}},resizeDom:function(a){var e=$(a),t=e.children(".lava-tabs-toolbar"),n=e.children(".lava-tabs-tab").not(".lava-tabs-tab-close"),o=e.height()-t.height()-2;n.css({height:o})}};$.fn.lavaTabs=function(a,e){return"string"==typeof a?$.fn.lavaTabs.methods[a](this,e):this.each(function(){var e={};$.extend(e,$.fn.lavaTabs.defaults),$(this).data("tabs",{options:e}),$.extend($(this).data("tabs").options,a),lavaTabs.initDom(this)})},$.fn.lavaTabs.defaults={border:!1,fit:!0,bgColor:"",color:"",borderColor:"",activeColor:"",onClose:null,onSelect:null},$.fn.lavaTabs.methods={add:function(a,e){lavaTabs.addTab(a,e)},select:function(a,e){lavaTabs.select(a,e)},setOption:function(a,e){lavaTabs.setOption(a,e)}},!function(a){var e={init:function(e){var t=a(e).css({paddingRight:20}),n=t.parent();n.css({position:"relative"});var o=a("<div class='timespinner-add'></div>").appendTo(n),l=a("<div class='timespinner-minus'></div>").appendTo(n),i=(t.innerHeight()/2,20);o.css({height:"45%",width:i}),l.css({height:"45%",width:i}),t.data("timespinner").add=o,t.data("timespinner").minus=l,this.initEvent(e)},initEvent:function(e){var t=this,n=a(e),o=n.data("timespinner").options,l=n.data("timespinner").add,i=n.data("timespinner").minus;n.on("click blur",function(a){if("click"==a.type){var l=t.getCursorIndex(e);if(1>l||l%3==0)return;if(l%3==1)var i=l-1;else if(l%3==2)var i=l-2;var r=i+2;o.start=i,o.end=r,t.setSelection(e,i,r)}else{var d=n.val(),s=t.formatData(n.val(),o.showSeconds,o.separator);n.val(s),o.onChange&&o.onChange(d,s)}}),l.on("click",function(){if(!n.attr("disabled")){var a=n.val(),l=new Date("2000/01/01 "+a).getTime();0==o.start?l+=36e5:3==o.start?l+=6e4:6==o.start&&(l+=1e3);var i=new Date(l),r=n.val(),a=t.formatData(i.getHours()+o.separator+i.getMinutes()+o.separator+i.getSeconds(),o.showSeconds,o.separator);n.val(a),n.focus(),t.setSelection(e,o.start,o.end),o.onChange&&o.onChange(r,a)}}),i.on("click",function(){if(!n.attr("disabled")){var a=n.val(),l=new Date("2000/01/01 "+a).getTime();0==o.start?l-=36e5:3==o.start?l-=6e4:6==o.start&&(l-=1e3);var i=new Date(l),r=n.val(),a=t.formatData(i.getHours()+o.separator+i.getMinutes()+o.separator+i.getSeconds(),o.showSeconds,o.separator);n.val(a),n.focus(),t.setSelection(e,o.start,o.end),o.onChange&&o.onChange(r,a)}})},getCursorIndex:function(a){var e=-1;if(a.selectionStart)e=a.selectionStart;else if(document.selection){var t=document.selection.createRange();t.moveStart("character",-a.value.length),e=t.text.length}return e},setSelection:function(a,e,t){if(a.createTextRange){var n=a.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}else a.setSelectionRange&&a.setSelectionRange(e,t)},formatData:function(a,e,t){var n=this,o=null;if(a){var l=a.split(t),i=n.round(parseInt(l[0]),24),r=n.round(parseInt(l[1]),60),d=n.round(parseInt(l[2]),60);o=e?i+t+r+t+d:i+t+r}else o="";return o},round:function(a,e){var t=null;return t=a&&0/0!==a?a%e+"":"00",1==t.length?"0"+t:t},setValue:function(e,t){var n=this,o=a(e),l=o.data("timespinner").options,t=n.formatData(t,l.showSeconds,l.separator);o.val(t)}};a.fn.timespinner=function(t,n){return"string"==typeof t?a.fn.timespinner.methods[t](this,n):void a.each(this,function(){var n={};a.extend(n,a.fn.timespinner.defaults),a.extend(n,t),a(this).data("timespinner",{options:n}),e.init(this)})},a.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},a.fn.timespinner.methods={setValue:function(a,t){e.setValue(a,t)}}}(jQuery),!function(a,e){var t={treeId:1,isIE:void 0,init:function(a){var e=this;e.bindEvent(a),e.checkIsIE()},checkIsIE:function(){var a=this;a.isIE=/msie|edge|trident/.test(e.navigator.userAgent.toLowerCase())?!0:!1},loadLocalData:function(e){var t=this,n=a(e),o=n.data("tree").options;o.data.length>0?(o.loadFilter&&(o.data=o.loadFilter(o.data)),t.loadData(e,o.data)):console.error("本地数据为空")},loadData:function(e,n){var o=a(e),l=o.data("tree").options;o.addClass("lavaui-tree"),o.html(""),t.initData(n,l.htmlArray,0,void 0,l),t.initDom(e,e,l.htmlArray)},remoteData:function(t){var n=this,o=a(t),l=o.data("tree").options,i=o.data("tree").options.url;a.ajax({url:i,type:l.method,dataType:"json",data:l.queryParams}).done(function(a){a?(l.data=a,l.loadFilter&&(l.data=l.loadFilter(l.data)),n.loadData(t,l.data),e.setTimeout(function(){if(l.onLoadSuccess){var a=l.data;l.onLoadSuccess(a)}},200)):console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空")}).fail(function(){l.onLoadError&&l.onLoadError(),console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败")})},initData:function(a,e,t,n,o){for(var l=this,i=0;i<a.length;i++){a[i].treeId="lava_tree_"+l.treeId++,a[i].level=t?t:0,a[i].parentTreeId=n?n:void 0;var r=o.checkbox,d=o.async;if(r){var s="<li id='"+a[i].treeId+"' {0}>{1}<span class='tree-chkbx {2}'></span><a href='javascript:;'><span class='{3}'></span><span>"+a[i].text+"</span></a>{4}</li>",c="";if(d?a[i].closed?(s=s.replace("{0}","class='closed'"),s=s.replace("{1}","<span class='button-open'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):a[i].children&&a[i].children.length>0?(s=s.replace("{0}",""),s=s.replace("{1}","<span class='button-cloed'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}",""),c="icon-file",s=s.replace("{4}","")):a[i].children&&a[i].children.length>0?a[i].closed?(s=s.replace("{0}","class='closed'"),s=s.replace("{1}","<span class='button-open'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}","<span class='button-close'></span>"),c="icon-folder",s=s.replace("{4}","<ul></ul>")):(s=s.replace("{0}",""),s=s.replace("{1}",""),c="icon-file",s=s.replace("{4}","")),s=a[i].iconCls?s.replace("{3}","icon "+a[i].iconCls):s.replace("{3}","node-icon "+c),a[i].checked)a[i].checked=2,s=s.replace("{2}","tree-chk");else if(a[i].children&&a[i].children.length>0){for(var p=[],h=0;h<a[i].children.length;h++)p.push(a[i].children[h].checked?!0:!1);/\/false/.test("/"+p.join("/"))?/\/true/.test("/"+p.join("/"))?(a[i].checked=1,s=s.replace("{2}","tree-halfchk")):(a[i].checked=0,s=s.replace("{2}","tree-nochk")):(a[i].checked=2,s=s.replace("{2}","tree-chk"))}else a[i].checked=0,s=s.replace("{2}","tree-nochk")}else{var c="";if(d)if(a[i].closed){c="icon-folder";var s="<li id='"+a[i].treeId+"' class='closed'><span class='button-open'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else if(a[i].children&&a[i].children.length>0){c="icon-folder";var s="<li id='"+a[i].treeId+"'><span class='button-close'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{c="icon-file";var s="<li id='"+a[i].treeId+"'><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a></li>"}else if(a[i].children&&a[i].children.length>0)if(a[i].closed){c="icon-folder";var s="<li id='"+a[i].treeId+"' class='closed'><span class='button-open'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{c="icon-folder";var s="<li id='"+a[i].treeId+"'><span class='button-close'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{c="icon-file";var s="<li id='"+a[i].treeId+"'><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a></li>"}s=a[i].iconCls?s.replace("{0}","icon "+a[i].iconCls):s.replace("{0}","node-icon "+c)}e.push({html:s,parentTreeId:n});var v=t+1;a[i].children&&l.initData(a[i].children,e,v,a[i].treeId,o)}},initDom:function(e,t,n){var o=this,l=a(e).data("tree").options.closedChildren;if(0!=n.length){var i=a(t),r=a(e);r.data("tree").options,n[0].parentTreeId&&(i=a("#"+n[0].parentTreeId).children("ul"));var d=n[0].parentTreeId,s=100;o.isIE&&(s=1e4),s=n.length>s?s:n.length;var c=n.splice(0,s),p=[],h=[];if(e==t)var v=!0;else var v=!i.parent("li").hasClass("closed");for(var f=!1,u=((new Date).getTime(),0);u<c.length;u++)d==c[u].parentTreeId?v?p.push(c[u].html):h.push(c[u]):(v?(i[0].childNodes.length>0?i.append(p.join("")):i[0].innerHTML=p.join(""),f=!0):l[d]=l[d]?l[d].concat(h):h,d=c[u].parentTreeId,i=d?a("#"+d).children("ul"):a(e),v=!i.parent("li").hasClass("closed"),v?(p=[c[u].html],h=[]):(p=[],h=[c[u]]));p.length>0&&(i[0].childNodes.length>0?i.append(p.join("")):i[0].innerHTML=p.join(""),f=!0),h.length>0&&(l[d]=l[d]?l[d].concat(h):h);var b=f?5:0;o.isIE&&f&&(b=3e3),n.length>0&&(b?setTimeout(function(){o.initDom(e,i,n)},b):o.initDom(e,i,n))}},bindEvent:function(e){var t=this,n=a(e),o=n.data("tree").options;n.delegate(".button-open, .button-close, a, .tree-chkbx","click",function(){var n=a(this);if(n.hasClass("button-open")){t.expandNodes(n.parent(),e,o);var l=n.parent().prop("id"),i=t.findNode(o.data,l);o.onExpand&&o.onExpand(i)}else if(n.hasClass("button-close")){t.collapseNodes(n);var l=n.parent().prop("id"),i=t.findNode(o.data,l);o.onCollapse&&o.onCollapse(i)}else if("A"==n[0].tagName)t.selectNode(e,n);else if(n.hasClass("tree-chkbx")){t.checkNodes(e,n);var i=t.findNode(o.data,n.parent().prop("id"));o.onCheck&&o.onCheck(i)}})},expandNodes:function(e,n,o){var l=this,i=a(n),o=i.data("tree").options,r=e,d=r.attr("id"),s=l.findNode(o.data,d),c=s.level,p=s.id;r.hasClass("closed")&&r.removeClass("closed"),r.children(".button-open")[0].setAttribute("class","button-close"),r.children("a").children(".node-icon").removeClass("icon-folder node-icon").addClass("icon-loading"),r.children("ul")||r.append("<ul></ul>");var h=r.children("ul"),v=null;if(o.async)if(o.closedChildren[d]&&o.closedChildren[d].length>0)v=o.closedChildren[d],r.hasClass("closed")&&r.removeClass("closed"),v&&(l.initDom(n,h,v),r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open"));else{if(s.children&&s.children.length>0)return void r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open");a.ajax({url:o.url,type:o.method,dataType:"json",data:{id:p},success:function(a){if(a.length>0){var e=c+1;l.initData(a,o.htmlArray,e,d,o),l.findNode(o.data,d,function(e){e.children=a}),t.initDom(n,h,o.htmlArray)}else console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空");r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")},error:function(){console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败"),r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}})}else{if(v=o.closedChildren[d]){if(o.cascadeCheck)if(0===s.checked){var f=JSON.stringify(v);f.replace(/(tree\-chk)|(tree\-halfchk)/g,function(){return"tree-nochk"}),v=JSON.parse(f)}else if(2===s.checked){var f=JSON.stringify(v);f=f.replace(/(tree\-nochk)|(tree\-halfchk)/g,function(){return"tree-chk"}),v=JSON.parse(f)}l.initDom(n,h,v)}r.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}},collapseNodes:function(a){var e=a;e[0].setAttribute("class","button-open"),e.siblings("a").children(".node-icon").removeClass("icon-folder_open").addClass("icon-folder"),e.parent("li").addClass("closed")
},selectNode:function(e,t,n){var o=this,l=t,i=a(e),r=i.data("tree").options;r.selectedNodes||(r.selectedNodes=[]);var d=r.selectedNodes,s=l.parent().prop("id"),c=o.findNode(r.data,s);if(void 0===n||null===n)if(l.hasClass("selectNode")&&r.multiSelect){if(l.removeClass("selectNode"),d.length>0){for(var p=0,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}d.splice(p,1)}}else{if(!l.hasClass("selectNode")){if(r.multiSelect||(i.find(".selectNode").eq(0).removeClass("selectNode"),d=[]),l.addClass("selectNode"),d.length>=0)for(var p=null,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}null===p&&d.push(c)}r.onSelect&&r.onSelect(c)}else if(n===!1){if(l.hasClass("selectNode")&&l.removeClass("selectNode"),d.length>0){for(var p=0,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}d.splice(p,1)}}else if(n===!0){if(r.multiSelect||(i.find(".selectNode").eq(0).removeClass("selectNode"),d=[]),l.hasClass("selectNode")||(l.addClass("selectNode"),r.onSelect&&r.onSelect(c)),d.length>=0)for(var p=null,h=0;h<d.length;h++)if(s===d[h].treeId){p=h;break}null===p&&d.push(c)}r.selectedNodes=d},checkNodes:function(e,t){var n=this,o=t,l=a(e).data("tree").options,i=(l.data,o.hasClass("tree-chk")),r=o.hasClass("tree-nochk"),d=o.hasClass("tree-halfchk");i?n.setCheckStatus(e,o,0):r?n.setCheckStatus(e,o,2):d&&n.setCheckStatus(e,o,2)},setCheckStatus:function(e,t,n){var o=this,l=a(e),i=l.data("tree").options,r=i.data,d=t,s=d.parent(),c=s.children("ul").find(".tree-chkbx"),p=s.prop("id"),h=o.findNode(r,p),v=!1,f=null;h.children&&h.children.length>0&&(v=!0),h.parentTreeId&&h.parentTreeId.length>0&&(f=h.parentTreeId);var u="";if(0===n?u="tree-nochk":1===n?u="tree-halfchk":2===n&&(u="tree-chk"),d[0].setAttribute("class","tree-chkbx "+u),o.updateCheckStatusData(r,p,n),i.cascadeCheck){if(v&&(0===n||2===n)){for(var b=0,m=c.length;m>b;b++)c[b].setAttribute("class","tree-chkbx "+u);o.updateChildCheckStatusData(r,p,n)}f&&o.cascadeCheck(r,f)}},cascadeCheck:function(e,t){var n=this,o=a("#"+t).children(".tree-chkbx"),l=n.findNode(e,t),i=l.children,r=l.parentTreeId,d=null,s=/"checked":2/.test(JSON.stringify(i)),c=/"checked":1/.test(JSON.stringify(i)),p=/"checked":0/.test(JSON.stringify(i));s?c?(o[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):p?(o[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):(o[0].setAttribute("class","tree-chkbx tree-chk"),d=2):c?(o[0].setAttribute("class","tree-chkbx tree-halfchk"),d=1):(o[0].setAttribute("class","tree-chkbx tree-nochk"),d=0),n.updateCheckStatusData(e,t,d),void 0!==r&&n.cascadeCheck(e,r)},findNode:function(a,e,t){for(var n=this,o=0;o<a.length;o++){if(a[o].treeId==e)return t?t(a[o]):a[o];if(a[o].children&&a[o].children.length>0&&n.findNode(a[o].children,e))return t?t(n.findNode(a[o].children,e)):n.findNode(a[o].children,e)}},findNodeById:function(e,t,n){for(var o=this,l=a(e).data("tree").options.nodesById,i=0;i<t.length;i++)t[i].id==n&&l.push(t[i]),t[i].children&&t[i].children.length>0&&o.findNodeById(e,t[i].children,n)},findNodeByFilter:function(e,t,n){for(var o=this,l=a(e).data("tree").options,i=0;i<t.length;i++)n(t[i])&&l.nodesFilter.push(t[i]),t[i].children&&t[i].children.length>0&&o.findNodeByFilter(e,t[i].children,n)},removeNodeById:function(a,e,t){for(var n=this,o=0;o<e.length;o++){if(e[o].treeId==t){e.splice(o,1);break}e[o].children&&e[o].children.length>0&&n.removeNodeById(a,e[o].children,t)}},tranverseNode:function(e,t){for(var n=this,o=a(e).data("tree").options,l=0;l<t.length;l++)0==t[l].checked?o.uncheckedNodes.push(t[l]):1==t[l].checked?o.indeterminateNodes.push(t[l]):2==t[l].checked&&o.checkedNodes.push(t[l]),t[l].children&&t[l].children.length>0&&n.tranverseNode(e,t[l].children)},updateChildCheckStatusData:function(a,e,t){var n=this;n.findNode(a,e,function(a){if(a&&a.children&&a.children.length>0){var e=JSON.stringify(a.children);e=e.replace(/"checked":[0|1|2]/g,function(){return'"checked":'+t}),a.children=JSON.parse(e)}})},updateCheckStatusData:function(a,e,t){var n=this;n.findNode(a,e,function(a){a&&(a.checked=t)})}};a.fn.tree=function(e,n){return"string"==typeof e?a.fn.tree.methods[e](this,n):void a.each(this,function(){var n={};a.extend(n,a.fn.tree.defaults),a.extend(n,e);var o=a(this).data("tree"),l={htmlArray:[],closedChildren:{}};a.extend(n,l),a(this).data("tree",{options:n}),o||t.init(this),a(this).data("tree").options.url?t.remoteData(this):"data"in a(this).data("tree").options&&a(this).data("tree").options.data.length>0&&t.loadLocalData(this)})},a.fn.tree.defaults={url:"",method:"GET",data:[],checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,async:!1,onSelect:null,multiSelect:!1,onCheck:null,onExpand:null,onCollapse:null,onLoadSuccess:null,onLoadError:null,queryParams:{},loadFilter:null},a.fn.tree.methods={find:function(e,n){a(e).data("tree").options.nodesById=[];var o=a(e).data("tree").options.data;return t.findNodeById(e,o,n),a(e).data("tree").options.nodesById},check:function(e,n){var o=a("#"+n).children(".tree-chkbx"),l=a(e).data("tree").options;if(t.setCheckStatus(e,o,2),l.onCheck){var i=t.findNode(l.data,n);l.onCheck(i)}},uncheck:function(e,n){var o=a("#"+n).children(".tree-chkbx");t.setCheckStatus(e,o,0)},select:function(e,n){var o=a("#"+n).children("a");t.selectNode(e,o,!0)},unSelect:function(e,n){var o=a("#"+n).children("a");t.selectNode(e,o,!1)},getChecked:function(e,n){var o=a(e),l=o.data("tree").options,i=l.data;l.checkedNodes=[],l.indeterminateNodes=[],l.uncheckedNodes=[],t.tranverseNode(e,i);var r={};if("object"==typeof n)for(var d=0;d<n.length;d++){var s=n[d];r[s]=l[s+"Nodes"]}else"string"==typeof n?r[n]=l[n+"Nodes"]:n||(r.checked=l.checkedNodes);return r},getSelected:function(e){var t=a(e).data("tree").options;return t.selectedNodes||(t.selectedNodes=[]),t.selectedNodes},getChildren:function(e,n){var o=a(e),l=o.data("tree").options.data,i=t.findNode(l,n);return i.children?i.children:[]},getParent:function(e,n){var o=a(e),l=o.data("tree").options.data,i=t.findNode(l,n);if(i.parentTreeId){var r=t.findNode(l,i.parentTreeId);if(r)return r}return{}},reload:function(e,n){var o=a(e).data("tree").options;o.queryParams=n?n:{},o.selectedNodes=[],o.checkedNodes=[],t.remoteData(e)},loadData:function(e,n){a(e).data("tree").options.data=n,t.loadData(e,a(e).data("tree").options.data)},getNodesByFilter:function(e,n){var o=a(e).data("tree").options;return o.nodesFilter=[],t.findNodeByFilter(e,o.data,n),o.nodesFilter},removeNode:function(e,n){a("#"+n).remove();var o=a(e).data("tree").options.data;t.removeNodeById(e,o,n)}}}(jQuery,window),!function(a){function e(){return{$container:void 0,containerHeight:0,containerWidth:0,columnNum:4,borderSize:2,boxIndex:0,pageIndex:1,pageSize:4,pageCount:1,borderType:"solid",maxCount:16,isMouseDown:!1,$box:a("<div out='true' style='position:relative;float:left;'><div style='height:20px;width:100%;'></div><div style='position:absolute;width:100%;top:20px;bottom:0;'></div></div>"),$moveBox:a("<div style='position:absolute;z-index:9;pointer-events:none;'></div>"),$focusBox:a("<div style='position:absolute;z-index:998;pointer-events:none;border:2px solid red;'></div>")}}function t(e){var t=a.data(e,"lavaVideoLayout").options,n=a.data(e,"lavaVideoLayout").custom;return n.$container=a(e),n.containerHeight=a(e).height(),n.containerWidth=a(e).width(),a(e).delegate('div[out="true"]',"click",function(){var o=a(this).height(),l=a(this).width(),i=a(this).offset(),r=a(this).attr("index");return n.$moveBox.width(l).height(o).css("top",i.top-a(e).offset().top-1).css("left",i.left-a(e).offset().left-1).show(),n.boxIndex=parseInt(r,10),t.click.call(this,r,a(this)),!1}),a(e).delegate('div[out="true"]',"dblclick",function(){if(1!=n.$container.children("div").length){var o=parseInt(a(this).attr("index"),10);if(void 0===a(this).attr("zoom")){var l=a(this).attr("style");a(this).width("99.7%").height("99.7%").attr("zoom","out").attr("oldStyle",l).siblings("div").hide(),a(this).click(),t.zoomOut.call(this,o,a(this))}else{var i=a(this).attr("oldStyle");a(this).attr("style",i).removeAttr("zoom").removeAttr("oldStyle"),a(e).lavaVideoLayout("to",a(e).data("lavaVideoLayout").custom.pageSize),a(this).click(),t.zoomIn.call(this,o,a(this))}}}),a(e).delegate('div[out="true"]',"mouseenter",function(){var e=parseInt(a(this).attr("index"),10);if(n.isMouseDown&&e!==n.boxIndex){var t=a(this).height(),o=a(this).width(),l=a(this).offset();n.$focusBox.width(o).height(t).css("top",l.top-n.borderSize).css("left",l.left-n.borderSize).show()}}),a(e).delegate('div[out="true"]',"mouseleave",function(){n.isMouseDown!=n.boxIndex&&n.$focusBox.hide()}),a(e).delegate('div[out="true"]',"mousedown",function(e){var o=parseInt(a(this).attr("index"),10);3===e.which?t.rightClick.call(this,o,a(this)):1===e.which&&o===n.boxIndex&&(n.isMouseDown=!0,t.dragStart.call(this,o,a(this)))}),a(e).delegate('div[out="true"]',"mouseup",function(){var e=parseInt(a(this).attr("index"),10);n.isMouseDown&&(n.isMouseDown=!1,n.$focusBox.hide(),a(this).click().focus(),t.dragEnd.call(this,e,a(this)))}),n.$moveBox.css("border","1px "+n.borderType+" "+t.borderColor).appendTo(a(e).parent()).hide(),n.$focusBox.appendTo(a("body")).hide(),a(e).lavaVideoLayout("to",t.defaultCount),a(e)}a.fn.lavaVideoLayout=function(n,o){return"string"==typeof n?a.fn.lavaVideoLayout.methods[n](this,o):(n=n||{},this.each(function(){var o=a.data(this,"lavaVideoLayout");o?a.extend(o.options,n):(a.data(this,"lavaVideoLayout",{options:a.extend({},a.fn.lavaVideoLayout.defaults,n),custom:e()}),a(this).data("lavaVideoLayout").custom.maxCount=n.maxLayout),t(this)}))},a.fn.lavaVideoLayout.methods={options:function(e){return a.data(e[0],"lavaVideoLayout").options},addTool:function(a,e){var t=a.lavaVideoLayout("getItem",e.index),n=t.children("div").eq(0);n.append(e.el)},addContent:function(a,e){var t=a.lavaVideoLayout("getItem",e.index),n=t.children("div").eq(1);n.append(e.el)},getTitlePanel:function(a,e){var t=a.lavaVideoLayout("getItem",e);return null==t?null:t.children("div").eq(0)},getContentPanel:function(a,e){var t=a.lavaVideoLayout("getItem",e);return null==t?null:t.children("div").eq(1)},getItem:function(e,t){var n=a.data(e[0],"lavaVideoLayout").custom,o=n.$container.children("div"),l=null;return t=parseInt(t,10),a.each(o,function(e,n){var o=parseInt(a(this).attr("index"),10);t===o&&(l=a(n))}),l},getSelectedIndex:function(e){var t=a.data(e[0],"lavaVideoLayout").custom;return t.boxIndex},setSelectedIndex:function(e,t){a(e).data("lavaVideoLayout").custom.boxIndex=t,a(e).data("lavaVideoLayout").custom.pageSize=1},pre:function(e){var t=a.data(e[0],"lavaVideoLayout").custom;t.pageIndex>1&&(t.pageIndex--,to(t.pageSize))},next:function(e){var t=a.data(e[0],"lavaVideoLayout").custom;t.pageIndex<t.maxCount&&(t.pageIndex++,to(t.pageSize))},hideSelectedBorder:function(e){var t=a.data(e[0],"lavaVideoLayout").custom;t.$moveBox.hide()},getCount:function(e){var t=a.data(e[0],"lavaVideoLayout").custom,n=t.$container.children("div");return n.length},resize:function(e){var t=a.data(e[0],"lavaVideoLayout").custom;t.containerHeight=t.$container.height(),t.containerWidth=t.$container.width(),e.lavaVideoLayout("to",t.pageSize)},to:function(e,t,n){var o=a.data(e[0],"lavaVideoLayout").options,l=a.data(e[0],"lavaVideoLayout").custom,i=l.$container.children("div"),r=i.length;n&&(l.boxIndex=1),l.pageSize=t,l.pageCount=Math.ceil((r>t?r:t)/l.pageSize),l.pageIndex=Math.ceil((0===l.boxIndex?l.pageSize:l.boxIndex)/l.pageSize);var d=l.pageSize*l.pageCount;d=d>l.maxCount?l.maxCount:d;for(var s=0;d>s;s++)if(i.eq(s).length>0&&(s<(l.pageIndex-1)*l.pageSize||s>=l.pageIndex*l.pageSize))i.eq(s).hide();else if(i.eq(s).length>0&&s>=(l.pageIndex-1)*l.pageSize&&s<l.pageIndex*l.pageSize)i.eq(s).show();else if(0==i.eq(s).length&&s>=(l.pageIndex-1)*l.pageSize&&s<l.pageIndex*l.pageSize){var c=l.$box.css({background:o.bgColor,marginTop:l.borderSize,marginLeft:l.borderSize}),p=c.clone().attr("index",s+1);l.$container.append(p),o.addComplete(s+1,p)}a(".lp-layout.selected").removeClass("selected"),a(".lp-layout"+t).addClass("selected");var h,v,f,u,b,m;l.$container.width(),h="99.66%",v="49.66%",f="32.996%",u="66.05%",b="24.662%",m="49.66%",a.each(l.$container.children("div"),function(e,n){var o=0,i=0;if(e>=(l.pageIndex-1)*l.pageSize&&e<l.pageIndex*l.pageSize){switch(e-=(l.pageIndex-1)*l.pageSize,t){case 1:o=h,i=h;break;case 2:o=h,i=v;break;case 3:0==e?(o=h,i=v):(o=v,i=v);break;case 4:o=v,i=v;break;case 6:0==e?(o=u,i=u):(o=f,i=f);break;case 9:o=f,i=f;break;case 10:2>e?(o=v,i=v):(o=b,i=b);break;case 12:o=f,i=b;break;case 16:o=b,i=b;break;case 25:o="19.59%",i="19.59%";break;case 36:o="16.26%",i="16.26%";break;case 64:o="12.12%",i="12.12%"}a(n).css({width:i,height:o});var e=a(this).attr("index");e=parseInt(e,10),e===l.boxIndex&&a(n).click()}})}},a.fn.lavaVideoLayout.defaults={defaultCount:4,layout:"square",bgColor:"black",borderColor:"rgb(68,176,44)",addComplete:function(){},removeComplete:function(){},zoomIn:function(){},zoomOut:function(){},click:function(){},rightClick:function(){},dragStart:function(){},dragEnd:function(){},resize:function(){},onBeforeRemove:function(){}}}(jQuery);