!function(a){var c={init:function(c){var v=a(c).css({paddingRight:20}),h=v.parent();h.css({position:"relative"});var g=a("<div class='timespinner-add'></div>").appendTo(h),S=a("<div class='timespinner-minus'></div>").appendTo(h),w=(v.innerHeight()/2,20);g.css({height:"45%",width:w}),S.css({height:"45%",width:w}),v.data("timespinner").add=g,v.data("timespinner").minus=S,this.initEvent(c)},initEvent:function(c){var v=this,h=a(c),g=h.data("timespinner").options,S=h.data("timespinner").add,w=h.data("timespinner").minus;h.on("click blur",function(e){if("click"==e.type){var a=v.getCursorIndex(c);if(1>a||a%3==0)return;if(a%3==1)var S=a-1;else if(a%3==2)var S=a-2;var w=S+2;g.start=S,g.end=w,v.setSelection(c,S,w)}else{var C=h.val(),D=v.formatData(h.val(),g.showSeconds,g.separator);h.val(D),g.onChange&&g.onChange(C,D)}}),S.on("click",function(){if(!h.attr("disabled")){var a=h.val(),S=new Date("2000/01/01 "+a).getTime();0==g.start?S+=36e5:3==g.start?S+=6e4:6==g.start&&(S+=1e3);var w=new Date(S),C=h.val(),a=v.formatData(w.getHours()+g.separator+w.getMinutes()+g.separator+w.getSeconds(),g.showSeconds,g.separator);h.val(a),h.focus(),v.setSelection(c,g.start,g.end),g.onChange&&g.onChange(C,a)}}),w.on("click",function(){if(!h.attr("disabled")){var a=h.val(),S=new Date("2000/01/01 "+a).getTime();0==g.start?S-=36e5:3==g.start?S-=6e4:6==g.start&&(S-=1e3);var w=new Date(S),C=h.val(),a=v.formatData(w.getHours()+g.separator+w.getMinutes()+g.separator+w.getSeconds(),g.showSeconds,g.separator);h.val(a),h.focus(),v.setSelection(c,g.start,g.end),g.onChange&&g.onChange(C,a)}})},getCursorIndex:function(a){var c=-1;if(a.selectionStart)c=a.selectionStart;else if(document.selection){var v=document.selection.createRange();v.moveStart("character",-a.value.length),c=v.text.length}return c},setSelection:function(a,c,v){if(a.createTextRange){var h=a.createTextRange();h.collapse(!0),h.moveEnd("character",v),h.moveStart("character",c),h.select()}else a.setSelectionRange&&a.setSelectionRange(c,v)},formatData:function(a,c,v){var h=this,g=null;if(a){var S=a.split(v),w=h.round(parseInt(S[0]),24),m=h.round(parseInt(S[1]),60),s=h.round(parseInt(S[2]),60);g=c?w+v+m+v+s:w+v+m}else g="";return g},round:function(a,c){var v=null;return v=a&&0/0!==a?a%c+"":"00",1==v.length?"0"+v:v},setValue:function(c,v){var h=this,g=a(c),S=g.data("timespinner").options,v=h.formatData(v,S.showSeconds,S.separator);g.val(v)}};a.fn.timespinner=function(v,h){return"string"==typeof v?a.fn.timespinner.methods[v](this,h):void a.each(this,function(){var h={};a.extend(h,a.fn.timespinner.defaults),a.extend(h,v),a(this).data("timespinner",{options:h}),c.init(this)})},a.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},a.fn.timespinner.methods={setValue:function(a,v){c.setValue(a,v)}}}(jQuery);