;/*!plugins/lava/js/calendar.js*/
var lavaCalendar={init:function(a){var c=this,v=$(a),h=v.data("calendar").options,g=$.fn.lavaCalendar.locales[h.lang];v.hasClass("lava-calendar")?v.html(""):v.addClass("lava-calendar");for(var _=$("<div class='lava-calendar-header' style='background:"+h.color+";'></div>").appendTo(v),D=($("<div class='lava-calendar-prevyear'>«</div>").appendTo(_),$("<div class='lava-calendar-nextyear'>»</div>").appendTo(_),$("<div class='lava-calendar-prevmonth'><</div>").appendTo(_),$("<div class='lava-calendar-nextmonth'>></div>").appendTo(_),$("<span class='lava-calendar-text'></span>").appendTo(_),$("<table class='lava-calendar-table'></table>").appendTo(v)),b=$("<thead class='lava-calendar-thead'></thead>").appendTo(D),y=$("<tbody class='lava-calendar-tbody'></tbody>").appendTo(D),C=["<tr>"],i=0;7>i;i++)C.push("<th style='color:"+h.color+";'>"+g[i]+"</th>");C.push("</tr>");for(var M=[],i=0;6>i;i++){for(var k=["<tr>"],T=0;7>T;T++)k.push("<td></td>");k.push("</tr>"),M.push(k.join(""))}b.html(C.join("")),y.html(M.join(""));for(var w=$("<div class='lava-calendar-menu hidden'></div>").appendTo(v),Y=$("<div class='lava-calendar-menu-year'></div>").appendTo(w),S=($("<div class='lava-calendar-prevyear-inner'>«</div>").appendTo(Y),$("<span><input class='lava-calendar-menu-year-input'/></span>").appendTo(Y),$("<div class='lava-calendar-nextyear-inner'>»</div>").appendTo(Y),$("<div class='lava-calendar-menu-month'></div>").appendTo(w)),F=$("<table></table>").appendTo(S),O=$("<tbody></tbody>").appendTo(F),A=[],i=1;13>i;i++){var J="";(0===i||i%4===1)&&(J+="<tr>"),J=J+"<td data-month='"+i+"'>"+g[i+6]+"</td>",0!==i&&i%4===0&&(J+="</tr>"),A.push(J)}$(A.join("")).appendTo(O),c.loadDate(a),c.resize(a)},loadDate:function(a){var c=this,v=$(a),h=v.data("calendar").options,g=h.currentDate;g.setDate(1);var _=h.currentDate.getFullYear(),D=h.currentDate.getMonth();v.find(".lava-calendar-header span").text($("td[data-month='"+(D+1)+"']").eq(0).text()+" "+_);var b=v.find(".lava-calendar-table").find("td"),y=g.getDay(),C=new Date(g.getTime());C.setMonth(D+1),C.setTime(C.getTime()-864e5);var M=C.getDate();b.text("").removeAttr("data-date").removeAttr("class");for(var i=0;M>i;i++)b.eq(i+y).text(i+1).attr("data-date",_+"/"+(D+1)+"/"+(i+1));if(h.showOtherDate){for(var k=new Date(g.getTime()-864e5),T=k.getDate(),_=k.getFullYear(),D=k.getMonth(),i=0;y>i;i++){var w=T-y+i+1;b.eq(i).text(w).attr("data-date",_+"/"+(D+1)+"/"+w).addClass("other")}var Y=new Date(g.getTime());Y.setMonth(D+2);for(var _=Y.getFullYear(),D=Y.getMonth(),i=0;42-y-M>i;i++)b.eq(y+M+i).text(i+1).attr("data-date",_+"/"+(D+1)+"/"+(i+1)).addClass("other")}if(h.data&&c.loadData(a),h.date){var w=h.date;v.find(".lava-calendar-table").find("td[data-date='"+w.getFullYear()+"/"+(w.getMonth()+1)+"/"+w.getDate()+"']").addClass("active")}h.onLoadDateSuccess&&h.onLoadDateSuccess()},loadData:function(a){var c=$(a),v=c.data("calendar").options,h=v.data,g=c.children("table").find("td");g.css({background:"transparent"}),g.prop("class","").removeAttr("data-type").removeAttr("data-blackbox").children().remove();for(var i=0;i<g.length;i++){var _=g.eq(i).attr("data-date");if(_)for(var D=_.split("/")[0],b=_.split("/")[1],y=_.split("/")[2],C=0;C<h.length;C++){var M=h[C].date;if(M.getFullYear()==D&&M.getMonth()+1==b&&M.getDate()==y){"normal"==h[C].type?g.eq(i).addClass("lava-calendar-normal").attr("data-type","normal").css({background:v.normalColor}):"alarm"==h[C].type?g.eq(i).addClass("lava-calendar-alarm").attr("data-type","alarm").css({background:v.alarmColor}):"warn"==h[C].type&&g.eq(i).addClass("lava-calendar-alarm").attr("data-type","warn").css({background:v.warnColor}),h[C].blackbox&&g.eq(i).append("<div class='lava-calendar-blackbox'></div>").attr("data-blackbox",!0),h[C].device&&g.eq(i).append("<div class='lava-calendar-device'></div>"),h[C].server&&g.eq(i).append("<div class='lava-calendar-server'></div>");break}}}},gotoMonthOrYear:function(a,c,v){var h=this,g=$(a),_=g.data("calendar").options;if("month"===c){var D=_.currentDate.getMonth();_.currentDate.setMonth("next"==v?D+1:D-1)}else if("year"===c){var b=_.currentDate.getFullYear();_.currentDate.setYear("next"==v?b+1:b-1)}if(h.loadDate(a),_.onMonthChange){var y=_.currentDate,C=new Date(y.getFullYear()+"/"+h.round(y.getMonth()+1)+"/"+h.round(y.getDate())+" 00:00:00"),M=new Date(C.getTime());M.setMonth(M.getMonth()+1),M.setTime(M.getTime()-1),_.onMonthChange(C,M)}},resize:function(a){var c=$(a),v=.6*c.width()/6;c.find(".lava-calendar-table").find("td").css({height:v})},round:function(a){return 10>a?"0"+a:a},bindEvent:function(a){var c=this,v=$(a),h=v.data("calendar").options;v.on("selectstart",function(){return!1}),v.find(".lava-calendar-prevyear").on("click",function(){c.gotoMonthOrYear(a,"year","prev")}),v.find(".lava-calendar-nextyear").on("click",function(){c.gotoMonthOrYear(a,"year","next")}),v.find(".lava-calendar-prevyear-inner").on("click",function(){v.find(".lava-calendar-menu-year-input").val(parseInt(v.find(".lava-calendar-menu-year-input").val())-1)}),v.find(".lava-calendar-nextyear-inner").on("click",function(){v.find(".lava-calendar-menu-year-input").val(parseInt(v.find(".lava-calendar-menu-year-input").val())+1)}),v.find(".lava-calendar-prevmonth").on("click",function(){c.gotoMonthOrYear(a,"month","prev")}),v.find(".lava-calendar-nextmonth").on("click",function(){c.gotoMonthOrYear(a,"month","next")}),v.children("table").find("td").on("click dblclick",function(e){v.find("td").children(".lava-calendar-active").remove();var g=$(this),_=g.width()+2,D=g.height()+2;if(g.append("<div class='lava-calendar-active' style='width:"+_+"px;height:"+D+"px;'></div>"),"click"==e.type&&h.onClick&&g.attr("data-date")){var b={date:new Date(g.attr("data-date")),type:g.attr("data-type"),blackbox:g.attr("data-blackbox")};h.date=b.date,h.onClick(b)}if("dblclick"==e.type&&h.onDblclick&&g.attr("data-date")){var b={date:new Date(g.attr("data-date")),type:g.attr("data-type"),blackbox:g.attr("data-blackbox")};h.date=b.date,h.onDblclick(b)}g.hasClass("active")||(v.find(".active").removeClass("active"),g.addClass("active")),g.hasClass("other")&&(h.currentDate=new Date(g.attr("data-date")),c.loadDate(a))}),v.find(".lava-calendar-header span").on("mouseover mouseout click",function(e){var g=$(e.target);"mouseout"==e.type?$(e.target).removeClass("lava-calendar-nav-hover"):"mouseover"==e.type?g.hasClass("lava-calendar-nav-hover")||$(e.target).addClass("lava-calendar-nav-hover"):"click"==e.type&&(v.find(".lava-calendar-menu").is(":visible")?(v.find(".lava-calendar-menu").hide(),c.gotoMonthOrYear(a,"monthyear",v.find(".lava-calendar-text").text())):(v.find(".lava-calendar-menu-year-input").val(v.find(".lava-calendar-text").text().split(" ")[1]),v.find(".lava-calendar-menu-month").find("td[data-month='"+(h.currentDate.getMonth()+1)+"']").click(),v.find(".lava-calendar-menu").show())),e.stopPropagation()}),v.find(".lava-calendar-menu-month").find("td").on("click",function(e){{var v=$(e.target),h=$(a),g=h.data("calendar").options,_=c.round(v.attr("data-month"));v.text()}if(h.find(".lava-calendar-selected-month").removeClass("lava-calendar-selected-month"),v.hasClass("lava-calendar-selected-month")||v.addClass("lava-calendar-selected-month"),h.find(".lava-calendar-menu-year-input").val())var D=parseInt(h.find(".lava-calendar-menu-year-input").val());else var D=h.find(".lava-calendar-text").text().split(" ")[1];g.currentDate.setYear(parseInt(D)),g.currentDate.setMonth(parseInt(_)-1),c.gotoMonthOrYear(a,"monthyear",h.find(".lava-calendar-text").text()),h.find(".lava-calendar-menu").hide(),e.stopPropagation()})},select:function(a,c){var v=this,h=$(a),g=h.data("calendar").options;g.date=c,g.currentDate=new Date(c.getFullYear()+"/"+(c.getMonth()+1)+"/1"),v.loadDate(a),h.find(".active").removeClass("active");var _=c.getFullYear()+"/"+(c.getMonth()+1)+"/"+c.getDate(),D=h.find("td[data-date='"+_+"']");D.addClass("active")}};$.fn.lavaCalendar=function(a,c){return"string"==typeof a?$.fn.lavaCalendar.methods[a](this,c):void $.each(this,function(){{var c={};$(this).data("calendar")}$.extend(c,$.fn.lavaCalendar.defaults),$(this).data("calendar",{options:c}),$.extend($(this).data("calendar").options,a),$.extend($.fn.lavaCalendar.locales,$(this).data("calendar").options.weekMonth),lavaCalendar.init(this),lavaCalendar.bindEvent(this),a.data&&lavaCalendar.loadData(this)})},$.fn.lavaCalendar.defaults={lang:"zh-CN",alarmColor:"#e26a6a",normalColor:"#26c281",warnColor:"#b1b323",currentDate:new Date,weekMonth:{},showOtherDate:!1,onClick:null,onDblclick:null,onMonthChange:null,onLoadDateSuccess:null},$.fn.lavaCalendar.methods={loadData:function(a,c){$(a).data("calendar").options.data=c,lavaCalendar.loadData(a)},getDate:function(a){return $(a).data("calendar").options.currentDate},getSelected:function(a){return $(a).data("calendar").options.date},select:function(a,c){lavaCalendar.select(a,c)},unselect:function(a){var c=$(a);c.data("calendar").options.date=null,c.find(".active").removeClass("active")}},$.fn.lavaCalendar.locales={"zh-CN":["日","一","二","三","四","五","六","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],"zh-TW":["日","一","二","三","四","五","六","一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],ar:"ح_ن_ث_ر_خ_ج_س".split("_"),bo:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),de:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),"en-gb":["Su","Mo","Tu","We","Th","Fr","Sa","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"en-US":["Su","Mo","Tu","We","Th","Fr","Sa","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fr:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),it:"D_L_Ma_Me_G_V_S".split("_"),ja:"日_月_火_水_木_金_土".split("_"),ru:"вс_пн_вт_ср_чт_пт_сб".split("_"),"pt-PT":"7_1_2_3_4_5_6".split("_"),fa:"S_M_T_W_T_F_S".split("_")};
;/*!plugins/lava/js/combo.js*/
!function(a){var c={init:function(c,h){var b=this,v=a(c),g=v.data("combo").options;if(h){var w=a("<span class='lavaui-combo-container'></span>");v.after(w),w.append(v)}else{var w=v.parent();w.children(".lavaui-combo-panel").remove()}var W=a("<div class='lavaui-combo-panel'></div>").appendTo(w),k=g.panelWidth?g.panelWidth:v.innerWidth();if(W.css({width:k,height:g.panelHeight}),"top"===g.panelLocation&&(W.addClass("top"),W.css({top:-(g.panelHeight+3)})),v.data("combo").panel=W,v.parent().children(".lavaui-combo-triangle")&&v.parent().children(".lavaui-combo-triangle").remove(),g.showArrow){a("<span class='lavaui-combo-triangle'></span>").appendTo(w).css({top:v.innerHeight()/2-3})}b.initEvent(c),g.editable||v.prop("readonly",!0),g.disabled&&v.prop("disabled",!0)},initEvent:function(c){var h=a(c),b=h.data("combo").options,v=h.data("combo").panel,g=h.siblings(".lavaui-combo-triangle");h.on("click",function(e){b.disabled||h.attr("disabled")||(v.is(":visible")?v.hide():(null==b.panelWidth&&v.css("width",h.innerWidth()),v.show())),e.stopPropagation()}),b.showArrow&&g.on("click",function(e){b.disabled||h.attr("disabled")||(v.is(":visible")?v.hide():(null==b.panelWidth&&v.css("width",h.innerWidth()),v.show())),e.stopPropagation()}),v.on("click",function(e){e.stopPropagation()}),a(document).on("click",function(){v.hide()}),a("body").delegate(".modal-dialog","click",function(){v.hide()})}};a.fn.combo=function(h,b){return"string"==typeof h?a.fn.combo.methods[h](this,b):void a.each(this,function(){var b=!0;a(this).data("combo")&&a(this).data("combo").panel&&(b=!1);var v={};a.extend(v,a.fn.combo.defaults),a.extend(v,h),b?a(this).data("combo",{options:v}):a(this).data("combo").options=v,c.init(this,b)})},a.fn.combo.defaults={panelHeight:150,panelWidth:null,editable:!0,showArrow:!0,disabled:!1,panelLocation:"bottom"},a.fn.combo.methods={options:function(c){return a(c).data("combo").options},panel:function(c){return a(c).data("combo").panel}}}(jQuery,window);
;/*!plugins/lava/js/combobox.js*/
!function(a){var c={init:function(c){var v=this,b=a(c),h=b.data("combobox").options;b.combo(h);var g=b.data("combo").panel.addClass("list-group").css({overflow:"auto"});b.data("combobox").panel=g,h.url?v.remoteData(b,h,g):h.data&&v.loadData(b,h,g),v.initEvent(b,h,g)},loadData:function(a,c,v,b){for(var h=c.data,g=[],V=a.val(),i=0;i<h.length;i++)(!b||b(V,h[i]))&&g.push("<a href='javascript:;' class='list-group-item' data-value='"+h[i][c.valueField]+"'>"+h[i][c.textField]+"</a>");v.html(g.join("")),c.onLoadSuccess&&c.onLoadSuccess()},remoteData:function(c,v,b){var h=this;a.ajax({url:v.url,type:v.method,dataType:"json",data:v.formData,success:function(a){v.loadFilter&&(a=v.loadFilter(a)),v.data=a,h.loadData(c,v,b)}})},initEvent:function(c,v,b){var h=this;b.delegate(".list-group-item","click",function(){var g=a(this),V=g.attr("data-value");v.multiple?(g.hasClass("active")?(g.removeClass("active"),h.setValue(c,v,V,!1),v.onUnselect&&v.onUnselect(h.getItemByValue(v.data,V,v.valueField))):(g.addClass("active"),h.setValue(c,v,V,!0),v.onSelect&&v.onSelect(h.getItemByValue(v.data,V,v.valueField))),h.setInputValue(c,v.values,v.textField)):(g.hasClass("active")||(b.find(".active").removeClass("active"),g.addClass("active"),h.setValue(c,v,V),v.onSelect&&v.onSelect(h.getItemByValue(v.data,V,v.valueField))),b.hide())}),"local"==v.mode&&v.filter?c.on("keyup",function(){v.value=null,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){h.loadData(c,v,b,v.filter)},200)}):"remote"==v.mode&&v.loader&&c.on("keyup",function(){v.values={},c.timer&&clearTimeout(c.timer),c.timer=setTimeout(function(){v.loader({q:c.val()},function(a){v.data=a,h.loadData(c,v,b)},function(){console.log&&console.log("loader: load err.")})},200)})},setValue:function(a,c,v,b){var h=this,g=(c.data,c.values),V=h.getItemByValue(c.data,v,c.valueField);void 0==b?(c.value=v,a.val(V?V[c.textField]:"")):1==b?g[v]=V?V[c.textField]:"":delete g[v]},getItemByValue:function(a,c,v){for(var i=0;i<a.length;i++)if(a[i][v]==c)return a[i];return null},setInputValue:function(a,c){var v=[];for(var i in c)v.push(c[i]);a.val(v.join(","))},setValues:function(c,v){var b=a(c),h=b.data("combobox").options,g=this;h.values={};for(var i=0;i<v.length;i++){var V=g.getItemByValue(h.data,v[i],h.valueField);h.values[v[i]]=V?V[h.textField]:""}g.setInputValue(b,h.values,h.textField)}};a.fn.combobox=function(v,b){return"string"==typeof v?a.fn.combobox.methods[v](this,b):void a.each(this,function(){var b={};a.extend(b,a.fn.combo.defaults),a.extend(b,a.fn.combobox.defaults),a.extend(b,v),a(this).data("combobox",{options:b}),c.init(this)})},a.fn.combobox.defaults={url:null,method:"get",valueField:"id",textField:"text",multiple:!1,panelHeight:250,value:null,values:{},mode:"local",filter:null,formData:{},onSelect:null,onLoadSucces:null},a.fn.combobox.methods={getValue:function(c){return a(c).data("combobox").options.value},getValues:function(c){var v=a(c).data("combobox").options.values,b=[];for(var i in v)b.push(i);return b},setValue:function(v,b){var h=a(v),g=h.data("combobox").options;c.setValue(h,g,b),h.data("combobox").panel.find(".active").removeClass("active"),h.data("combobox").panel.find('[data-value="'+b+'"]').addClass("active")},setValues:function(v,b){var h=a(v);c.setValues(v,b),h.data("combobox").panel.find(".active").removeClass("active");for(var i in b)h.data("combobox").panel.find('[data-value="'+b[i]+'"]').addClass("active")},reload:function(v,b){var h=a(v);b&&(h.data("combobox").options.url=b),c.remoteData(h,h.data("combobox").options,h.data("combo").panel)}}}(jQuery);
;/*!plugins/lava/js/daterange.js*/
!function(a){var c={init:function(c){var g=this,h=a(c),v=h.data("daterange"),D=v.options;h.combo({editable:D.editable,panelWidth:160,panelHeight:"auto",showArrow:!1});var y=h.combo("panel").addClass("daterange-dropdown");if(!D.locales.separator&&D.lang&&(D.locales=a.fn.daterange.lang[D.lang]),D.ranges){var C=[],T=D.ranges;for(var i in T)C.push("<a href='javascript:;' class='btn outline daterange-range' data-start='"+T[i][0]+"' data-end='"+T[i][1]+"'>"+i+"</a>");C.push("<a href='javascript:;' class='btn outline daterange-range custom'>"+D.locales.customRange+"</a>"),C.push("<a href='javascript:;' class='btn success apply'>"+D.locales.apply+"</a>"),C.push("<a href='javascript:;' class='btn outline warning cancel'>"+D.locales.cancel+"</a>");var w=a("<div class='daterange-btn-container'></div>");w.html(C.join("")),y.append(w)}var b=a("<div class='datecontainer'><div class='form-group'></div><div class='form-group'></div></div>").appendTo(y),M=a("<input type='text' class='form-control'>").appendTo(b.children().eq(0)),S=a("<input type='text' class='form-control'>").appendTo(b.children().eq(1));g.initDateBox(h,D,M,S),g.initEvent(h,D,y,M,S)},initDateBox:function(a,c,g,h){g.datetimebox({showTime:c.showTime,format:c.format,panelWidth:220,lang:a.data("daterange").options.lang,onLoadDateSuccess:c.onLoadDateSuccess,onMonthChange:c.onMonthChange}),h.datetimebox({showTime:c.showTime,format:c.format,panelWidth:220,lang:a.data("daterange").options.lang,onLoadDateSuccess:c.onLoadDateSuccess,onMonthChange:c.onMonthChange})},initEvent:function(c,g,h,v,D){var y=this,C=h.find(".datecontainer"),T=h.find(".daterange-range"),w=h.find(".apply"),b=h.find(".cancel");T.on("click",function(){var T=a(this);if(T.hasClass("custom")){C.show(),h.css({width:610});var w=c.val();w&&(v.datetimebox("setValue",w.split(" "+g.locales.separator+" ")[0]),D.datetimebox("setValue",w.split(" "+g.locales.separator+" ")[1]))}else{var b=parseInt(T.attr("data-start")),M=parseInt(T.attr("data-end")),S=new Date((new Date).getTime()+864e5*b),R=new Date((new Date).getTime()+864e5*M),k=y.formatDate(S,g.format.split(" ")[0]),j=y.formatDate(R,g.format.split(" ")[0]);g.showTime&&(k+=" 00:00:00",j+=" 23:59:59");var E=c.val();c.val(k+" "+g.locales.separator+" "+j),g.onChange&&g.onChange(E,k+" "+g.locales.separator+" "+j),g.startDate=S,g.endDate=R,g.type="range",h.hide(),T.hasClass("outline")&&(h.find(".daterange-range").addClass("outline"),T.removeClass("outline")),g.startDate=k,g.endDate=j}}),w.on("click",function(){if(v.is(":visible")){var a=v.val(),y=D.val();if(a>y||!a||!y)return;var C=c.val();c.val(a+" "+g.locales.separator+" "+y),g.onChange&&g.onChange(C,a+" "+g.locales.separator+" "+y),h.find(".daterange-range").addClass("outline"),h.find(".custom").removeClass("outline"),g.startDate=a,g.endDate=y}g.type="custom",h.hide()}),b.on("click",function(){h.hide()}),c.on("click",function(){"custom"!=g.type?(h.css({width:160}),C.hide()):(T.addClass("outline"),h.find(".custom").removeClass("outline").click())})},formatDate:function(a,c){var g=this,h=a.getFullYear(),v=a.getMonth()+1,D=a.getDate();return c.replace("yyyy",h).replace("MM",g.round(v)).replace("dd",g.round(D))},round:function(a){return 10>a?"0"+a:a},setStartTime:function(c,g){var h=a(c),v=h.data("daterange").options;v.startDate=g,v.endDate&&h.val(g+" "+v.locales.separator+" "+v.endDate),v.type="custom"},setEndTime:function(c,g){var h=a(c),v=h.data("daterange").options;v.endDate=g,v.startDate&&h.val(v.startDate+" "+v.locales.separator+" "+g),v.type="custom"},clear:function(c){var g=a(c),h=g.data("daterange").options;h.startDate="",h.endDate="",g.val("")}};a.fn.daterange=function(g,h){return"string"==typeof g?a.fn.daterange.methods[g](this,h):void a.each(this,function(){var h={};a.extend(h,a.fn.combo.defaults),a.extend(h,a.fn.lavaCalendar.defaults),a.extend(h,a.fn.datetimebox.defaults),a.extend(h,a.fn.daterange.defaults),h.showTime&&a.extend(h,a.fn.timespinner.defaults),a.extend(h,g),a(this).data("daterange",{options:h}),a.extend(a.fn.lavaCalendar.locales,a(this).data("daterange").options.weekMonth),c.init(this)})},a.fn.daterange.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,panelHeight:"auto",editable:!0,startDate:"",endDate:"",weekMonth:{},locales:{},lang:"en-US",onLoadDateSuccess:null,onChange:null},a.fn.daterange.methods={setStartTime:function(a,g){c.setStartTime(a,g)},setEndTime:function(a,g){c.setEndTime(a,g)},getStartTime:function(c){return a(c).data("daterange").options.startDate},getEndTime:function(c){return a(c).data("daterange").options.endDate},clear:function(a){c.clear(a)}},a.fn.daterange.lang={"en-US":{separator:"to",apply:"apply",cancel:"cancel",customRange:"custom range"},"zh-CN":{separator:"至",apply:"应用",cancel:"取消",customRange:"自定义范围"},"zh-TW":{separator:"至",apply:"應用",cancel:"取消",customRange:"自定義範圍"},"pt-PT":{separator:"para",apply:"Aplicação",cancel:"Cancelar",customRange:"Escala personalizada"},af:{separator:"tot",apply:"toepassing",cancel:"Canceled",customRange:"Aangepast bereik"},fr:{separator:"à",apply:"appliquer",cancel:"annulé",customRange:"Gamme personnalisée"},jp:{separator:"に",apply:"適用する",cancel:"キャンセル",customRange:"カスタムレンジ"},ar:{separator:"إلى",apply:"تطبق",cancel:"إلغاء",customRange:"نطاق مخصص"}}}(jQuery);
;/*!plugins/lava/js/datetimebox.js*/
!function(a){var c={init:function(a){var c=this;c.initDom(a)},initDom:function(c){var h=this,v=a(c),g=v.data("datetimebox").options;v.combo(g);var b=v.combo("panel"),C=a("<div class='datetimebox-container'></div>").appendTo(b),w={showOtherDate:!0,onClick:function(){var a=v.val();h.formatDate(v,C,v.data("datetimebox").timespinner,g),g.onChange&&g.onChange(a,v.val())},lang:g.lang?g.lang:"zh-CN",onLoadDateSuccess:g.onLoadDateSuccess,onMonthChange:g.onMonthChange};if(C.lavaCalendar(w),v.data("datetimebox").calendar=C,g.showTime){var D=a("<div class='form-group' style='margin:5px;'></div>").appendTo(b),y=a("<input type='text' class='form-control' />").appendTo(D),M={showSeconds:/ss/.test(g.format),onChange:function(){var a=v.val();h.formatDate(v,C,y,g),g.onChange&&g.onChange(a,v.val())}};y.timespinner(M),v.data("datetimebox").timespinner=y}g.showIcon&&v.after("<span class='datetimebox-icon'></span>"),h.initEvent(v,C,v.data("datetimebox").timespinner,g)},initEvent:function(a,c,h,v){var g=this;a.on("blur",function(){var b=a.val();if(""!=b){h&&b.split("")[1]&&h.timespinner("setValue",b.split(" ")[1]);var C=b.split(" ")[0].replace(/-/g,"/");if(isNaN(new Date(C).getFullYear()))var w=new Date;else var w=new Date(C);c.lavaCalendar("select",w),g.formatDate(a,c,h,v)}}),v.showIcon&&a.next(".datetimebox-icon").on("click",function(e){a.click(),e.stopPropagation()})},formatDate:function(a,c,h,v){var g=this,b=c.lavaCalendar("getSelected");b||(b=new Date,c.lavaCalendar("select",b));var C=b.getFullYear(),w=g.round(b.getMonth()+1),D=g.round(b.getDate()),y=v.format.split(" ")[0].replace("yyyy",C).replace("MM",w).replace("dd",D);if(h&&!h.val()){var M=new Date,S=v.format.split(" ")[1].replace("hh",g.round(M.getHours())).replace("mm",g.round(M.getMinutes())).replace("ss",g.round(M.getSeconds()));h.val(S)}y=h?y+" "+h.val():y,a.val(y)},round:function(a){return 10>a?"0"+a:a},setValue:function(c,h){var v=this,g=a(c),b=g.data("datetimebox"),C=b.calendar,w=b.timespinner,D=b.options;return""==h?(C.lavaCalendar("unselect"),w&&w.val(""),void g.val("")):(w&&h.split("")[1]&&w.timespinner("setValue",h.split(" ")[1]),C.lavaCalendar("select",new Date(h.split(" ")[0].replace(/-/g,"/"))),void v.formatDate(g,C,w,D))}};a.fn.datetimebox=function(h,v){return"string"==typeof h?a.fn.datetimebox.methods[h](this,v):void a.each(this,function(){var v={};a.extend(v,a.fn.combo.defaults),a.extend(v,a.fn.lavaCalendar.defaults),a.extend(v,a.fn.datetimebox.defaults),v.showTime&&a.extend(v,a.fn.timespinner.defaults),a.extend(v,h),a(this).data("datetimebox",{options:v}),a.extend(a.fn.lavaCalendar.locales,a(this).data("datetimebox").options.weekMonth),c.init(this)})},a.fn.datetimebox.defaults={format:"yyyy-MM-dd hh:mm:ss",showTime:!0,showIcon:!1,panelWidth:250,panelHeight:"auto",showArrow:!1,onLoadDateSuccess:null,onMonthChange:null,onChange:null,weekMonth:{}},a.fn.datetimebox.methods={setValue:function(a,h){c.setValue(a,h)}}}(jQuery);
;/*!plugins/lava/js/msg.js*/
var lavaMsg={alert:function(a,c,v){var g=("lavaMsg_alert_"+(new Date).getTime(),"");"success"==c?g="fa-check":"warning"==c?g="fa-warning":"info"==c?g="fa-info-circle":"danger"==c&&(g="fa-close");{var h=$("<div style='position:fixed;top:0;left:10%;width:80%;z-index:20000;'></div>").appendTo("body"),b=$("<div class='modal-dialog modal-lg alert "+c+" fade in' style='margin:auto;'><i class='fa fa-lg "+g+"'></i> "+a+"</div>").appendTo(h);$("<span class='close'></span>").appendTo(b)}setTimeout(function(){h.fadeOut(1e3,function(){h.remove()})},v?v:3e3)},loading:function(a,c,v,g){{var h=$(".lava-msg-loading");$(".lava-msg-style")}if(void 0==g&&(g="rgba(0,0,0,0.25)"),a&&0==h.length){var b=$("<div class='lava-msg-loading' style='position:fixed;top:0;left:0;z-index:2021;width:100%;height:100%;background:"+g+";'></div>").appendTo("body"),T=$("<div class='progress progress-striped active' style='width:20%;margin:22% 40%;'></div>").appendTo(b);if(void 0==v){$("<div class='progress-bar "+c+"' style='width:100%;'></div>").appendTo(T)}else{$("<div class='progress-bar "+c+"' style='width:100%;background-color:"+v+";background-image: linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.2) 50%,rgba(255,255,255,.2) 75%,transparent 75%);background-size: 40px 40px'></div>").appendTo(T)}b.click(function(){lavaMsg.loading(!1)})}else!a&&h.length>0&&h.fadeOut(500,function(){h.remove()})},singleConfirm:function(a,c,v,g,h){var b=$(a),T=b.offset().top<90?"bottom":"top";b.addClass("lava-msg-singleconfirm"),$(".lava-popover").fadeOut(300,function(){$(this).remove()});var y=$("<div class='popover lava-popover "+T+" in'><div class='arrow' style='left:50%;'></div></div>").appendTo("body").show(),k=($("<h3 class='popover-title' style='margin: 0;'>"+(c?c:"Are you sure ?")+"</h3>").appendTo(y),$("<div class='popover-content' style='text-align:center;'></div>").appendTo(y)),w=$("<button type='button' class='btn success'><i class='fa fa-check'></i> "+(v?v:"Yes")+"</button>").appendTo(k),C=b.offset().left+b.innerWidth()/2-y.innerWidth()/2-1,M=b.offset().top-y.innerHeight()-12;C=0>C?0:C,y.css({left:C,top:M}),w.click(function(e){h&&h(!0),y.remove(),e.stopPropagation()})},confirm:function(a,c,v,g){var h=$("<div class='modal fade in lava-msg-confirm'></div>").appendTo("body"),b=$("<div class='modal-dialog modal-md'></div>").appendTo(h),T=$("<div class='modal-content'></div>").appendTo(b),y=$("<div class='modal-header'><h4 class='modal-title' style='margin:0;'>"+a+"</h4></div>").appendTo(T),k=$("<span class='close' data-dismiss='modal' aria-hidden='true'></span>").prependTo(y),w=($("<div class='modal-body'>"+c+"</div>").appendTo(T),$("<div class='modal-footer'></div>").appendTo(T)),C=$("<button type='button' class='btn green'><i class='fa fa-check'></i> "+v+"</button>").appendTo(w);h.modal("show"),C.click(function(){g&&g(!0),h.modal("hide")}),b.click(function(e){e.stopPropagation()}),k.click(function(){h.modal("hide")})},bindEvent:function(){$("body").delegate(".popover-title,.popover-content,.lava-msg-singleconfirm","click",function(e){e.stopPropagation()}),$(document).on("click",function(){$(this).hasClass("popover-title")||$(this).hasClass("popover-content")||$(this).hasClass("lava-msg-singleconfirm")||$(".lava-popover").fadeOut(300,function(){$(this).remove()})})}};$(function(){lavaMsg.bindEvent()});
;/*!plugins/lava/js/osdbox.js*/
var osdbox={init:function(a){var h=$(a),c=h.data("osdbox").options;h.hasClass("osdbox")?h.html(""):h.addClass("osdbox");var g=$("<div class='osd-container'></div>").appendTo(h);c.container=g,g.css({width:c.width,height:c.height,position:"relative"}),g.css(c.backgroundImg?{"background-image":url(c.backgroundImg)}:{"background-color":c.backgroundColor}),osdbox.loadData(h,c.data),osdbox.bindEvent(h)},isIE:function(){return navigator.userAgent.toUpperCase().indexOf("TRIEDENT")>=0?!0:!1},loadData:function(a,h){var c=a.data("osdbox").options;c.data=h;var g=c.borderColor,b=c.container,v=c.resolutionRatio.split("*")[0],w=c.resolutionRatio.split("*")[1],I=c.width,y=c.height;b.html("");for(var C="<div class='osd-item' data-index = {index} style='position:absolute;left:{x};top:{y};border:1px solid {borderColor};width:{width};height:{height}'><span>{text}</span></div>",D=[],i=0;i<h.length;i++){var x=parseInt(h[i].x*I/v);h[i].x_real=x;var k=parseInt(h[i].y*y/w);h[i].y_real=k;var E=h[i].text,_=C.replace("{index}",i).replace("{borderColor}",g).replace("{x}",x+"px").replace("{y}",k+"px").replace("{text}",E);_=h[i].width?_.replace("{width}",h[i].width):_.replace("{width}","auto"),_=h[i].height?_.replace("{height}",h[i].height):_.replace("{height}","auto"),D.push(_)}b.html(D.join("")),b.find(".osd-item").each(function(a,h){osdbox.isIE?$(h).css("width",$(h).children().width()+2):$(h).css("width",$(h).children().width()),$(h).offset().left+$(h).width()>=b.offset().left+c.width&&$(h).offset({left:b.offset().left+c.width-$(h).width()-2}),osdbox.isIE?$(h).css("height",$(h).children().height()+2):$(h).css("height",$(h).children().height()),$(h).offset().top+$(h).height()>=b.offset().top+c.height&&$(h).offset({top:b.offset().top+c.height-$(h).height()-2})})},getData:function(a){for(var h=$(a),c=h.data("osdbox").options,g=c.data,b=c.resolutionRatio,v=c.container,w=b.split("*")[0],I=b.split("*")[1],y=v.width(),C=v.height(),i=0;i<g.length;i++){var x=g[i].x_real,D=g[i].y_real;g[i].x=parseInt(w*x/y),g[i].y=parseInt(I*D/C)}return g},bindEvent:function(a){var h,c,g,b,v,w=a.data("osdbox").options,I=w.container,y=!1;I.delegate(".osd-item","mousedown",function(e){var a=$(e.target);a.hasClass("osd-item")||(a=a.parent()),v=a,h=parseInt(a.css("left")),c=parseInt(a.css("top")),g=e.clientX,b=e.clientY,y=!0}).on("mousemove mouseup",function(e){var $=v;w=a.data("osdbox").options;var I=w.data;if(y){clientX=e.clientX,clientY=e.clientY;var C=clientX-g,D=clientY-b;g=clientX,b=clientY,h+=C,1>=h&&(h=1),h>=$.parent().width()-$.width()-3&&(h=$.parent().width()-$.width()-3),c+=D,1>=c&&(c=1),c>=$.parent().height()-$.height()-3&&(c=$.parent().height()-$.height()-3),$.css("left",h+"px"),$.css("top",c+"px"),I[$.attr("data-index")].x_real=h,I[$.attr("data-index")].y_real=c}"mouseup"===e.type&&(h=0,c=0,g=0,b=0,y=!1)}),$("body").on("mouseup",function(){h=0,c=0,g=0,b=0,y=!1})}};$.fn.osdbox=function(a,h){return"string"==typeof a?$.fn.osdbox.methods[a](this,h):void $.each(this,function(){var h={};$.extend(h,$.fn.osdbox.default),$.extend(h,a),$(this).data("osdbox",{options:h}),osdbox.init(this)})},$.fn.osdbox.default={width:100,height:100,backgroundColor:"#27313a",backgroundImg:"",borderColor:"#f00",data:[],resolutionRatio:"1024*768"},$.fn.osdbox.methods={getData:function(a){var h=osdbox.getData(a);return h||[]},setData:function(a,h){var c=$(a);osdbox.loadData(c,h)}};
;/*!plugins/lava/js/planbox.js*/
var planBox={init:function(a){var c=$(a);c.hasClass("plan-box")?c.html(""):c.addClass("plan-box");var h=c.data("planBox").options,v=$("<div class='plan-box-container' style='width:"+h.width+"px;height:"+h.height+"px;'></div>").appendTo(c);h.container=v;var b=h.color,g="<style>";for(var w in b)g+=" .plan-box-item."+w+"{",g+=h.isFill?"background-color:"+b[w]+";}":"border: 2px solid "+b[w]+";}";g+="</style>",$(g).appendTo("body"),planBox.drawRect(a,h.data),planBox.bindEvent(a)},drawRect:function(a,c){var h=$(a),v=h.data("planBox").options,b=v.container;b.html(""),v.data=c;var g=v.width,w=v.height,y=c.length,B=c[0].length,I=v.rowBlank,k=v.colBlank,N="<span class='{class}' style='width:{width}px;height:{height}px;line-height:{height}px;top:{top};left:{left};' data-left='{left}' data-top='{top}' data-type='{type}' data-row='{row}' data-col='{col}'>{text}</span>";v.colNumber&&(y+=1);var D=Math.floor((g-(B-1)*I)/B),R=Math.floor((w-(y-1)*k)/y);N=N.replace("{width}",D).replace(/{height}/g,R);var T=[];if(v.colNumber)for(var i=0;B>i;i++){var C=N.replace(/{top}/g,"0px").replace(/{left}/g,(D+I-1)*i+"px").replace("{type}","").replace("{row}","").replace("{col}","");C=C.replace("{class}","plan-box-header-item").replace("{text}",i),T.push(C)}for(var i=0;i<c.length;i++){var y=c[i];if(v.colNumber)var E=i+1;else var E=i;for(var F=0;F<y.length;F++){var C=N.replace(/{top}/g,(R+k-1)*E+"px").replace(/{left}/g,(D+I-1)*F+"px").replace("{type}",y[F]).replace("{row}",i).replace("{col}",F);C=0==y[F]?C.replace("{class}","plan-box-item normal"):1==y[F]?C.replace("{class}","plan-box-item selected"):C.replace("{class}","plan-box-item alarm"),C=C.replace("{text}",""),T.push(C)}}b.html(T.join(""))},bindEvent:function(a){var c,h=$(a),v=h.data("planBox").options,b=v.container,g=!1,w=0,y=0,B=0,I=0,k=0,N=0,D=0,R=0,T=0,C=0;b.delegate(".plan-box-item","mousedown mousemove mouseup dragstart",function(e){var a=$(e.target);if("mousedown"==e.type)k=e.clientX,N=e.clientY,D=a.offset().left,R=a.offset().top,g=!0,c=parseInt(a.attr("data-type")),w=parseInt(a.attr("data-left")),y=parseInt(a.attr("data-top"));else if("dragstart"==e.type)e.preventDefault();else if("mousemove"==e.type){if(g){b.find(".plan-box-rect").remove(),T=e.clientX,C=e.clientY;var h=T-k,E=C-N,F='<div class="plan-box-rect" style="position:absolute;height:'+E+"px;width:"+h+"px;left:"+(w+2)+"px;top:"+(y+2)+'px;"></div>';$(F).appendTo(b)}}else if(g){g=!1,b.find(".plan-box-rect").remove(),B=parseInt(a.attr("data-left")),I=parseInt(a.attr("data-top"));var M=v.data,X=c;if(w==B&&y==I)X+=1,v.color.alarm?3==X&&(X=0):2==X&&(X=0),0==X?a.attr("class","plan-box-item normal"):1==X?a.attr("class","plan-box-item selected"):a.attr("class","plan-box-item alarm"),a.attr("data-type",X),M[a.attr("data-row")][a.attr("data-col")]=X;else{if(w>B){var Y=w;w=B,B=Y}if(y>I){var Y=y;y=I,I=Y}b.find(".plan-box-item").each(function(a,c){var h=$(c),v=parseInt(h.attr("data-left")),b=parseInt(h.attr("data-top"));v>=w&&b>=y&&B>=v&&I>=b&&(0==X?h.attr("class","plan-box-item normal"):1==X?h.attr("class","plan-box-item selected"):h.attr("class","plan-box-item alarm"),h.attr("data-type",X),M[h.attr("data-row")][h.attr("data-col")]=X)})}w=0,y=0,D=0,R=0,B=0,I=0,k=0,N=0}})}};$.fn.planbox=function(a,c){return"string"==typeof a?$.fn.planbox.methods[a](this,c):void $.each(this,function(){var c={};$.extend(c,$.fn.planbox.defaults),$.extend(c,a),$(this).data("planBox",{options:c}),planBox.init(this)})},$.fn.planbox.defaults={width:120,height:120,data:[],isFill:!0,color:{normal:"#efefef",selected:"#0f0",alarm:"#f00"},rowBlank:2,colBlank:3,colNumber:!0},$.fn.planbox.methods={getData:function(a){return $(a).data("planBox").options.data},setData:function(a,c){planBox.drawRect(a,c)}};
;/*!plugins/lava/js/playbar.js*/
var lavaPlayBar={init:function(a){var v=this,c=$(a),h=c.data("playbar").options;c.addClass("lava-playbar");var b=$("<div class='lava-playbar-head' style='background:"+h.headerBgColor+";border-bottom:1px solid "+h.headerColor+";'></div>").appendTo(c),y=$("<div class='lava-playbar-btns'></div>").appendTo(b),T=($("<canvas class='lava-playbar-zoomout' width='50' height='40'></canvas>").appendTo(y),$("<canvas class='lava-playbar-zoomin' width='50' height='40'></canvas>").appendTo(y),$("<div class='lava-playbar-time'></div>").appendTo(b)),g=$("<div class='lava-playbar-timewrapper'></div>").appendTo(T),L=$("<canvas width='1000' height='40'></canvas>").appendTo(g);c.data("playbar").timeCanvas=L;var z=$("<div class='lava-playbar-body' style='background:"+h.bgColor+";'></div>").appendTo(c),w=$("<div class='lava-playbar-channelwrapper' stylel='background:"+h.channelWrapperBgColor+";'></div>").appendTo(z),C=$("<div class='lava-playbar-datawrapper'></div>").appendTo(z),D=$("<div class='lava-playbar-channels'><div>").appendTo(w),W=$("<div class='lava-playbar-linenames' style='background:"+h.channelBgColor+";'></div>").appendTo(w);c.data("playbar").lineNames=W;var B=$("<div class='lava-playbar-lines'></div>").appendTo(C),k=$("<canvas></canvas>").appendTo(B);c.data("playbar").lineCanvas=k;{var S=$("<div class='lava-playbar-data'></div>").appendTo(C),I=$("<canvas></canvas>").appendTo(S),R=$("<div class='lava-playbar-rightrollbar' style='background:"+h.rollbarWrapperColor+";'><div>").appendTo(z);$("<div class='lava-playbar-up'></div>").appendTo(R),$("<div class='lava-playbar-down'></div>").appendTo(R),$("<div class='lava-playbar-rightbar' style='background:"+h.rollbarColor+";'></div>").appendTo(R)}I[0].width=T.width(),c.data("playbar").dataCanvas=I;var P=$("<div class='lava-playbar-bottomrollbar' style='background:"+h.rollbarWrapperColor+";'></div>").appendTo(c),F=($("<div class='lava-playbar-bottomprev'></div>").appendTo(P),$("<div class='lava-playbar-bottomnext'></div>").appendTo(P),$("<div class='lava-playbar-bottombar' style='background:"+h.rollbarColor+";'></div>").appendTo(P),"<style>.lava-playbar-up:before {border-color:transparent transparent "+h.rollbarAngleColor+" transparent;}\n.lava-playbar-down:before {border-color:"+h.rollbarAngleColor+" transparent transparent transparent;}\n.lava-playbar-bottomprev:before {border-color:transparent "+h.rollbarAngleColor+" transparent transparent;}\n.lava-playbar-bottomnext:before {border-color:transparent transparent transparent "+h.rollbarAngleColor+";}\n.lava-playbar-bottombar:hover,.lava-playbar-rightbar:hover {background:"+h.rollbarHoverColor+" !important;}\n</style>"),O=$(F).appendTo(c);c.data("playbar").style=O;var X=$("<div class='lava-playbar-line'></div>").appendTo(c);c.data("playbar").line=X;var N=$("<div class='lava-playbar-timelabel'></div>").appendTo(c),A=$("<canvas class='lava-playbar-timelabelcanvas' width='50' height='13' style='position:absolute;z-index:1;'></canvas>").appendTo(N);c.data("playbar").timeLabel=N,c.data("playbar").timeLabelCanvas=A;var E=$("<div class='lava-playbar-point'></div>").appendTo(c),M=$("<canvas width='150' height='95' class='lava-playbar-pointcanvas'></canvas>").appendTo(E);c.data("playbar").point=E,c.data("playbar").pointCanvas=M;for(var i=0;4>i;i++)D.append("<div class='lava-playbar-channel' style='background:"+h.channelBgColor+";color:"+h.channelColor+";'></div>");v.drawZoomBtn(a,"zoomout","mouseout"),v.drawZoomBtn(a,"zoomin","mouseout"),v.loadTimeLabel(a)},drawZoomBtn:function(a,v,c){var h=$(a),b=h.data("playbar").options,y=h.find(".lava-playbar-"+v)[0].getContext("2d");y.clearRect(0,0,50,40);var T="mouseout"==c?b.btnColor:"#fff";"mouseover"==c?(y.fillStyle=b.btnColor,y.fillRect(8,8,34,24)):(y.strokeStyle=b.btnColor,y.lineWidth=1,y.strokeRect(8.5,8.5,34,24)),y.strokeStyle=T,y.lineWidth=1.2,y.beginPath(),y.arc(19,19,7,0,2*Math.PI),y.stroke(),y.fillStyle=T,y.fillRect(15,19,8,1),"zoomout"==v&&y.fillRect(19,15,1,8),y.beginPath(),y.moveTo(24,23),y.lineTo(34,30),y.lineWidth=3,y.stroke()},loadData:function(a,v){var c=this,h=$(a),b=h.data("playbar").options,y=h.find(".lava-playbar-data"),T=h.find(".lava-playbar-linenames"),g=h.find(".lava-playbar-lines"),L=h.data("playbar").point;"channel"==b.type?b.data=v:b.lineData=v;var z=h.find(".lava-playbar-rightbar"),w=h.find(".lava-playbar-data"),C=h.find(".lava-playbar-channels");w.css({top:0}),z.css({top:15}).hide(),C.css({top:0}),"channel"==b.type?(v.length>4&&(z.css({height:4/v.length*65}).show(),setTimeout(function(){z.hide(),setTimeout(function(){z.show()},100)},100)),C.show(),y.show(),T.hide(),g.hide(),L.hide(),c.loadChannelNum(a),c.loadChannelData(a)):"line"==b.type&&(C.hide(),y.hide(),T.show(),g.show(),L.show(),c.loadLineType(a),c.loadLineData(a))},changeType:function(a,v){var c=this,h=$(a),b=h.find(".lava-playbar-channels"),y=h.find(".lava-playbar-data"),T=h.find(".lava-playbar-linenames"),g=h.find(".lava-playbar-lines"),L=h.data("playbar").point,z=h.data("playbar").options;if(v!=z.type)if("channel"==v)b.show(),y.show(),T.hide(),g.hide(),L.hide(),z.type=v,z.data&&(c.loadChannelNum(a),c.loadChannelData(a));else if("line"==v&&(T.show(),g.show(),b.hide(),y.hide(),h.find(".lava-playbar-rightbar").hide(),z.type=v,z.lineData)){c.loadLineType(a),c.loadLineData(a);var w=(z.currentTime-z.startTime)/864e5*z.zoomLevel*z.timeWidth+100;c.loadTimeLabel(a,w)}},loadLineType:function(a){var v=$(a),c=v.find(".lava-playbar-linenames"),h=v.find(".lava-playbar-data"),b=v.data("playbar").options,y=b.lineData;c.empty(),h.css({top:0});for(var i=0;i<y.length;i++)c.append("<div class='lava-playbar-linename' style='color:"+y[i].color+"'>"+y[i].name+"</div>")},loadLineData:function(a){var v=$(a),c=v.data("playbar").options,h=v.find(".lava-playbar-linenames"),b=h.children(),y=(v.find(".lava-playbar-lines"),v.data("playbar").lineCanvas[0]);y.width=c.timeWidth;var T=y.getContext("2d");T.lineWidth=1.5;for(var g=c.lineData,i=0;i<g.length;i++){for(var L=!1,z=0;z<b.length;z++)if(b.eq(z).text()==g[i].name&&b.eq(z).hasClass("lava-playbar-linename-disable")){L=!0;break}if(!L){var w=g[i].data;T.strokeStyle=g[i].color?g[i].color:"#fff",T.lineJoin="round";for(var C=c.startTime+864e5/c.zoomLevel,D=!1,W=864e5/c.zoomLevel,z=(Math.ceil(1*w.length/c.timeWidth/c.zoomLevel),0);z<w.length;z++){var B=w[z].time;if(0==z&&B>=c.startTime||B<=c.startTime&&w[z+1]&&w[z+1].time>c.startTime?(T.beginPath(),c.time=B,T.moveTo((B-c.startTime)/W*c.timeWidth,95-95*(w[z].value/120)),D=!0):(B>=c.startTime&&C>=B||B>C&&w[z-1]&&w[z-1].time<C)&&T.lineTo(parseInt((B-c.startTime)/W*c.timeWidth)+.5,95-95*(w[z].value/120)),D&&(B>=C&&w[z-1]&&w[z-1].time<C||z==w.length-1)){T.stroke();break}}}}},loadChannelNum:function(a){var v=$(a),c=v.data("playbar").options,h=c.data,b=v.find(".lava-playbar-channels");b.empty();for(var i=0;i<h.length;i++)b.append("<div class='lava-playbar-channel' style='background:"+c.channelBgColor+";color:"+c.channelColor+";'>"+h[i].name+"</div>");if(h.length<4)for(var i=0;i<4-h.length;i++)b.append("<div class='lava-playbar-channel' style='background:"+c.channelBgColor+";color:"+c.channelColor+";'></div>")},loadChannelData:function(a){var v=$(a),c=v.data("playbar").options,h=c.data,b=c.timeWidth,y=c.startTime+864e5/c.zoomLevel,T=v.data("playbar").dataCanvas[0],g=T.getContext("2d");if(h){T.height=24*h.length;for(var i=0;i<h.length;i++){var L=h[i].channel;g.clearRect(0,24*i+4,b,14);for(var z=0;z<L.length;z++)if(g.fillStyle="normal"==L[z].type?c.normalColor:c.alarmColor,L[z].startTime<=c.startTime&&L[z].endTime>c.startTime&&L[z].endTime<=y)g.fillRect(0,24*i+6,(L[z].endTime-c.startTime)/864e5*c.zoomLevel*b,12);else if(L[z].startTime>=c.startTime&&L[z].endTime<=y)g.fillRect((L[z].startTime-c.startTime)/864e5*c.zoomLevel*b,24*i+6,(L[z].endTime-L[z].startTime)/864e5*c.zoomLevel*b,12);else if(L[z].startTime>=c.startTime&&L[z].endTime>y)g.fillRect((L[z].startTime-c.startTime)/864e5*c.zoomLevel*b,24*i+6,(y-c.startTime)/864e5*c.zoomLevel*b,12);else if(L[z].startTime<c.startTime&&L[z].endTime>y)g.fillRect(0,24*i+6,b,12);else if(L[z].endTime<c.startTime&&L[z].startTime>y)break;g.fillStyle=c.channelSplitColor,g.fillRect(0,24*i+24,b,1)}}},drawTime:function(a){var v=this,c=a.data("playbar").options,h=a.find(".lava-playbar-time"),b=a.find(".lava-playbar-timewrapper"),y=a.find(".lava-playbar-bottombar"),T=b.children("canvas")[0],T=a.data("playbar").timeCanvas[0],g=h.width();c.timeWidth=g,b.css({width:g}),T.width=g,g*=c.zoomLevel;var L=0,z=0,w=T.getContext("2d");g-=1,1==c.zoomLevel?y.hide():y.show(),1==c.zoomLevel?(z=24,L=g/24):/^(2|4)$/.test(c.zoomLevel)?(z=144,L=g/144):8==c.zoomLevel?(z=720,L=g/720):24==c.zoomLevel?(z=1440,L=g/1440):48==c.zoomLevel?(z=2880,L=g/2880):144==c.zoomLevel?(z=8640,L=g/8640):288==c.zoomLevel?(z=8640,L=g/8640):1440==c.zoomLevel&&(z=43200,L=g/z),w.fillStyle=c.headerColor;var C=L-parseInt(c.startTime)%parseInt(864e5/z)/parseInt(864e5/z)*L;C=C==L?0:C;var $=parseInt(864e5/z)-parseInt(c.startTime)%parseInt(864e5/z);$=$==864e5/z?0:$;for(var i=0;90>=i;i++){var x=parseInt(C+i*L);if(w.fillRect(x,30,1,10),1==c.zoomLevel&&i%2==0&&i>0)w.fillText(v.round(i)+":00",24==i?x-28:x-14,28);else if(2==c.zoomLevel&&parseInt((10*i*60*1e3+c.startTime+$)/6e5)%6==0){var D=v.getTime(10*i*60*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(4==c.zoomLevel&&parseInt((10*i*60*1e3+c.startTime+$)/6e5)%6==0){var D=v.getTime(10*i*60*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(8==c.zoomLevel&&parseInt((2*i*60*1e3+c.startTime+$)/12e4)%10==0){var D=v.getTime(2*i*60*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(24==c.zoomLevel&&parseInt((60*i*1e3+c.startTime+$)/6e4)%6==0){var D=v.getTime(60*i*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(48==c.zoomLevel&&parseInt((30*i*1e3+c.startTime+$)/3e4)%6==0){var D=v.getTime(30*i*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(144==c.zoomLevel&&parseInt((10*i*1e3+c.startTime+$)/1e4)%6==0){var D=v.getTime(10*i*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(288==c.zoomLevel&&parseInt((10*i*1e3+c.startTime+$)/1e4)%6==0){var D=v.getTime(10*i*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else if(1440==c.zoomLevel)if(parseInt((2*i*1e3+c.startTime+$)/2e3)%30==0){var D=v.getTime(2*i*1e3+c.startTime+$);w.fillText(D,"24:00"==D?x-28:x-14,28)}else w.fillText(v.getSeconds(2*i*1e3+c.startTime+$),x,30)}v.drawBottomRollBar(a[0])},loadTimeLabel:function(a,v,c){var h=this,b=$(a),y=b.data("playbar").options,T=b.data("playbar").line,g=b.data("playbar").timeLabel,L=b.data("playbar").timeLabelCanvas[0],z=L.getContext("2d"),w=b.data("playbar").point,C=b.data("playbar").pointCanvas[0],D=C.getContext("2d"),W=b.data("playbar").lineNames.children();if(z.clearRect(0,0,50,14),z.fillStyle="#555",D.clearRect(0,0,150,95),v){if(c||(T.show(),g.show(),"line"==y.type&&w.show()),100>v?(v=100,c&&(T.hide(),g.hide(),"line"==y.type&&w.hide())):v>99+y.timeWidth?(v=99+y.timeWidth,c&&(T.hide(),g.hide(),"line"==y.type&&w.hide())):c&&(T.show(),g.show(),"line"==y.type&&w.show()),g.css(125>v?{left:100}:v>y.timeWidth+75?{left:y.timeWidth+50}:{left:v-25}),"line"==y.type&&y.lineData&&y.currentTime>=y.startTime&&y.currentTime<=y.startTime+864e5/y.zoomLevel){for(var B=20,i=0;i<y.lineData.length;i++){for(var k=!1,S=0;S<W.length;S++)if(W.eq(S).text()==y.lineData[i].name&&W.eq(S).hasClass("lava-playbar-linename-disable")){k=!0;break}if(!k){var I=y.lineData[i].data,R=null,P=0;if(!(0==I.length||y.currentTime<I[0].time||y.currentTime>I[I.length-1].time)){var F=h.quickSearch(I,y.currentTime);if(R=F.y,P=F.value,R){if(v>y.timeWidth-40){var O=D.createRadialGradient(140,R,2,140,R,12);O.addColorStop(0,y.lineData[i].color),O.addColorStop(1,"rgba(0,0,0,0)"),D.fillStyle=O,D.fillRect(130,R-10,20,20),D.fillStyle="rgba(0,0,0,0.53)",D.fillRect(0,B-12,130,16),D.fillStyle="#fff",D.font="11px arial",D.fillText(y.lineData[i].name+": "+P+y.lineData[i].unit,4,B)}else{var O=D.createRadialGradient(10,R,2,10,R,10);O.addColorStop(0,y.lineData[i].color),O.addColorStop(1,"rgba(85,85,85,0)"),D.fillStyle=O,D.fillRect(0,R-10,20,20),D.fillStyle="rgba(0,0,0,0.53)",D.fillRect(20,B-12,130,16),D.fillStyle="#fff",D.font="11px arial",D.fillText(y.lineData[i].name+": "+P+y.lineData[i].unit,24,B)}B+=16}}}}w.css(v>y.timeWidth-40?{left:v-140}:{left:v-10})}z.fillText(h.getTime(y.currentTime,!0),2,9),T.css({left:v})}else z.fillText("00:00:00",2,9)},quickSearch:function(a,v){var c=this;if(0==a.length)return{y:null,value:0};if(a.length%2==0)var h=a.length/2-1;else if(a.length%2==1)var h=(a.length-1)/2;return a[h].time==v?{y:95-95*(a[h].value/120),value:a[h].value}:a[h].time<v&&a[h+1]&&a[h+1].time>v?{y:95-95*(a[h].value/120),value:a[h].value}:a[h].time<v&&a[h+1]&&a[h+1].time<=v?c.quickSearch(a.slice(h+1),v):a[h].time>v?c.quickSearch(a.slice(0,h+1),v):void 0},drawBottomRollBar:function(a){var v=$(a),c=v.data("playbar").options,h=(v.find(".lava-playbar-time"),v.find(".lava-playbar-bottombar")),b=(v.width()-30)/c.zoomLevel;c.barWidth=50>b?50:b;var y=(v.width()-c.barWidth-30)*c.startTime/(864e5*(1-1/c.zoomLevel))+15;h.css({width:c.barWidth,left:y})},dragBottomRollBar:function(a,e){var v=this,c=$(a),h=c.find(".lava-playbar-bottomprev"),b=c.find(".lava-playbar-bottomrollbar"),y=c.find(".lava-playbar-bottombar"),T=(c.find(".lava-playbar-timewrapper"),c.data("playbar").options),x=e.clientX-T.lengthX-h.offset().left;15>x&&(x=15),x>b.width()-15-T.barWidth&&(x=b.width()-15-T.barWidth),y.css({left:x});var g=b.width()-30-T.barWidth;T.startTime=parseInt((x-15)/g*(864e5-864e5/T.zoomLevel)),v.drawTime(c),"channel"==T.type?v.loadChannelData(a):"line"==T.type&&v.loadLineData(a)},play:function(a,v){var c=this,h=$(a),b=h.data("playbar").options;b.currentTime=v,v<b.startTime&&(b.startTime=v,"channel"==b.type?c.loadChannelData(a):"line"==b.type&&c.loadLineData(a),c.drawTime(h)),v-b.startTime>864e5/b.zoomLevel&&(b.startTime=v-864e5/b.zoomLevel,"channel"==b.type?c.loadChannelData(a):"line"==b.type&&c.loadLineData(a),c.drawTime(h));var y=(v-b.startTime)/(864e5/b.zoomLevel)*b.timeWidth+100;c.loadTimeLabel(a,y)},getTime:function(a,v){var c=this;return v?c.round(parseInt(a/36e5))+":"+c.round(parseInt(a%36e5/6e4))+":"+c.round(parseInt(a%6e4/1e3)):c.round(parseInt(a/36e5))+":"+c.round(parseInt(a%36e5/6e4))},getSeconds:function(a){var v=this,c=new Date(a);return v.round(c.getSeconds())},round:function(a){return 10>a?"0"+a:a},zoomOutOrIn:function(a,v){{var c=this,h=$(a),b=h.data("playbar").options;b.zoomLevel}if("zoomout"==v){if(1440==b.zoomLevel)return;288==b.zoomLevel?(b.zoomLevel*=5,b.startTime+=.8*(b.currentTime-b.startTime)):48==b.zoomLevel||8==b.zoomLevel?(b.zoomLevel*=3,b.startTime+=(b.currentTime-b.startTime)*(2/3)):(b.zoomLevel*=2,b.startTime+=.5*(b.currentTime-b.startTime))}else if("zoomin"==v){if(1==b.zoomLevel)return;1440==b.zoomLevel?(b.zoomLevel=b.zoomLevel/5,b.startTime-=4*(b.currentTime-b.startTime)):144==b.zoomLevel||24==b.zoomLevel?(b.zoomLevel=b.zoomLevel/3,b.startTime-=2*(b.currentTime-b.startTime)):(b.zoomLevel=b.zoomLevel/2,b.startTime-=b.currentTime-b.startTime)}if(b.startTime<0){b.startTime=0;var y=(b.currentTime-b.startTime)/(864e5/b.zoomLevel)*b.timeWidth+100;c.loadTimeLabel(a,y)}else if(b.startTime>864e5-864e5/b.zoomLevel){b.startTime=864e5-864e5/b.zoomLevel;var y=(b.currentTime-b.startTime)/(864e5/b.zoomLevel)*b.timeWidth+100;c.loadTimeLabel(a,y)}c.drawTime(h),"channel"==b.type?c.loadChannelData(a):"line"==b.type&&c.loadLineData(a)},resize:function(a){var v=this,c=$(a),h=c.data("playbar").options;h.timeWidth=c.find(".lava-playbar-time").width(),v.drawTime(c),v.drawBottomRollBar(a);var b=(h.currentTime-h.startTime)/(864e5/h.zoomLevel)*h.timeWidth+100;v.loadTimeLabel(a,b,!0);var y=c.data("playbar").dataCanvas[0];y.width=h.timeWidth,"channel"==h.type?v.loadChannelData(a):"line"==h.type&&v.loadLineData(a)},bindEvent:function(a){var v=this,c=$(a),h=c.data("playbar").options,b=c.find(".lava-playbar-bottombar"),y=c.find(".lava-playbar-bottomrollbar"),T=c.find(".lava-playbar-rightbar"),g=c.find(".lava-playbar-rightrollbar"),L=c.find(".lava-playbar-channels"),z=c.find(".lava-playbar-data");y.on("mousedown",function(e){if(!b.is(":visible"))return!1;var c=e.clientX-$(this).offset().left-b.width()/2;15>c&&(c=15),c>$(this).width()-b.width()-15&&(c=$(this).width()-b.width()-15),b.css({left:c}),h.bottomDownFlag=!0,h.lengthX=e.clientX-b.offset().left,v.dragBottomRollBar(a,e);var y=(h.currentTime-h.startTime)/(864e5/h.zoomLevel)*h.timeWidth+100;return v.loadTimeLabel(a,y,!0),!1}),b.on("mousedown",function(e){return h.bottomDownFlag=!0,h.lengthX=e.clientX-$(this).offset().left,!1}),T.on("mousedown",function(e){return h.rightDownFlag=!0,h.lengthY=e.clientY-$(this).offset().top,!1}),c.find(".lava-playbar-time, .lava-playbar-datawrapper, .lava-playbar-timelabel, .lava-playbar-pointcanvas").on("click",function(e){var b=e.clientX-c.offset().left;return h.currentTime=h.startTime+(b-100)/(h.timeWidth*h.zoomLevel-h.zoomLevel)*864e5,v.loadTimeLabel(a,b),h.onPosition(h.currentTime),!1}),$("body").on("mousemove mouseup",function(e){if("mousemove"==e.type&&h.bottomDownFlag){v.dragBottomRollBar(a,e);var b=(h.currentTime-h.startTime)/(864e5/h.zoomLevel)*h.timeWidth+100;v.loadTimeLabel(a,b,!0)}else if("mousemove"==e.type&&h.bodyDownFlag){var b=e.clientX-c.offset().left;h.currentTime=h.startTime+(b-100)/(h.timeWidth*h.zoomLevel-h.zoomLevel)*864e5,h.currentTime>864e5&&(h.currentTime=864e5),v.loadTimeLabel(a,b),h.onPosition&&h.onPosition(h.currentTime)}else if("mousemove"==e.type&&h.rightDownFlag){var y=e.clientY-g.offset().top-h.lengthY;15>y&&(y=15),y>80-T.height()&&(y=80-T.height()),T.css({top:y});var w=-(y-15)/(65-T.height())*24*(h.data.length-4);L.css({top:w}),z.css({top:w})}else"mouseup"==e.type&&(h.bottomDownFlag=!1,h.bodyDownFlag=!1,h.rightDownFlag=!1)}),c.on("selectstart",function(){return!1}),a.addEventListener("mousewheel",function(e){if(e.wheelDelta>0)var c="zoomout";else var c="zoomin";return v.zoomOutOrIn(a,c),e.preventDefault(),e.stopPropagation(),!1}),a.addEventListener("DOMMouseScroll",function(e){if(e.detail<0)var c="zoomout";else var c="zoomin";return v.zoomOutOrIn(a,c),e.preventDefault(),e.stopPropagation(),!1}),c.find(".lava-playbar-zoomout,.lava-playbar-zoomin").on("mouseover mouseout click",function(e){var c=e.target.className.replace("lava-playbar-","");"mouseover"==e.type||"mouseout"==e.type?v.drawZoomBtn(a,c,e.type):v.zoomOutOrIn(a,c)}),c.delegate(".lava-playbar-linename","click",function(){$(this).toggleClass("lava-playbar-linename-disable"),v.loadLineData(a);var c=(h.currentTime-h.startTime)/(864e5/h.zoomLevel)*h.timeWidth+100;v.loadTimeLabel(a,c)}),$(window).on("resize",function(){v.resize(a)})}};$.fn.lavaPlayBar=function(a,v){return"string"==typeof a?$.fn.lavaPlayBar.methods[a](this,v):this.each(function(){var v={};$.extend(v,$.fn.lavaPlayBar.defaults),$(this).data("playbar",{options:v}),$.extend($(this).data("playbar").options,a),lavaPlayBar.init(this),lavaPlayBar.drawTime($(this)),lavaPlayBar.bindEvent(this)})},$.fn.lavaPlayBar.defaults={headerColor:"#999",headerBgColor:"#223",channelBgColor:"#222",channelColor:"#999",bgColor:"#000",channelWrapperBgColor:"#333",btnColor:"#32c5d2",rollbarWrapperColor:"#252525",rollbarColor:"#555",rollbarHoverColor:"#666",rollbarAngleColor:"#888",normalColor:"#00ad76",alarmColor:"#b74201",channelSplitColor:"#333",zoomLevel:1,startTime:0,currentTime:0,type:"channel",time:0,onPosition:function(){}},$.fn.lavaPlayBar.methods={loadData:function(a,v){return lavaPlayBar.loadData(a,v)},changeType:function(a,v){return lavaPlayBar.changeType(a,v)},play:function(a,v){return lavaPlayBar.play(a,v)},resize:function(a){lavaPlayBar.resize(a)},options:function(a){return $(a).data("playbar").options},getType:function(a){return $(a).data("playbar").options.type},getTime:function(a){return $(a).data("playbar").options.currentTime}};
;/*!plugins/lava/js/switchButton.js*/
var switchButton={init:function(a){var c=$(a),h=c.data("switchbutton").option,w=h.width-2,g=h.height-2;c.css("height",g+"px"),c.css("width",w+"px"),c.addClass("lavaui-switchbutton"),h.disabled&&c.addClass("lavaui-switchbutton-disabled");var b=$('<div class="lavaui-switchbutton-container"></div>');c.html(""),c.append(b);var v='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-on" style="width:{width};line-height:{line-height};{background-color}">{text}</span>',C='<span class="lavaui-switchbutton-handle lavaui-switchbutton-label" style="width:{width};"></span>',k='<span class="lavaui-switchbutton-handle lavaui-switchbutton-handle-off" style="width:{width};line-height:{line-height};{background-color}">{text}</span>>';v=v.replace("{width}",parseInt(w/2)+"px").replace("{text}",h.onText).replace("{line-height}",g+"px"),v=h.onColor?v.replace("{background-color}","background-color:"+h.onColor+" !important;"):v.replace("{background-color}",""),C=C.replace("{width}",parseInt(w/2)+"px"),k=k.replace("{width}",parseInt(w/2)+"px").replace("{text}",h.offText).replace("{line-height}",g+"px"),k=h.offColor?k.replace("{background-color}","background-color:"+h.offColor+" !important;"):k.replace("{background-color}",""),b.append(v),b.append(C),b.append(k),this.bindEvent(a)},bindEvent:function(a){var c=$(a),h=$(a).data("switchbutton").option;c.children(".lavaui-switchbutton-container").on("click",function(){if(!h.disabled){var a=parseInt($(this).css("margin-left"));0>a?$(this).animate({marginLeft:0},400):0===a&&$(this).animate({marginLeft:parseInt(-(h.width-2)/2)},400);var c=switchButton.getState();return h.onChange&&onChange(c),!1}})},getState:function(a){var c=$(a),h=parseInt(c.children(".lavaui-switchbutton-container").css("margin-left"));return 0>h?"off":"on"}};$.fn.switchButton=function(a,c){return"string"==typeof a?$.fn.switchButton.methods[a](this,c):void $.each(this,function(){var c={};$.extend(c,$.fn.switchButton.defaults),$.extend(c,a),$(this).data("switchbutton",{option:c}),switchButton.init(this)})},$.fn.switchButton.defaults={onText:"on",offText:"off",onColor:"",offColor:"",width:84,height:28,value:"",disabled:!1,onChange:null},$.fn.switchButton.methods={open:function(a){var c=$(a),h=c.data("switchbutton").option,w=c.children(".lavaui-switchbutton-container"),g=parseInt(w.css("margin-left"));0>g&&(w.css("margin-left",0),h.onChange&&h.onChange("on"))},close:function(a){var c=$(a),h=c.data("switchbutton").option,w=c.children(".lavaui-switchbutton-container"),g=parseInt(w.css("margin-left"));0===g&&(w.css("margin-left",parseInt(-(h.width-2)/2)),h.onChange&&h.onChange("off"))},getState:function(a){return switchButton.getState(a)}};
;/*!plugins/lava/js/table.js*/
!function(a){function b(b){var y=a(b);y.hide();var w=a(b).data("table").option,D=a(b).parent().height()-(w.pagination?40:0),k=w.columns;a(b).nextAll(".div-table").length>0&&a(b).nextAll(".div-table").remove(),a(b).nextAll(".div-pagination").length>0&&a(b).nextAll(".div-pagination").remove();var T=a("<div class='div-table' style='height:"+D+"px;'></div>").insertAfter(a(b));if(y.data("table").tableDiv=T,w.fit&&T.css({overflow:"hidden"}),0==w.frozenNumber){for(var C=a("<div class='div-head' style='width:100%;overflow:hidden;'></div>").appendTo(T),j=a("<div class='div-body' style='width:100%;overflow:auto;'></div>").appendTo(T),A=a("<div class='div-head-table' style='position:relative;'></div>").appendTo(C),L=a("<div class='div-body-table'></div>").appendTo(j),S=0,i=0;i<k.length;i++)S+=k[i].width+1;y.data("table").headDiv=C,y.data("table").bodyDiv=j,c(b,A),h(b,L)}else{for(var I=a("<div class='div-head1' style='float:left;'></div>").appendTo(T),R=a("<div class='div-head2' style='float:left;'></div>").appendTo(T),F=a("<div class='div-body1' style='float:left;'></div>").appendTo(T),H=a("<div class='div-body2' style='float:left;'></div>").appendTo(T),W=a("<div class='div-head-table1'></div>").appendTo(I),B=a("<div class='div-head-table2'></div>").appendTo(R),M=a("<div class='div-body-table1'></div>").appendTo(F),O=a("<div class='div-body-table2'></div>").appendTo(H),E=0,Q=0,U=0,V=0,G=0,i=w.checkbox?1:0;i<k.length;i++)i<(w.checkbox?w.frozenNumber+1:w.frozenNumber)?(E+=k[i].width,U+=k[i].width):Q+=k[i].width,G+=k[i].width;w.checkbox&&(E+=36,U+=36),Q=Q<T.width()-E-20?T.width()-E-20:Q,U+=1,y.data("table").option.frozenWidth=E,V=parseInt(T.width()-U),I.css({width:U,overflow:"hidden"}),R.css({width:V,overflow:"hidden"}),F.css({width:U,overflow:"hidden"}),H.css({width:V,overflow:"auto"}),W.css({width:E}),B.css({width:Q,left:-E-1,position:"relative"}),M.css({width:E,position:"relative"}),a(b).data("table").headDiv1=I,a(b).data("table").headDiv2=R,a(b).data("table").bodyDiv1=F,a(b).data("table").bodyDiv2=H,c(b,W,1),c(b,B,2),h(b,M,1),h(b,O,2)}if(w.columnToggle){var J=a(w.columnToggle);J.data("table",a(b));for(var K=a("<ul class='dropdown-menu pull-right'></ul>").appendTo(J.parent()),X=w.frozenNumber+(w.checkbox?1:0),i=X;i<k.length;i++)if("checkbox"!=k[i].field){var Y=a("th[data-field="+k[i].field+"]").html();K.append("<li><a class='a-columntoggle' href='javascript:;' data-field='"+k[i].field+"'><span class='span-checkbox span-checkbox-checked'></span>&nbsp;"+Y+"</a></li>")}}w.pagination&&v(b),w.url?P(b):w.data&&(w.pageNumber=1,w.firstPage=null,w.lastPage=null,0==w.frozenNumber?N(b,L):(y.data("table").bodyDiv1.children().children().find("tbody").empty(),y.data("table").bodyDiv2.children().children().find("tbody").empty(),N(b,M,1),N(b,O,2)),w.pagination&&g(b)),z(b)}function c(b,c){var h=a(b).data("table").option,v=h.columns,g=a(b).prop("id"),y=a("<table class='jq-table table table-bordered'></table>").appendTo(c),w=a("<thead></thead>").appendTo(y),D=a(b).children("thead");w.html(D.html());for(var k=w.children(),i=0;i<k.length;i++)for(var T=k.eq(i).children(),N=0;N<T.length;N++){var P=T.eq(N).attr("data-field");if(P){for(var z="<div class='table-"+g+"-"+P+"'>"+T.eq(N).html(),C=0;C<v.length;C++)v[C].field==P&&v[C].order&&("asc"==h.orderType?(z+=P==h.defaultOrderColumn?"<div class='table-angle table-angle-up table-angle-active'></div>":"<div class='table-angle table-angle-up'></div>",T.eq(N).attr("data-ordertype",h.orderType)):"desc"==h.orderType&&(z+=P==h.defaultOrderColumn?"<div class='table-angle table-angle-down table-angle-active'></div>":"<div class='table-angle table-angle-down'></div>",T.eq(N).attr("data-ordertype",h.orderType)));z+="</div>",T.eq(N).html(z)}}}function h(b,c,h){{var v=a(b).data("table").option;a(b).prop("id")}if(2===h)var g=a("<table class='jq-table table table-bordered' style='border-left-width:0px;'></table>").appendTo(c);else var g=a("<table class='jq-table table table-bordered'></table>").appendTo(c);a("<tbody></tbody>").appendTo(g);v.striped&&g.addClass("table-striped")}function v(b){var c=a(b),h=c.data("table").option.lang,v=a("<div class='div-pagination'></div>").insertAfter(c.data("table").tableDiv),g=(a("<div style='float:left;padding-top:5px;' class='div-pagination-tip'>"+O[h].total+": <span class='span-total'></span>, "+O[h].from+" <span class='span-first'></span> "+O[h].to+" <span class='span-last'></span></div>").appendTo(v),a("<div style='float:right;' class='div-pagination-btn'></div>").appendTo(v)),y="<a href='javascript:;' class='page-first page-btn'>«</a><a href='javascript:;' class='page-pre page-btn'>···</a><div style='float:left;' class='div-pagebtn'><a href='javascript:;' class='page-btn'>1</a><a href='javascript:;' class='page-btn'>2</a><a href='javascript:;' class='page-btn'>3</a><a href='javascript:;' class='page-btn'>4</a><a href='javascript:;' class='page-btn'>5</a></div><a href='javascript:;' class='page-next page-btn'>···</a><a href='javascript:;' class='page-last page-btn'>»</a>";g.html(y),c.data("table").pageDiv=v}function g(b){var c=a(b),h=c.data("table").option,v=h.data,g=h.pageSize,y=h.pageNumber,w=v.total?Math.ceil(v.total/g):1,D=c.data("table").pageDiv,k=D.find(".div-pagebtn");c.data("table").option.totalPage=w,D.find(".span-total").html(v.total),D.find(".span-first").html(v.total>0?(y-1)*g+1:0),D.find(".span-last").html(w>y?y*g:v.total),h.firstPage&&1!=h.firstPage||(c.data("table").option.firstPage=1,c.data("table").option.lastPage=w>5?5:w);var T=c.data("table").option.firstPage,N=c.data("table").option.lastPage;1>=T&&D.find(".page-pre").hide(),N>=w&&D.find(".page-next").hide(),T>1&&D.find(".page-pre").show(),w>N&&D.find(".page-next").show(),5>w?(k.find(".page-btn").show(),k.find(".page-btn").eq(w-1).nextAll().hide()):k.find(".page-btn").show();for(var i=0;N-T+1>i;i++)k.find(".page-btn").eq(i).data("table",{page:T+i}),k.find(".page-btn").eq(i).html(T+i);for(var i=0;N-T+1>i;i++)k.find(".page-btn").eq(i).data("table").page==y?k.find(".page-btn").eq(i).addClass("page-select"):k.find(".page-btn").eq(i).removeClass("page-select")}function y(b,c){var h=a(b),v=h.data("table").option,y=v.pageNumber,w=v.firstPage,D=v.lastPage,k=v.totalPage;if(pageSpan=c-y,c!=y){if(h.data("table").option.pageNumber=c,k>5){var T=w,N=D;c-w>2&&k-D==1?(T+=1,N+=1):k-D>0&&c-w==3?(T+=1,N+=1):k-D>1&&c-w==4?(T+=2,N+=2):3>c-w&&2==w?(T-=1,N-=1):c-w==1&&w>0?(T-=1,N-=1):c-w==0&&w>1&&(T-=2,N-=2),h.data("table").option.firstPage=T,h.data("table").option.lastPage=N}g(b),P(b,"page")}}function w(b){var c=a(b),h=c.data("table").option;1!=h.pageNumber&&(h.totalPage>5&&(c.data("table").option.firstPage=1,c.data("table").option.lastPage=5),c.data("table").option.pageNumber=1,g(b),P(b))}function D(b){var c=a(b).data("table").option;c.pageNumber!=c.totalPage&&(c.totalPage>5&&(a(b).data("table").option.firstPage=c.totalPage-4,a(b).data("table").option.lastPage=c.totalPage),a(b).data("table").option.pageNumber=c.totalPage,g(b),P(b))}function k(b){var c=a(b),h=c.data("table").option,v=h.firstPage;c.data("table").option.firstPage=h.firstPage>6?h.firstPage-5:1,c.data("table").option.lastPage=v>6?h.lastPage-5:h.lastPage-v+1,g(b)}function T(b){var c=a(b),h=c.data("table").option;c.data("table").option.firstPage=h.totalPage-h.lastPage>=5?h.firstPage+5:h.totalPage-4,c.data("table").option.lastPage=h.totalPage-h.lastPage>=5?h.lastPage+5:h.totalPage,g(b)}function N(b,c,h){var v=a(b),g=v.data("table").option,y=v.prop("id"),w=g.data,D=v.siblings(".div-table").find(".div-head,.div-head1"),k=c.children("tbody").empty(),T=w.rows;if(h){if(1==h)var N=g.columns.slice(0,g.checkbox?g.frozenNumber+1:g.frozenNumber);else if(2==h)var N=g.columns.slice(g.checkbox?g.frozenNumber+1:g.frozenNumber)}else var N=g.columns;var P=v.data("table").thArray;if(!P){P=[];for(var i=0;i<N.length;i++)P.push(D.find("th[data-field="+N[i].field+"]"));v.data("table").thArray=P}var C=[];for(i=0;i<P.length;i++)C.push(P[i].hasClass("column-hidden"));for(var j=[],i=0;i<T.length;i++){for(var A=[],L=0;L<N.length;L++){if(g.columnToggle)if(C[L])var S="<td class='column-hidden'>";else var S="<td>";else var S="<td>";var I="";I="checkbox"==N[L].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":N[L].formatter?N[L].formatter(T[i][N[L].field],T[i],i):void 0===T[i][N[L].field]?"":T[i][N[L].field],S+="<div class='table-"+y+"-"+N[L].field+"'>"+I+"</div></td>",A.push(S)}T[i].lavaTableRowIndex=i,j.push("<tr class='table-row-"+i+"'>"+A.join("")+"</tr>")}k.html(j.join("")),setTimeout(function(){z(b)},1),h&&2!=h||!g.onLoadSuccess||g.onLoadSuccess(w)}function P(b,c){var h=a(b),v=h.data("table").option;if(!v.onBeforeLoad||v.onBeforeLoad()){if(h.data("table").option.formData[v.pageSizeField]=v.pageSize,h.data("table").option.formData[v.pageNumberField]=v.pageNumber,c&&(h.data("table").option.formData.pageSearchFlag=!1),v.showLoader){var y=h.data("table").tableDiv,w=a("<div class='div-loader' style='width:100%;height:100%;'></div>").appendTo(y);a("<div class='lava-table-modal'></div>").appendTo(w),a("<div class='progress progress-striped active lava-progress'><div class='progress-bar'></div></div>").appendTo(w)}a.ajax({url:v.url,type:v.method,dataType:"json",data:v.formData}).done(function(a){v.showLoader&&w.remove(),h.data("table").option.data=v.loadFilter?v.loadFilter(a):a,0==v.frozenNumber?N(b,h.data("table").bodyDiv.children().children()):(h.data("table").bodyDiv1.children().children().find("tbody").empty(),h.data("table").bodyDiv2.children().children().find("tbody").empty(),N(b,h.data("table").bodyDiv1.children().children(),1),N(b,h.data("table").bodyDiv2.children().children(),2)),v.pagination&&g(b)}).fail(function(){v.showLoader&&w.remove(),h.data("table").option.data={total:0,rows:[]},0==v.frozenNumber?N(b,h.data("table").bodyDiv.children().children()):(h.data("table").bodyDiv1.children().children().find("tbody").empty(),h.data("table").bodyDiv2.children().children().find("tbody").empty(),N(b,h.data("table").bodyDiv1.children().children(),1),N(b,h.data("table").bodyDiv2.children().children(),2)),v.pagination&&g(b)})}}function z(b){var c=a(b).data("table").option,h=a(b);if(0==c.frozenNumber){if(c.fit){var v=h.parent().height(),g=h.data("table").headDiv.height(),y=v-g-(c.pagination?40:0);h.data("table").tableDiv.css({height:v-(c.pagination?40:0)}),h.data("table").bodyDiv.css({height:y})}var w="",D=c.columns,k=h.data("table").bodyDiv.children().width();setTimeout(function(){var a=h.data("table").bodyDiv.children().width();h.data("table").headDiv.css({width:a-0})},0);for(var T=0,N=0,P=h.prop("id"),i=0;i<D.length;i++)T+="checkbox"==D[i].field?36:D[i].width;for(var i=0;i<D.length;i++)N=k>T?parseInt(k/T*D[i].width)-17:D[i].width-17,w+=".table-"+P+"-"+D[i].field+"{width:"+N+"px;}";h.data("table").style&&h.data("table").style.remove();var z=a("<style type='text/css'>"+w+"</style>").insertAfter(h);h.data("table").style=z;var C=h.data("table").bodyDiv;C.css(k>T?{"overflow-x":"hidden"}:{"overflow-x":"auto"})}else{if(c.fit){var v=h.parent().height(),g=h.data("table").headDiv1.height(),y=v-g-(c.pagination?40:0);h.data("table").tableDiv.css({height:v-(c.pagination?40:0)}),h.data("table").bodyDiv1.css({height:y}),h.data("table").bodyDiv2.css({height:y})}for(var D=c.columns,N=1,i=0;i<(c.checkbox?c.frozenNumber+1:c.frozenNumber);i++)N+="checkbox"==D[i].field?36:D[i].width;h.data("table").headDiv2.css({width:parseInt(h.data("table").tableDiv.width()-N)-1}),h.data("table").bodyDiv2.css({width:parseInt(h.data("table").tableDiv.width()-N)-1});var j=h.data("table").bodyDiv1.find("tr"),A=h.data("table").bodyDiv2.find("tr");if(A.length>0)for(var i=0;i<j.length;i++){var y=j.eq(i).outerHeight()>A.eq(i).outerHeight()?j.eq(i).outerHeight():A.eq(i).outerHeight();y=Math.ceil(y),j.eq(i).css({height:y}),A.eq(i).css({height:y})}{var N=0,T=0,L=h.data("table").bodyDiv2,P=h.prop("id"),S=h.data("table").headDiv2.find("thead"),w="<style type='text/css'>";S.find(".column-hidden").length}if(c.frozenNumber>0)for(var I=0,i=c.checkbox?c.frozenNumber+1:c.frozenNumber;i<D.length;i++)S.find(".table-"+P+"-"+D[i].field).parent().hasClass("column-hidden")||(I+=D[i].width);for(var i=0;i<D.length;i++)N=D[i].width-17,I<L.width()-18&&i>=(c.checkbox?c.frozenNumber+1:c.frozenNumber)&&(S.find(".table-"+P+"-"+D[i].field).parent().hasClass("column-hidden")?N=parseInt((L.width()-18)/I*D[i].width)-17:(N=parseInt((L.width()-18)/I*D[i].width)-17,T+=N)),"checkbox"!=D[i].field&&(w+=".table-"+P+"-"+D[i].field+"{width:"+N+"px;}");h.data("table").headDiv2.children().css("width",T),w+="</style>",h.data("table").style&&h.data("table").style.remove();var R=a(w).insertAfter(h);if(h.data("table").style=R,h.data("table").bodyDiv2.children().css({width:T-18}),/msie|trident[\s\S]*rv/.test(navigator.userAgent.toLowerCase())){var F=h.data("table").bodyDiv2;F.scroll()}}}function C(b,c){var h=a(b),v=h.prop("id");h.siblings(".div-table").find(".table-"+v+"-"+c).parent().removeClass("column-hidden"),z(b)}function A(b,c){var h=a(b),v=h.prop("id");h.siblings(".div-table").find(".table-"+v+"-"+c).parent().addClass("column-hidden"),z(b)}function L(b){a(window).resize(function(){setTimeout(function(){a(b).parent().is(":visible")&&z(b)},100)});var c=a(b),h=c.data("table").option;if(a(b).data("table").bodyDiv){var v=a(b).data("table").bodyDiv;v.on("scroll",function(){c.data("table").headDiv.children().css({left:-v.scrollLeft()})}),v.delegate("tr","mouseover mouseout",function(e){var c=a(this).prop("class");"mouseover"===e.type?a(b).siblings(".div-table").find("."+c).addClass("row-hover"):a(this).hasClass("row-hover")&&a(b).siblings(".div-table").find("."+c.split(" ")[0]).removeClass("row-hover")})}if(a(b).data("table").bodyDiv2){var g=c.data("table").bodyDiv1,N=c.data("table").bodyDiv2,j=c.data("table").headDiv2,h=c.data("table").option;N.on("scroll",function(){g.children().css({top:-N.scrollTop()}),j.children().css({left:-N.scrollLeft()-h.frozenWidth-1})}),g.delegate("tr","mouseover mouseout",function(e){var c=a(this).prop("class");"mouseover"===e.type?a(b).siblings(".div-table").find("."+c).addClass("row-hover"):a(this).hasClass("row-hover")&&a(b).siblings(".div-table").find("."+c.split(" ")[0]).removeClass("row-hover")}),N.delegate("tr","mouseover mouseout",function(e){var c=a(this).prop("class");"mouseover"===e.type?a(b).siblings(".div-table").find("."+c).addClass("row-hover"):a(this).hasClass("row-hover")&&a(b).siblings(".div-table").find("."+c.split(" ")[0]).removeClass("row-hover")})}if(c.data("table").pageDiv&&(c.data("table").pageDiv.find(".div-pagebtn").children().on("click",function(){a(this).data("table")&&y(b,a(this).data("table").page)}),c.data("table").pageDiv.find(".page-first").on("click",function(){w(b)}),c.data("table").pageDiv.find(".page-last").on("click",function(){D(b)}),c.data("table").pageDiv.find(".page-pre").on("click",function(){k(b)}),c.data("table").pageDiv.find(".page-next").on("click",function(){T(b)})),0==h.frozenNumber)var L=c.data("table").headDiv,S=c.data("table").bodyDiv;else var L=c.siblings(".div-table").find(".div-head1,.div-head2"),S=c.data("table").bodyDiv1;h.multiSelect?(L.find(".jq-table").find(".checkbox").on("click",function(){return!1}),S.delegate("input[type='checkbox']","click",function(){var b=a(this);setTimeout(function(){b.is(":checked")&&(S.find(".checkbox").children("input").prop("checked",!1),b.prop("checked",!0))},0)})):c.data("table").option.checkbox&&(L.find(".jq-table").find(".checkbox").on("click",function(){var b=a(this);setTimeout(function(){var a=b.children("input").prop("checked");S.find(".checkbox").children("input").prop("checked",a)},1)}),S.delegate(".checkbox","click",function(){setTimeout(function(){var a=S.find(".checkbox>input").length==S.find(".checkbox>input:checked").length?!0:!1;L.find(".jq-table>thead>tr>th .checkbox>input").prop("checked",a)},1)}),c.data("table").option.onCheck&&(S.delegate("input[type='checkbox']","click",function(){var b=a(this);setTimeout(function(){h.onCheck(b)},1)}),L.find(".jq-table").find(".checkbox").on("click",function(){var b=a(this);setTimeout(function(){h.onCheck(b)},1)}))),a("body").delegate(".a-columntoggle","click",function(){var c=a(this).children(".span-checkbox");if(1==c.parent().parent().parent().find(".span-checkbox-checked").length&&c.hasClass("span-checkbox-checked"))return!1;c.toggleClass("span-checkbox-checked");{var h=a(this).attr("data-field");a(this).parent().parent().data("table")}return c.hasClass("span-checkbox-checked")?C(b,h):A(b,h),!1}),h.frozenNumber>0&&(L=c.siblings(".div-table").find(".div-head1,.div-head2")),L.delegate("th[data-ordertype]","click",function(){var h=a(this).find(".table-angle"),v=c.data("table").option.formData,g=a(this).attr("data-field");h.hasClass("table-angle-up")?h.hasClass("table-angle-active")?(h.removeClass("table-angle-up").addClass("table-angle-down"),v.orderType="desc"):v.orderType="asc":h.hasClass("table-angle-down")&&(h.hasClass("table-angle-active")?(h.removeClass("table-angle-down").addClass("table-angle-up"),v.orderType="asc"):v.orderType="desc"),L.find(".table-angle-active").removeClass("table-angle-active"),h.addClass("table-angle-active"),v.orderField=g,P(b)})}function S(b){a("div.page-content").length>0&&(a("div.page-content").hasClass("div-noprint")||(a("div.page-content").addClass("div-noprint"),a("body").append("<style>.div-print{display: none;} @media print {.div-noprint{display: none;} .div-print{display: block;}}.table-print{border-collapse:collapse;border-spacing:0;text-align:center;}.table-print td,.table-print th{border:1px solid #ddd;font-weight:normal;}</style>"))),a("div.container").length>0&&(a("div.container").hasClass("div-noprint")||(a("div.container").addClass("div-noprint"),a("body").append("<style>.div-print{display: none;} @media print {.div-noprint{display: none;} .div-print{display: block;}}.table-print{border-collapse:collapse;border-spacing:0;text-align:center;}.table-print td,.table-print th{border:1px solid #ddd;font-weight:normal;}</style>")));var c=I(b),h=R(b);a(".div-print").length>0?a(".div-print").html("<table cellspacing='0' cellpadding='0' class='table-print' style='width:100%;font-size:12px;'>"+c+h+"</table>"):a("body").append("<div class='div-print'><table cellspacing='0' cellpadding='0' class='table-print' style='width:100%;font-size:12px;'>"+c+h+"</table></div>"),setTimeout(function(){window.print()},10)}function I(b){var c=a(b).nextAll(".div-table"),h=c.children(".div-head1"),v=c.children(".div-head2"),g=[],y=[];if(h.length>0){for(var w=h.find("th"),D=v.find("th"),i=0;i<w.length;i++)if(w.eq(i).is(":visible")){var k=w.eq(i).children("div").html();y.push("<th>"+k+"</th>")}if(v.length>0)for(i;i<D.length;i++)if(D.eq(i).is(":visible")){var k=D.eq(i).children("div").html();y.push("<th>"+k+"</th>")}}else for(var T=c.children(".div-head"),N=T.find("th"),i=0;i<N.length;i++)if(N.eq(i).is(":visible")){var k=N.eq(i).children("div").html();y.push("<th>"+k+"</th>")}return g.push("<tr>"+y.join("")+"</tr>"),"<thead>"+g.join("")+"</thead>"}function R(b){var c=[],h=a(b).nextAll(".div-table"),v=h.children(".div-body1"),g=h.children(".div-body2"),y=h.children(".div-body");if(v.length>0)for(var w=v.find("tr"),D=g.find("tr"),i=0;i<w.length;i++){for(var k=[],T=w.eq(i).children("td"),N=D.eq(i).children("td"),P=0;P<T.length;P++)if(T.eq(P).is(":visible")){var z=T.eq(P).children("div").html();k.push("<td>"+z+"</td>")}if(N.length>0)for(var P=0;P<N.length;P++)if(N.eq(P).is(":visible")){var C=N.eq(P).children("div").html();k.push("<td>"+C+"</td>")}c.push("<tr>"+k.join("")+"</tr>")}else for(var j=y.find("tr"),i=0;i<j.length;i++){for(var k=[],A=j.eq(i).children("td"),P=0;P<A.length;P++)if(A.eq(P).is(":visible")){var L=A.eq(P).children("div").html();k.push("<td>"+L+"</td>")}c.push("<tr>"+k.join("")+"</tr>")}return"<tbody>"+c.join("")+"</tbody>"}function F(b,c){for(var h=a(b),v=h.data("table").option,g=v.data.rows,i=0;i<g.length;i++){var y=H(c,g[i]);if(y)return g[i].lavaTableRowIndex}return null}function H(a,b){var c=!0;for(var h in a)b.hasOwnProperty(h)?b[h]!==a[h]&&(c=!1):c=!1;return c}function W(b,c,h){var v=a(b),g=v.data("table"),y=g.option,w=y.columns,D=y.data.rows,k=v.prop("id");if(null===c.index||void 0===c.index)return void(console.error&&console.error("请指定行号"));var T=parseInt(c.index);if(h){var N=g["bodyDiv"+h].find(".table-row-"+T);if(1===h)var w=y.columns.slice(0,y.checkbox?y.frozenNumber+1:y.frozenNumber);else if(2===h)var w=y.columns.slice(y.checkbox?y.frozenNumber+1:y.frozenNumber)}else var w=y.columns;for(var i=0;i<w.length;i++)N.find(".table-"+k+"-"+attr).html(w[i].formatter?w[i].formatter(c.row[attr],c.row,T):c.row[attr]);c.row.lavaTableRowIndex=c.index,D[T]=c.row}function B(b,c,h,v){var g=a(b),y=g.data("table").option,w=(g.data("table"),y.columns),D=(y.data.rows,y.data.total),k=g.prop("id");if(h){if(1==h)var w=y.columns.slice(0,y.checkbox?y.frozenNumber+1:y.frozenNumber);else if(2==h)var w=y.columns.slice(y.checkbox?y.frozenNumber+1:y.frozenNumber)}else var w=y.columns;for(var T=[],i=0;i<w.length;i++){if(y.columnToggle)if(hiddenArray[j])var N="<td class='column-hidden'>";else var N="<td>";else var N="<td>";var P="";P="checkbox"==w[i].field?"<label class='checkbox'><input type='checkbox'><span></span></label>":w[i].formatter?w[i].formatter(v[w[i].field],v,D):void 0===v[w[i].field]?"":v[w[i].field],N+="<div class='table-"+k+"-"+w[i].field+"'>"+P+"</div></td>",T.push(N)}if(T.length>0){var z="<tr class='table-row-"+D+"'>"+T.join("")+"</tr>";h&&2!==h||(y.data.total+=1,v.lavaTableRowIndex=D,y.data.rows.push(v)),c.find("tbody").append(z)}}function M(b,c){var h=a(b),v=h.data("table").tableDiv,g=h.data("table").option.data.rows;v.find(".table-row-"+c).remove();for(var i=0;i<g.length;i++)c==g[i].lavaTableRowIndex&&g.splice(i,1)}a.fn.table=function(c,h){return"string"==typeof c?a.fn.table.methods[c](this,h):this.each(function(){a(this).data("table")&&a(this).data("table").option||a(this).data("table",{option:a.extend({},a.fn.table.defaults)}),a.extend(a(this).data("table").option,c),a.extend(O,a(this).data("table").option.footLanguage),b(this),L(this)})},a.fn.table.defaults={url:"",method:"post",pagination:!0,pageSize:20,pageNumber:1,pageSizeField:"rows",pageNumberField:"page",footLanguage:{},nowrap:!0,striped:!0,rownumbers:!1,formData:{},frozenNumber:0,lang:"zh-CN",fit:!1,multiSelect:!1,checkbox:!1,showLoader:!0,data:{total:0,rows:[]},onCheck:null,onBeforeLoad:null,onLoadSuccess:null},a.fn.table.methods={load:function(b,c){var h=a(b);h.data("table").option.formData=c,h.data("table").option.pageNumber=1,h.data("table").option.firstPage=null,h.data("table").option.lastPage=null,P(b)},reload:function(a){P(a)},loadData:function(b,c){var h=a(b),v=h.data("table").option;h.data("table").option.data=c,h.data("table").option.pageNumber=1,h.data("table").option.firstPage=null,h.data("table").option.lastPage=null,0==v.frozenNumber?N(b,h.data("table").bodyDiv.children().children()):(h.data("table").bodyDiv1.children().children().find("tbody").empty(),h.data("table").bodyDiv2.children().children().find("tbody").empty(),N(b,h.data("table").bodyDiv1.children().children(),1),N(b,h.data("table").bodyDiv2.children().children(),2)),v.pagination&&g(b)},getChecked:function(b){for(var c=a(b),h=c.data("table").tableDiv,v=c.data("table").option.data.rows,g=[],y=h.find("td .checkbox input[type='checkbox']"),i=0;i<v.length;i++)y.eq(i).prop("checked")&&g.push(v[y.eq(i).parent().parent().parent().parent().index()]);return g},options:function(b){return a(b).data("table").option},resize:function(a){z(a)},print:function(a){S(a)},updateRow:function(b,c){var h=a(b);h.data("table").bodyDiv2?(W(b,c,1),W(b,c,2)):W(b,c),window.setTimeout(function(){z(b)},1)},getRowIndex:function(a,b){return F(a,b)},appendRow:function(b,c){var h=a(b);h.data("table").bodyDiv?(B(b,h.data("table").bodyDiv,null,c),window.setTimeout(function(){z(b)},1)):(B(b,h.data("table").bodyDiv1,1,c),B(b,h.data("table").bodyDiv2,2,c),window.setTimeout(function(){z(b)},1))},deleteRow:function(a,b){M(a,b)}};var O={"zh-CN":{total:"总共",from:"显示",to:"到"},"en-US":{total:"Total",from:"displaying from",to:"to"},"zh-TW":{total:"總共",from:"顯示",to:"到"},"pt-PT":{total:"Total de",from:"Exibindo",to:"para"},af:{total:"van",from:"Wys",to:"tot"},am:{total:"-ը",from:"Դիտել",to:"-ից"},fr:{total:"au",from:"Affichage de",to:"et"},jp:{total:"全",from:"アイテム中",to:"から"},"pt-br":{total:"de",from:"Mostrando",to:"a"},ca:{total:"de",from:"Veient",to:"a"}}}(jQuery);
;/*!plugins/lava/js/tabs.js*/
var lavaTabs={tabIndex:0,timer:null,initDom:function(a){var b=this,v=$(a);v.addClass("lava-tabs");var c=$(a).data("tabs").options,h=$("<div class='lava-tabs-toolbar'></div>").appendTo(v),g=$("<div class='lava-tabs-pre'><a href='javascript:;' class='lava-tabs-btn-pre'><span class='glyphicon glyphicon-backward'></span></a></div>").appendTo(h),T=$("<div class='lava-tabs-btn-wrapper'></div>").appendTo(h),C=($("<div class='lava-tabs-next'><a href='javascript:;' class='lava-tabs-btn-next'><span class='glyphicon glyphicon-forward'></span></a></div>").appendTo(h),$("<div class='lava-tabs-btns'></div>").appendTo(T),g.width());T.css({"margin-left":C}),c.fit&&v.css({width:"100%",height:"100%"}).addClass("fit"),c.border&&v.addClass("bordered"),b.bindEvent(a),b.setOption(a)},addTab:function(a,b){var v=lavaTabs,c=$(a),h=c.children(".lava-tabs-toolbar").find(".lava-tabs-btns"),g=(c.data("tabs").options,b.hideType?b.hideType:"hide"),T=c.children(".lava-tabs-toolbar").find(".lava-tabs-btn-next");h.find(".lava-tabs-btn-selected").removeClass("lava-tabs-btn-selected");var C=$("<a href='javascript:;' class='lava-tabs-btn lava-tabs-btn-selected' data-for='lava-tabs-"+ ++v.tabIndex+"' data-hidetype='"+g+"'>"+b.title+" </a>").appendTo(h);b.closable!==!1&&$("<span class='close'></span>").appendTo(C),v.hideAll(a);$("<div class='lava-tabs-tab' id='lava-tabs-"+v.tabIndex+"' data-hidetype='"+g+"'>"+b.content+"</div>").appendTo(c);C.offset().left+C.outerWidth()>T.offset().left&&T.click()},select:function(a,b){for(var v=null,c=$(a).children(".lava-tabs-toolbar"),h=c.find(".lava-tabs-btn"),i=0;i<h.length;i++)if(b==i||b==h.eq(i).text()){v=h.eq(i);break}if(v){v.click();var g=c.children(".lava-tabs-btn-wrapper"),T=g.children(),C=c.find(".lava-tabs-btn-next"),y=T.css("left").replace("px","");y=y?parseInt(y):0,v.offset().left<g.offset().left?(y+=g.offset().left-v.offset().left,T.animate({left:y},"fast")):v.offset().left+v.outerWidth()>C.offset().left&&(y-=v.offset().left+v.outerWidth()-C.offset().left,T.animate({left:y},"fast"))}},setOption:function(a,b){var v=$(a),c=v.data("tabs").options;b&&$.extend(c,b);var h=v.find(".lava-tabs-toolbar"),g=["<style>"];c.bgColor&&g.push(".lava-tabs-toolbar,.lava-tabs-btn-pre,.lava-tabs-btn-next{background-color:"+c.bgColor+";}"),c.color&&g.push(".lava-tabs-btn,.lava-tabs-btn-pre,.lava-tabs-btn-next{color:"+c.color+";}"),c.borderColor&&(g.push(".lava-tabs-btn-pre,.lava-tabs-btn-next,.lava-tabs-btn{border-color:"+c.borderColor+";}"),h.css({"border-bottom-color":c.borderColor})),c.activeColor&&(g.push(".lava-tabs-btn-pre:hover,.lava-tabs-btn-next:hover,.lava-tabs-btn:hover,.lava-tabs-btn-selected,.lava-tabs-btn:focus {background-color:"+c.activeColor+";"),g.push(c.color?"color:"+c.color+";}":"}")),g.push("</style>"),v.data("tabs").style&&v.data("tabs").style.remove();var T=$(g.join("\n")).insertAfter(v);v.data("tabs").style=T},bindEvent:function(a){var b=this,v=$(a),c=v.data("tabs").options,h=v.children(".lava-tabs-toolbar"),g=h.children(".lava-tabs-btn-wrapper"),T=g.children(),C=h.find(".lava-tabs-btn-pre"),y=h.find(".lava-tabs-btn-next");h.delegate(".lava-tabs-btn","click",function(){if(!$(this).hasClass("lava-tabs-btn-selected")){h.find(".lava-tabs-btn").removeClass("lava-tabs-btn-selected"),$(this).addClass("lava-tabs-btn-selected"),b.hideAll(a);var v=$(this).attr("data-for");"position"==$(this).attr("data-hidetype")?$("#"+v).css({position:"relative",left:0}):$("#"+v).removeClass("lava-tabs-tab-close"),c.onSelect&&c.onSelect($.trim($(this).text()))}}),h.delegate(".close","click",function(){var a=$(this).parent().attr("data-for"),b=$(this).parent();return b.hasClass("lava-tabs-btn-selected")&&(b.next().length>0?b.next().click():b.prev().length>0&&b.prev().click()),c.onClose&&c.onClose($.trim(b.text())),b.remove(),$("#"+a).remove(),!1}),C.on("click",function(){var a=T.children(),b=a.first();if(b.offset().left<g.offset().left)for(var i=0;i<a.length;i++){var v=a.eq(i);if(v.offset().left+v.outerWidth()>=g.offset().left){var c=T.css("left").replace("px","");c=c?parseInt(c):0,v.offset().left-T.offset().left<=y.offset().left-a.eq(i+1).offset().left?c=0:c+=y.offset().left-a.eq(i+1).offset().left,T.animate({left:c},"fast");break}}}),y.on("click",function(){var a=T.children();if(a.last().offset().left+a.last().width()>y.offset().left)for(var i=0;i<a.length;i++){var b=a.eq(i);if(b.offset().left+b.width()>y.offset().left){var v=T.css("left").replace("px","");v=v?parseInt(v):0,a.last().offset().left+a.last().outerWidth()-b.offset().left<g.width()-y.outerWidth()?v-=a.last().offset().left+a.last().outerWidth()-y.offset().left:b.offset().left<=y.offset().left?v-=b.offset().left-g.offset().left:b.prev().length>0&&(v-=b.prev().offset().left-g.offset().left),T.animate({left:v},"fast");break}}}),window.onresize=function(){/msie 8/.test(navigator.userAgent.toLowerCase())&&(b.timer&&clearTimeout(b.timer),b.timer=setTimeout(function(){b.resizeDom(a)},10))}},hideAll:function(a){for(var b=$(a),v=b.children(".lava-tabs-tab"),i=0;i<v.length;i++){var c=v.eq(i);"position"==c.attr("data-hidetype")?c.css({position:"absolute",left:-1e4}):c.addClass("lava-tabs-tab-close")}},resizeDom:function(a){var b=$(a),v=b.children(".lava-tabs-toolbar"),c=b.children(".lava-tabs-tab").not(".lava-tabs-tab-close"),h=b.height()-v.height()-2;c.css({height:h})}};$.fn.lavaTabs=function(a,b){return"string"==typeof a?$.fn.lavaTabs.methods[a](this,b):this.each(function(){var b={};$.extend(b,$.fn.lavaTabs.defaults),$(this).data("tabs",{options:b}),$.extend($(this).data("tabs").options,a),lavaTabs.initDom(this)})},$.fn.lavaTabs.defaults={border:!1,fit:!0,bgColor:"",color:"",borderColor:"",activeColor:"",onClose:null,onSelect:null},$.fn.lavaTabs.methods={add:function(a,b){lavaTabs.addTab(a,b)},select:function(a,b){lavaTabs.select(a,b)},setOption:function(a,b){lavaTabs.setOption(a,b)}};
;/*!plugins/lava/js/timespinner.js*/
!function(a){var c={init:function(c){var v=a(c).css({paddingRight:20}),h=v.parent();h.css({position:"relative"});var g=a("<div class='timespinner-add'></div>").appendTo(h),S=a("<div class='timespinner-minus'></div>").appendTo(h),w=(v.innerHeight()/2,20);g.css({height:"45%",width:w}),S.css({height:"45%",width:w}),v.data("timespinner").add=g,v.data("timespinner").minus=S,this.initEvent(c)},initEvent:function(c){var v=this,h=a(c),g=h.data("timespinner").options,S=h.data("timespinner").add,w=h.data("timespinner").minus;h.on("click blur",function(e){if("click"==e.type){var a=v.getCursorIndex(c);if(1>a||a%3==0)return;if(a%3==1)var S=a-1;else if(a%3==2)var S=a-2;var w=S+2;g.start=S,g.end=w,v.setSelection(c,S,w)}else{var C=h.val(),D=v.formatData(h.val(),g.showSeconds,g.separator);h.val(D),g.onChange&&g.onChange(C,D)}}),S.on("click",function(){if(!h.attr("disabled")){var a=h.val(),S=new Date("2000/01/01 "+a).getTime();0==g.start?S+=36e5:3==g.start?S+=6e4:6==g.start&&(S+=1e3);var w=new Date(S),C=h.val(),a=v.formatData(w.getHours()+g.separator+w.getMinutes()+g.separator+w.getSeconds(),g.showSeconds,g.separator);h.val(a),h.focus(),v.setSelection(c,g.start,g.end),g.onChange&&g.onChange(C,a)}}),w.on("click",function(){if(!h.attr("disabled")){var a=h.val(),S=new Date("2000/01/01 "+a).getTime();0==g.start?S-=36e5:3==g.start?S-=6e4:6==g.start&&(S-=1e3);var w=new Date(S),C=h.val(),a=v.formatData(w.getHours()+g.separator+w.getMinutes()+g.separator+w.getSeconds(),g.showSeconds,g.separator);h.val(a),h.focus(),v.setSelection(c,g.start,g.end),g.onChange&&g.onChange(C,a)}})},getCursorIndex:function(a){var c=-1;if(a.selectionStart)c=a.selectionStart;else if(document.selection){var v=document.selection.createRange();v.moveStart("character",-a.value.length),c=v.text.length}return c},setSelection:function(a,c,v){if(a.createTextRange){var h=a.createTextRange();h.collapse(!0),h.moveEnd("character",v),h.moveStart("character",c),h.select()}else a.setSelectionRange&&a.setSelectionRange(c,v)},formatData:function(a,c,v){var h=this,g=null;if(a){var S=a.split(v),w=h.round(parseInt(S[0]),24),m=h.round(parseInt(S[1]),60),s=h.round(parseInt(S[2]),60);g=c?w+v+m+v+s:w+v+m}else g="";return g},round:function(a,c){var v=null;return v=a&&0/0!==a?a%c+"":"00",1==v.length?"0"+v:v},setValue:function(c,v){var h=this,g=a(c),S=g.data("timespinner").options,v=h.formatData(v,S.showSeconds,S.separator);g.val(v)}};a.fn.timespinner=function(v,h){return"string"==typeof v?a.fn.timespinner.methods[v](this,h):void a.each(this,function(){var h={};a.extend(h,a.fn.timespinner.defaults),a.extend(h,v),a(this).data("timespinner",{options:h}),c.init(this)})},a.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},a.fn.timespinner.methods={setValue:function(a,v){c.setValue(a,v)}}}(jQuery);
;/*!plugins/lava/js/tree.js*/
!function(a,c){var h={treeId:1,isIE:!1,init:function(a){this.bindEvent(a),this.checkIsIE()},checkIsIE:function(){this.isIE=/msie|edge|trident/.test(c.navigator.userAgent.toLowerCase())?!0:!1},loadLocalData:function(c){var h=a(c),v=h.data("tree").options;v.data.length>0?(v.loadFilter&&(v.data=v.loadFilter(v.data)),this.loadData(c,v.data)):console.error("本地数据为空")},loadData:function(c,v,k){var g=a(c),N=g.data("tree").options;g.addClass("lavaui-tree"),g.html(""),h.initData(v,N.htmlArray,0,void 0,N),h.initDom(c,c,N.htmlArray,k)},remoteData:function(c){var h=this,v=a(c),k=v.data("tree").options,g=v.data("tree").options.url;a.ajax({url:g,type:k.method,dataType:"json",data:k.queryParams}).done(function(a){a?(k.data=a,k.loadFilter&&(k.data=k.loadFilter(k.data)),h.loadData(c,k.data,function(){if(k.onLoadSuccess){var a=k.data;k.onLoadSuccess(a)}})):console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空")}).fail(function(){k.onLoadError&&k.onLoadError(),console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败")})},initData:function(a,c,h,v,k){for(var g=this,N=k.async,C=k.checkbox,i=0;i<a.length;i++){if(a[i].treeId="lava_tree_"+g.treeId++,a[i].level=h?h:0,a[i].parentTreeId=v?v:void 0,C){var b="<li id='"+a[i].treeId+"' {0}>{1}<span class='tree-chkbx {2}'></span><a href='javascript:;'><span class='{3}'></span><span>"+a[i].text+"</span></a>{4}</li>",I="";if(N?a[i].closed?(b=b.replace("{0}","class='closed'"),b=b.replace("{1}","<span class='button-open'></span>"),I="icon-folder",b=b.replace("{4}","<ul></ul>")):a[i].children&&a[i].children.length>0?(b=b.replace("{0}",""),b=b.replace("{1}","<span class='button-cloed'></span>"),I="icon-folder",b=b.replace("{4}","<ul></ul>")):(b=b.replace("{0}",""),b=b.replace("{1}",""),I="icon-file",b=b.replace("{4}","")):a[i].children&&a[i].children.length>0?a[i].closed?(b=b.replace("{0}","class='closed'"),b=b.replace("{1}","<span class='button-open'></span>"),I="icon-folder",b=b.replace("{4}","<ul></ul>")):(b=b.replace("{0}",""),b=b.replace("{1}","<span class='button-close'></span>"),I="icon-folder",b=b.replace("{4}","<ul></ul>")):(b=b.replace("{0}",""),b=b.replace("{1}",""),I="icon-file",b=b.replace("{4}","")),b=a[i].iconCls?b.replace("{3}","icon "+a[i].iconCls):b.replace("{3}","node-icon "+I),a[i].checked)a[i].checked=2,b=b.replace("{2}","tree-chk");else if(a[i].children&&a[i].children.length>0){for(var y=[],S=0;S<a[i].children.length;S++)y.push(a[i].children[S].checked?!0:!1);/\/false/.test("/"+y.join("/"))?/\/true/.test("/"+y.join("/"))?(a[i].checked=1,b=b.replace("{2}","tree-halfchk")):(a[i].checked=0,b=b.replace("{2}","tree-nochk")):(a[i].checked=2,b=b.replace("{2}","tree-chk"))}else a[i].checked=0,b=b.replace("{2}","tree-nochk")}else{var I="";if(N)if(a[i].closed){I="icon-folder";var b="<li id='"+a[i].treeId+"' class='closed'><span class='button-open'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else if(a[i].children&&a[i].children.length>0){I="icon-folder";var b="<li id='"+a[i].treeId+"'><span class='button-close'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{I="icon-file";var b="<li id='"+a[i].treeId+"'><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a></li>"}else if(a[i].children&&a[i].children.length>0)if(a[i].closed){I="icon-folder";var b="<li id='"+a[i].treeId+"' class='closed'><span class='button-open'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{I="icon-folder";var b="<li id='"+a[i].treeId+"'><span class='button-close'></span><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a><ul></ul></li>"}else{I="icon-file";var b="<li id='"+a[i].treeId+"'><span class='{0}'></span><a href='javascript:;'><span>"+a[i].text+"</span></a></li>"}b=a[i].iconCls?b.replace("{0}","icon "+a[i].iconCls):b.replace("{0}","node-icon "+I)}c.push({html:b,parentTreeId:v});var D=h+1;a[i].children&&g.initData(a[i].children,c,D,a[i].treeId,k)}},initDom:function(c,h,v,k){var g=this,N=a(c).data("tree").options.closedChildren;if(0==v.length)return void(k&&k());{var C=a(h);a(c)}v[0].parentTreeId&&(C=a("#"+v[0].parentTreeId).children("ul"));var b=v[0].parentTreeId,I=100;g.isIE&&(I=1e4),I=v.length>I?I:v.length;var y=v.splice(0,I),S=[],D=[];if(c==h)var j=!0;else var j=!C.parent("li").hasClass("closed");for(var T=!1,i=0;i<y.length;i++)b==y[i].parentTreeId?j?S.push(y[i].html):D.push(y[i]):(j?(C[0].childNodes.length>0?C.append(S.join("")):C[0].innerHTML=S.join(""),T=!0):N[b]=N[b]?N[b].concat(D):D,b=y[i].parentTreeId,C=b?a("#"+b).children("ul"):a(c),j=!C.parent("li").hasClass("closed"),j?(S=[y[i].html],D=[]):(S=[],D=[y[i]]));S.length>0&&(C[0].childNodes.length>0?C.append(S.join("")):C[0].innerHTML=S.join(""),T=!0),D.length>0&&(N[b]=N[b]?N[b].concat(D):D);var A=T?5:0;g.isIE&&T&&(A=3e3),v.length>0?A?setTimeout(function(){g.initDom(c,C,v,k)},A):g.initDom(c,C,v,k):k&&k()},treeParents:function(c,h){var v=this,k=a(h);if(k.tree("getParent",c).treeId){var g=k.tree("getParent",c).treeId;return a("#"+g).hasClass("closed")&&(a("#"+g).removeClass("closed"),a("#"+g).children("span").eq(0).removeClass("button-open").addClass("button-close")),v.treeParents(g,h)}},bindEvent:function(c){var h=this,v=a(c),k=v.data("tree").options;v.delegate(".button-open, .button-close, a, .tree-chkbx","click",function(){var v=a(this);if(v.hasClass("button-open")){h.expandNodes(v.parent(),c,k);var g=v.parent().prop("id"),N=h.findNode(k.data,g);k.onExpand&&k.onExpand(N)}else if(v.hasClass("button-close")){h.collapseNodes(v);var g=v.parent().prop("id"),N=h.findNode(k.data,g);k.onCollapse&&k.onCollapse(N)}else if("A"==v[0].tagName)h.selectNode(c,v);else if(v.hasClass("tree-chkbx")){h.checkNodes(c,v);var N=h.findNode(k.data,v.parent().prop("id"));k.onCheck&&k.onCheck(N)}})},expandNodes:function(c,v,k){var g=this,N=a(v),k=N.data("tree").options,C=c,b=C.attr("id"),I=g.findNode(k.data,b),y=I.level,S=I.id;C.hasClass("closed")&&C.removeClass("closed"),C.children(".button-open")[0].setAttribute("class","button-close"),C.children("a").children(".node-icon").removeClass("icon-folder node-icon").addClass("icon-loading"),C.children("ul")||C.append("<ul></ul>");var D=C.children("ul"),j=null;if(k.async)if(k.closedChildren[b]&&k.closedChildren[b].length>0)j=k.closedChildren[b],C.hasClass("closed")&&C.removeClass("closed"),j&&(g.initDom(v,D,j),C.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open"));else{if(I.children&&I.children.length>0)return void C.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open");a.ajax({url:k.url,type:k.method,dataType:"json",data:{id:S},success:function(a){if(a=k.loadFilter?k.loadFilter(a):a,a.length>0){var c=y+1;g.initData(a,k.htmlArray,c,b,k),g.findNode(k.data,b,function(c){c.children=a}),h.initDom(v,D,k.htmlArray)}else console.error?console.error("远程获取到的树数据为空"):console.log("远程获取到的树数据为空");C.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")},error:function(){console.error?console.error("远程获取树数据失败"):console.log("远程获取树数据失败"),C.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}})}else{if(j=k.closedChildren[b]){if(k.cascadeCheck)if(0===I.checked){var T=JSON.stringify(j);T.replace(/(tree\-chk)|(tree\-halfchk)/g,function(){return"tree-nochk"}),j=JSON.parse(T)}else if(2===I.checked){var T=JSON.stringify(j);T=T.replace(/(tree\-nochk)|(tree\-halfchk)/g,function(){return"tree-chk"}),j=JSON.parse(T)}g.initDom(v,D,j)}C.children("a").children(".icon-loading").removeClass("icon-loading").addClass("node-icon icon-folder_open")}},collapseNodes:function(a){var c=a;c[0].setAttribute("class","button-open"),c.siblings("a").children(".node-icon").removeClass("icon-folder_open").addClass("icon-folder"),c.parent("li").addClass("closed")},selectNode:function(c,h,v){var k=this,g=h,N=a(c),C=N.data("tree").options;C.selectedNodes||(C.selectedNodes=[]);var b=C.selectedNodes,I=g.parent().prop("id"),y=k.findNode(C.data,I);if(void 0===v||null===v)if(g.hasClass("selectNode")&&C.multiSelect){if(g.removeClass("selectNode"),b.length>0){for(var S=0,i=0;i<b.length;i++)if(I===b[i].treeId){S=i;break}b.splice(S,1)}C.onSelect&&C.onSelect(y)}else{if(!g.hasClass("selectNode")){if(C.multiSelect||(N.find(".selectNode").eq(0).removeClass("selectNode"),b=[]),g.addClass("selectNode"),b.length>=0)for(var S=null,i=0;i<b.length;i++)if(I===b[i].treeId){S=i;break}null===S&&b.push(y)}C.onSelect&&C.onSelect(y)}else if(v===!1){if(g.hasClass("selectNode")&&g.removeClass("selectNode"),b.length>0){for(var S=0,i=0;i<b.length;i++)if(I===b[i].treeId){S=i;break}b.splice(S,1)}}else if(v===!0){if(C.multiSelect||(N.find(".selectNode").eq(0).removeClass("selectNode"),b=[]),g.hasClass("selectNode")||(g.addClass("selectNode"),C.onSelect&&C.onSelect(y)),b.length>=0)for(var S=null,i=0;i<b.length;i++)if(I===b[i].treeId){S=i;break}null===S&&b.push(y)}C.selectedNodes=b},checkNodes:function(a,c){var h=this,v=c,k=v.hasClass("tree-chk"),g=v.hasClass("tree-nochk"),N=v.hasClass("tree-halfchk");k?h.setCheckStatus(a,v,0):g?h.setCheckStatus(a,v,2):N&&h.setCheckStatus(a,v,2)},setCheckStatus:function(c,h,v){var k=this,g=a(c),N=g.data("tree").options,C=N.data,b=h,I=b.parent(),y=I.children("ul").find(".tree-chkbx"),S=I.prop("id"),D=k.findNode(C,S),j=!1,T=null;D.children&&D.children.length>0&&(j=!0),D.parentTreeId&&D.parentTreeId.length>0&&(T=D.parentTreeId);var A="";if(0===v?A="tree-nochk":1===v?A="tree-halfchk":2===v&&(A="tree-chk"),b[0].setAttribute("class","tree-chkbx "+A),k.updateCheckStatusData(C,S,v),N.cascadeCheck){if(j&&(0===v||2===v)){for(var i=0,E=y.length;E>i;i++)y[i].setAttribute("class","tree-chkbx "+A);k.updateChildCheckStatusData(C,S,v)}T&&k.cascadeCheck(C,T)}},cascadeCheck:function(c,h){var v=this,k=a("#"+h).children(".tree-chkbx"),g=v.findNode(c,h),N=g.children,C=g.parentTreeId,b=null,I=/"checked":2/.test(JSON.stringify(N)),y=/"checked":1/.test(JSON.stringify(N)),S=/"checked":0/.test(JSON.stringify(N));I?y?(k[0].setAttribute("class","tree-chkbx tree-halfchk"),b=1):S?(k[0].setAttribute("class","tree-chkbx tree-halfchk"),b=1):(k[0].setAttribute("class","tree-chkbx tree-chk"),b=2):y?(k[0].setAttribute("class","tree-chkbx tree-halfchk"),b=1):(k[0].setAttribute("class","tree-chkbx tree-nochk"),b=0),v.updateCheckStatusData(c,h,b),void 0!==C&&v.cascadeCheck(c,C)},findNode:function(a,c,h){for(var v=this,i=0;i<a.length;i++){if(a[i].treeId==c)return h?h(a[i]):a[i];if(a[i].children&&a[i].children.length>0&&v.findNode(a[i].children,c))return h?h(v.findNode(a[i].children,c)):v.findNode(a[i].children,c)}},findNodeById:function(c,h,v){for(var k=this,g=a(c).data("tree").options.nodesById,i=0;i<h.length;i++)h[i].id==v&&g.push(h[i]),h[i].children&&h[i].children.length>0&&k.findNodeById(c,h[i].children,v)},findNodeByFilter:function(c,h,v){for(var k=this,g=a(c).data("tree").options,i=0;i<h.length;i++)v(h[i])&&g.nodesFilter.push(h[i]),h[i].children&&h[i].children.length>0&&k.findNodeByFilter(c,h[i].children,v)},removeNodeById:function(a,c,h){for(var v=this,i=0;i<c.length;i++){if(c[i].treeId==h){c.splice(i,1);break}c[i].children&&c[i].children.length>0&&v.removeNodeById(a,c[i].children,h)}},tranverseNode:function(c,h){for(var v=this,k=a(c).data("tree").options,i=0;i<h.length;i++)0==h[i].checked?k.uncheckedNodes.push(h[i]):1==h[i].checked?k.indeterminateNodes.push(h[i]):2==h[i].checked&&k.checkedNodes.push(h[i]),h[i].children&&h[i].children.length>0&&v.tranverseNode(c,h[i].children)},updateChildCheckStatusData:function(a,c,h){var v=this;v.findNode(a,c,function(a){if(a&&a.children&&a.children.length>0){var c=JSON.stringify(a.children);c=c.replace(/"checked":[0|1|2]/g,function(){return'"checked":'+h}),a.children=JSON.parse(c)}})},updateCheckStatusData:function(a,c,h){var v=this;v.findNode(a,c,function(a){a&&(a.checked=h)})}};a.fn.tree=function(c,v){return"string"==typeof c?a.fn.tree.methods[c](this,v):void a.each(this,function(){var v={};a.extend(v,a.fn.tree.defaults),a.extend(v,c);var k=a(this).data("tree"),g={htmlArray:[],closedChildren:{}};a.extend(v,g),a(this).data("tree",{options:v}),k||h.init(this),a(this).data("tree").options.url?h.remoteData(this):"data"in a(this).data("tree").options&&a(this).data("tree").options.data.length>0&&h.loadLocalData(this)})},a.fn.tree.defaults={url:"",method:"GET",data:[],checkbox:!1,cascadeCheck:!0,onlyLeafCheck:!1,async:!1,onSelect:null,multiSelect:!1,onCheck:null,onExpand:null,onCollapse:null,onLoadSuccess:null,onLoadError:null,queryParams:{},loadFilter:null},a.fn.tree.methods={find:function(c,v){a(c).data("tree").options.nodesById=[];var k=a(c).data("tree").options.data;return h.findNodeById(c,k,v),a(c).data("tree").options.nodesById},check:function(c,v){var k=a("#"+v).children(".tree-chkbx"),g=a(c).data("tree").options;if(h.setCheckStatus(c,k,2),g.onCheck){var N=h.findNode(g.data,v);g.onCheck(N)}},uncheck:function(c,v){var k=a("#"+v).children(".tree-chkbx");h.setCheckStatus(c,k,0)},select:function(v,k){var g=a("#"+k).children("a");h.selectNode(v,g,!0),h.treeParents(k,v),c.location.origin?c.location.href=c.location.origin+c.location.pathname+c.location.search+"#"+k:(c.location.origin=c.location.protocol+"//"+c.location.hostname+(c.location.port?":"+c.location.port:""),c.location.href=c.location.origin+c.location.pathname+c.location.search+"#"+k)},unSelect:function(c,v){var k=a("#"+v).children("a");h.selectNode(c,k,!1)},getChecked:function(c,v){var k=a(c),g=k.data("tree").options,N=g.data;g.checkedNodes=[],g.indeterminateNodes=[],g.uncheckedNodes=[],h.tranverseNode(c,N);var C={};if("object"==typeof v)for(var i=0;i<v.length;i++){var b=v[i];C[b]=g[b+"Nodes"]}else"string"==typeof v?C[v]=g[v+"Nodes"]:v||(C.checked=g.checkedNodes);return C},getSelected:function(c){var h=a(c).data("tree").options;return h.selectedNodes||(h.selectedNodes=[]),h.selectedNodes},getChildren:function(c,v){var k=a(c),g=k.data("tree").options.data,N=h.findNode(g,v);return N.children?N.children:[]},getParent:function(c,v){var k=a(c),g=k.data("tree").options.data,N=h.findNode(g,v);if(N.parentTreeId){var C=h.findNode(g,N.parentTreeId);if(C)return C}return{}},reload:function(c,v){var k=a(c).data("tree").options;k.queryParams=v?v:{},k.selectedNodes=[],k.checkedNodes=[],h.remoteData(c)},loadData:function(c,v){a(c).data("tree").options.data=v,h.loadData(c,a(c).data("tree").options.data)},getNodesByFilter:function(c,v){var k=a(c).data("tree").options;return k.nodesFilter=[],h.findNodeByFilter(c,k.data,v),k.nodesFilter},removeNode:function(c,v){a("#"+v).remove();var k=a(c).data("tree").options.data;h.removeNodeById(c,k,v)}}}(jQuery,window);
;/*!plugins/lava/js/videolayout.js*/
!function(a){function c(){return{$container:void 0,containerHeight:0,containerWidth:0,columnNum:4,borderSize:2,boxIndex:0,pageIndex:1,pageSize:4,pageCount:1,borderType:"solid",maxCount:16,isMouseDown:!1,$box:a("<div out='true' style='position:relative;float:left;'><div style='height:20px;width:100%;'></div><div style='position:absolute;width:100%;top:20px;bottom:0;'></div></div>"),$moveBox:a("<div style='position:absolute;z-index:9;pointer-events:none;'></div>"),$focusBox:a("<div style='position:absolute;z-index:998;pointer-events:none;border:2px solid red;'></div>")}}function h(c){var h=a.data(c,"lavaVideoLayout").options,v=a.data(c,"lavaVideoLayout").custom;return v.$container=a(c),v.containerHeight=a(c).height(),v.containerWidth=a(c).width(),a(c).delegate('div[out="true"]',"click",function(){var g=a(this).height(),y=a(this).width(),b=a(this).offset(),I=a(this).attr("index");return v.$moveBox.width(y).height(g).css("top",b.top-a(c).offset().top-1).css("left",b.left-a(c).offset().left-1).show(),v.boxIndex=parseInt(I,10),h.click.call(this,I,a(this)),!1}),a(c).delegate('div[out="true"]',"dblclick",function(){if(1!=v.$container.children("div").length){var g=parseInt(a(this).attr("index"),10);if(void 0===a(this).attr("zoom")){var y=a(this).attr("style");a(this).width("99.7%").height("99.7%").attr("zoom","out").attr("oldStyle",y).siblings("div").hide(),a(this).click(),h.zoomOut.call(this,g,a(this))}else{var b=a(this).attr("oldStyle");a(this).attr("style",b).removeAttr("zoom").removeAttr("oldStyle"),a(c).lavaVideoLayout("to",a(c).data("lavaVideoLayout").custom.pageSize),a(this).click(),h.zoomIn.call(this,g,a(this))}}}),a(c).delegate('div[out="true"]',"mouseenter",function(){var c=parseInt(a(this).attr("index"),10);if(v.isMouseDown&&c!==v.boxIndex){var h=a(this).height(),g=a(this).width(),y=a(this).offset();v.$focusBox.width(g).height(h).css("top",y.top-v.borderSize).css("left",y.left-v.borderSize).show()}}),a(c).delegate('div[out="true"]',"mouseleave",function(){v.isMouseDown!=v.boxIndex&&v.$focusBox.hide()}),a(c).delegate('div[out="true"]',"mousedown",function(e){var c=parseInt(a(this).attr("index"),10);3===e.which?h.rightClick.call(this,c,a(this)):1===e.which&&c===v.boxIndex&&(v.isMouseDown=!0,h.dragStart.call(this,c,a(this)))}),a(c).delegate('div[out="true"]',"mouseup",function(){var c=parseInt(a(this).attr("index"),10);v.isMouseDown&&(v.isMouseDown=!1,v.$focusBox.hide(),a(this).click().focus(),h.dragEnd.call(this,c,a(this)))}),v.$moveBox.css("border","1px "+v.borderType+" "+h.borderColor).appendTo(a(c).parent()).hide(),v.$focusBox.appendTo(a("body")).hide(),a(c).lavaVideoLayout("to",h.defaultCount),a(c)}a.fn.lavaVideoLayout=function(v,g){return"string"==typeof v?a.fn.lavaVideoLayout.methods[v](this,g):(v=v||{},this.each(function(){var g=a.data(this,"lavaVideoLayout");g?a.extend(g.options,v):(a.data(this,"lavaVideoLayout",{options:a.extend({},a.fn.lavaVideoLayout.defaults,v),custom:c()}),a(this).data("lavaVideoLayout").custom.maxCount=v.maxLayout),h(this)}))},a.fn.lavaVideoLayout.methods={options:function(c){return a.data(c[0],"lavaVideoLayout").options},addTool:function(a,c){var h=a.lavaVideoLayout("getItem",c.index),v=h.children("div").eq(0);v.append(c.el)},addContent:function(a,c){var h=a.lavaVideoLayout("getItem",c.index),v=h.children("div").eq(1);v.append(c.el)},getTitlePanel:function(a,c){var h=a.lavaVideoLayout("getItem",c);return null==h?null:h.children("div").eq(0)},getContentPanel:function(a,c){var h=a.lavaVideoLayout("getItem",c);return null==h?null:h.children("div").eq(1)},getItem:function(c,h){var v=a.data(c[0],"lavaVideoLayout").custom,g=v.$container.children("div"),y=null;return h=parseInt(h,10),a.each(g,function(c,v){var g=parseInt(a(this).attr("index"),10);h===g&&(y=a(v))}),y},getSelectedIndex:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;return h.boxIndex},setSelectedIndex:function(c,h){a(c).data("lavaVideoLayout").custom.boxIndex=h,a(c).data("lavaVideoLayout").custom.pageSize=1},pre:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.pageIndex>1&&(h.pageIndex--,to(h.pageSize))},next:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.pageIndex<h.maxCount&&(h.pageIndex++,to(h.pageSize))},hideSelectedBorder:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.$moveBox.hide()},getCount:function(c){var h=a.data(c[0],"lavaVideoLayout").custom,v=h.$container.children("div");return v.length},resize:function(c){var h=a.data(c[0],"lavaVideoLayout").custom;h.containerHeight=h.$container.height(),h.containerWidth=h.$container.width(),c.lavaVideoLayout("to",h.pageSize)},to:function(c,h,v){var g=a.data(c[0],"lavaVideoLayout").options,y=a.data(c[0],"lavaVideoLayout").custom,b=y.$container.children("div"),I=b.length;v&&(y.boxIndex=1),y.pageSize=h,y.pageCount=Math.ceil((I>h?I:h)/y.pageSize),y.pageIndex=Math.ceil((0===y.boxIndex?y.pageSize:y.boxIndex)/y.pageSize);var z=y.pageSize*y.pageCount;z=z>y.maxCount?y.maxCount:z;for(var i=0;z>i;i++)if(b.eq(i).length>0&&(i<(y.pageIndex-1)*y.pageSize||i>=y.pageIndex*y.pageSize))b.eq(i).hide();else if(b.eq(i).length>0&&i>=(y.pageIndex-1)*y.pageSize&&i<y.pageIndex*y.pageSize)b.eq(i).show();else if(0==b.eq(i).length&&i>=(y.pageIndex-1)*y.pageSize&&i<y.pageIndex*y.pageSize){var S=y.$box.css({background:g.bgColor,marginTop:y.borderSize,marginLeft:y.borderSize}),L=S.clone().attr("index",i+1);y.$container.append(L),g.addComplete(i+1,L)}a(".lp-layout.selected").removeClass("selected"),a(".lp-layout"+h).addClass("selected");{var V,w,C,k,$,B;y.$container.width()}V="99.66%",w="49.66%",C="32.996%",k="66.05%",$="24.662%",B="49.66%",a.each(y.$container.children("div"),function(c,v){var g=0,b=0;if(c>=(y.pageIndex-1)*y.pageSize&&c<y.pageIndex*y.pageSize){switch(c-=(y.pageIndex-1)*y.pageSize,h){case 1:g=V,b=V;break;case 2:g=V,b=w;break;case 3:0==c?(g=V,b=w):(g=w,b=w);break;case 4:g=w,b=w;break;case 6:0==c?(g=k,b=k):(g=C,b=C);break;case 9:g=C,b=C;break;case 10:2>c?(g=w,b=w):(g=$,b=$);break;case 12:g=C,b=$;break;case 16:g=$,b=$;break;case 25:g="19.59%",b="19.59%";break;case 36:g="16.26%",b="16.26%";break;case 64:g="12.12%",b="12.12%"}a(v).css({width:b,height:g});var c=a(this).attr("index");c=parseInt(c,10),c===y.boxIndex&&a(v).click()}})}},a.fn.lavaVideoLayout.defaults={defaultCount:4,layout:"square",bgColor:"black",borderColor:"rgb(68,176,44)",addComplete:function(){},removeComplete:function(){},zoomIn:function(){},zoomOut:function(){},click:function(){},rightClick:function(){},dragStart:function(){},dragEnd:function(){},resize:function(){},onBeforeRemove:function(){}}}(jQuery);