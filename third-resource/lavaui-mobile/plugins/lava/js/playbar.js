var lavaPlayBar={init:function(a){var e=this,t=$(a),l=t.data("playbar").options;t.addClass("lava-playbar");var o=$("<div class='lava-playbar-head' style='background:"+l.headerBgColor+";border-bottom:1px solid "+l.headerColor+";'></div>").appendTo(t),r=$("<div class='lava-playbar-btns'></div>").appendTo(o),i=($("<canvas class='lava-playbar-zoomout' width='50' height='40'></canvas>").appendTo(r),$("<canvas class='lava-playbar-zoomin' width='50' height='40'></canvas>").appendTo(r),$("<div class='lava-playbar-time'></div>").appendTo(o)),n=$("<div class='lava-playbar-timewrapper'></div>").appendTo(i),s=$("<canvas width='1000' height='40'></canvas>").appendTo(n);t.data("playbar").timeCanvas=s;var d=$("<div class='lava-playbar-body' style='background:"+l.bgColor+";'></div>").appendTo(t),m=$("<div class='lava-playbar-channelwrapper' stylel='background:"+l.channelWrapperBgColor+";'></div>").appendTo(d),v=$("<div class='lava-playbar-datawrapper'></div>").appendTo(d),p=$("<div class='lava-playbar-channels'><div>").appendTo(m),c=$("<div class='lava-playbar-linenames' style='background:"+l.channelBgColor+";'></div>").appendTo(m);t.data("playbar").lineNames=c;var h=$("<div class='lava-playbar-lines'></div>").appendTo(v),b=$("<canvas></canvas>").appendTo(h);t.data("playbar").lineCanvas=b;var f=$("<div class='lava-playbar-data'></div>").appendTo(v),y=$("<canvas></canvas>").appendTo(f),T=$("<div class='lava-playbar-rightrollbar' style='background:"+l.rollbarWrapperColor+";'><div>").appendTo(d);$("<div class='lava-playbar-up'></div>").appendTo(T),$("<div class='lava-playbar-down'></div>").appendTo(T),$("<div class='lava-playbar-rightbar' style='background:"+l.rollbarColor+";'></div>").appendTo(T),y[0].width=i.width(),t.data("playbar").dataCanvas=y;var u=$("<div class='lava-playbar-bottomrollbar' style='background:"+l.rollbarWrapperColor+";'></div>").appendTo(t),g=($("<div class='lava-playbar-bottomprev'></div>").appendTo(u),$("<div class='lava-playbar-bottomnext'></div>").appendTo(u),$("<div class='lava-playbar-bottombar' style='background:"+l.rollbarColor+";'></div>").appendTo(u),"<style>.lava-playbar-up:before {border-color:transparent transparent "+l.rollbarAngleColor+" transparent;}\n.lava-playbar-down:before {border-color:"+l.rollbarAngleColor+" transparent transparent transparent;}\n.lava-playbar-bottomprev:before {border-color:transparent "+l.rollbarAngleColor+" transparent transparent;}\n.lava-playbar-bottomnext:before {border-color:transparent transparent transparent "+l.rollbarAngleColor+";}\n.lava-playbar-bottombar:hover,.lava-playbar-rightbar:hover {background:"+l.rollbarHoverColor+" !important;}\n</style>"),L=$(g).appendTo(t);t.data("playbar").style=L;var z=$("<div class='lava-playbar-line'></div>").appendTo(t);t.data("playbar").line=z;var w=$("<div class='lava-playbar-timelabel'></div>").appendTo(t),C=$("<canvas class='lava-playbar-timelabelcanvas' width='50' height='13' style='position:absolute;z-index:1;'></canvas>").appendTo(w);t.data("playbar").timeLabel=w,t.data("playbar").timeLabelCanvas=C;var D=$("<div class='lava-playbar-point'></div>").appendTo(t),W=$("<canvas width='150' height='95' class='lava-playbar-pointcanvas'></canvas>").appendTo(D);t.data("playbar").point=D,t.data("playbar").pointCanvas=W;for(var B=0;4>B;B++)p.append("<div class='lava-playbar-channel' style='background:"+l.channelBgColor+";color:"+l.channelColor+";'></div>");e.drawZoomBtn(a,"zoomout","mouseout"),e.drawZoomBtn(a,"zoomin","mouseout"),e.loadTimeLabel(a)},drawZoomBtn:function(a,e,t){var l=$(a),o=l.data("playbar").options,r=l.find(".lava-playbar-"+e)[0].getContext("2d");r.clearRect(0,0,50,40);var i="mouseout"==t?o.btnColor:"#fff";"mouseover"==t?(r.fillStyle=o.btnColor,r.fillRect(8,8,34,24)):(r.strokeStyle=o.btnColor,r.lineWidth=1,r.strokeRect(8.5,8.5,34,24)),r.strokeStyle=i,r.lineWidth=1.2,r.beginPath(),r.arc(19,19,7,0,2*Math.PI),r.stroke(),r.fillStyle=i,r.fillRect(15,19,8,1),"zoomout"==e&&r.fillRect(19,15,1,8),r.beginPath(),r.moveTo(24,23),r.lineTo(34,30),r.lineWidth=3,r.stroke()},loadData:function(a,e){var t=this,l=$(a),o=l.data("playbar").options,r=l.find(".lava-playbar-data"),i=l.find(".lava-playbar-linenames"),n=l.find(".lava-playbar-lines"),s=l.data("playbar").point;"channel"==o.type?o.data=e:o.lineData=e;var d=l.find(".lava-playbar-rightbar"),m=l.find(".lava-playbar-data"),v=l.find(".lava-playbar-channels");m.css({top:0}),d.css({top:15}).hide(),v.css({top:0}),"channel"==o.type?(e.length>4&&(d.css({height:4/e.length*65}).show(),setTimeout(function(){d.hide(),setTimeout(function(){d.show()},100)},100)),v.show(),r.show(),i.hide(),n.hide(),s.hide(),t.loadChannelNum(a),t.loadChannelData(a)):"line"==o.type&&(v.hide(),r.hide(),i.show(),n.show(),s.show(),t.loadLineType(a),t.loadLineData(a))},changeType:function(a,e){var t=this,l=$(a),o=l.find(".lava-playbar-channels"),r=l.find(".lava-playbar-data"),i=l.find(".lava-playbar-linenames"),n=l.find(".lava-playbar-lines"),s=l.data("playbar").point,d=l.data("playbar").options;if(e!=d.type)if("channel"==e)o.show(),r.show(),i.hide(),n.hide(),s.hide(),d.type=e,d.data&&(t.loadChannelNum(a),t.loadChannelData(a));else if("line"==e&&(i.show(),n.show(),o.hide(),r.hide(),l.find(".lava-playbar-rightbar").hide(),d.type=e,d.lineData)){t.loadLineType(a),t.loadLineData(a);var m=(d.currentTime-d.startTime)/864e5*d.zoomLevel*d.timeWidth+100;t.loadTimeLabel(a,m)}},loadLineType:function(a){var e=$(a),t=e.find(".lava-playbar-linenames"),l=e.find(".lava-playbar-data"),o=e.data("playbar").options,r=o.lineData;t.empty(),l.css({top:0});for(var i=0;i<r.length;i++)t.append("<div class='lava-playbar-linename' style='color:"+r[i].color+"'>"+r[i].name+"</div>")},loadLineData:function(a){var e=$(a),t=e.data("playbar").options,l=e.find(".lava-playbar-linenames"),o=l.children(),r=(e.find(".lava-playbar-lines"),e.data("playbar").lineCanvas[0]);r.width=t.timeWidth;var i=r.getContext("2d");i.lineWidth=1.5;for(var n=t.lineData,s=0;s<n.length;s++){for(var d=!1,m=0;m<o.length;m++)if(o.eq(m).text()==n[s].name&&o.eq(m).hasClass("lava-playbar-linename-disable")){d=!0;break}if(!d){var v=n[s].data;i.strokeStyle=n[s].color?n[s].color:"#fff",i.lineJoin="round";for(var p=t.startTime+864e5/t.zoomLevel,c=!1,h=864e5/t.zoomLevel,m=(Math.ceil(1*v.length/t.timeWidth/t.zoomLevel),0);m<v.length;m++){var b=v[m].time;if(0==m&&b>=t.startTime||b<=t.startTime&&v[m+1]&&v[m+1].time>t.startTime?(i.beginPath(),t.time=b,i.moveTo((b-t.startTime)/h*t.timeWidth,95-95*(v[m].value/120)),c=!0):(b>=t.startTime&&p>=b||b>p&&v[m-1]&&v[m-1].time<p)&&i.lineTo(parseInt((b-t.startTime)/h*t.timeWidth)+.5,95-95*(v[m].value/120)),c&&(b>=p&&v[m-1]&&v[m-1].time<p||m==v.length-1)){i.stroke();break}}}}},loadChannelNum:function(a){var e=$(a),t=e.data("playbar").options,l=t.data,o=e.find(".lava-playbar-channels");o.empty();for(var r=0;r<l.length;r++)o.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'>"+l[r].name+"</div>");if(l.length<4)for(var r=0;r<4-l.length;r++)o.append("<div class='lava-playbar-channel' style='background:"+t.channelBgColor+";color:"+t.channelColor+";'></div>")},loadChannelData:function(a){var e=$(a),t=e.data("playbar").options,l=t.data,o=t.timeWidth,r=t.startTime+864e5/t.zoomLevel,i=e.data("playbar").dataCanvas[0],n=i.getContext("2d");if(l){i.height=24*l.length;for(var s=0;s<l.length;s++){var d=l[s].channel;n.clearRect(0,24*s+4,o,14);for(var m=0;m<d.length;m++)if(n.fillStyle="normal"==d[m].type?t.normalColor:t.alarmColor,d[m].startTime<=t.startTime&&d[m].endTime>t.startTime&&d[m].endTime<=r)n.fillRect(0,24*s+6,(d[m].endTime-t.startTime)/864e5*t.zoomLevel*o,12);else if(d[m].startTime>=t.startTime&&d[m].endTime<=r)n.fillRect((d[m].startTime-t.startTime)/864e5*t.zoomLevel*o,24*s+6,(d[m].endTime-d[m].startTime)/864e5*t.zoomLevel*o,12);else if(d[m].startTime>=t.startTime&&d[m].endTime>r)n.fillRect((d[m].startTime-t.startTime)/864e5*t.zoomLevel*o,24*s+6,(r-t.startTime)/864e5*t.zoomLevel*o,12);else if(d[m].startTime<t.startTime&&d[m].endTime>r)n.fillRect(0,24*s+6,o,12);else if(d[m].endTime<t.startTime&&d[m].startTime>r)break;n.fillStyle=t.channelSplitColor,n.fillRect(0,24*s+24,o,1)}}},drawTime:function(a){var e=this,t=a.data("playbar").options,l=a.find(".lava-playbar-time"),o=a.find(".lava-playbar-timewrapper"),r=a.find(".lava-playbar-bottombar"),i=o.children("canvas")[0],i=a.data("playbar").timeCanvas[0],n=l.width();t.timeWidth=n,o.css({width:n}),i.width=n,n*=t.zoomLevel;var s=0,d=0,m=i.getContext("2d");n-=1,1==t.zoomLevel?r.hide():r.show(),1==t.zoomLevel?(d=24,s=n/24):/^(2|4)$/.test(t.zoomLevel)?(d=144,s=n/144):8==t.zoomLevel?(d=720,s=n/720):24==t.zoomLevel?(d=1440,s=n/1440):48==t.zoomLevel?(d=2880,s=n/2880):144==t.zoomLevel?(d=8640,s=n/8640):288==t.zoomLevel?(d=8640,s=n/8640):1440==t.zoomLevel&&(d=43200,s=n/d),m.fillStyle=t.headerColor;var v=s-parseInt(t.startTime)%parseInt(864e5/d)/parseInt(864e5/d)*s;v=v==s?0:v;var p=parseInt(864e5/d)-parseInt(t.startTime)%parseInt(864e5/d);p=p==864e5/d?0:p;for(var c=0;90>=c;c++){var h=parseInt(v+c*s);if(m.fillRect(h,30,1,10),1==t.zoomLevel&&c%2==0&&c>0)m.fillText(e.round(c)+":00",24==c?h-28:h-14,28);else if(2==t.zoomLevel&&parseInt((10*c*60*1e3+t.startTime+p)/6e5)%6==0){var b=e.getTime(10*c*60*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(4==t.zoomLevel&&parseInt((10*c*60*1e3+t.startTime+p)/6e5)%6==0){var b=e.getTime(10*c*60*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(8==t.zoomLevel&&parseInt((2*c*60*1e3+t.startTime+p)/12e4)%10==0){var b=e.getTime(2*c*60*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(24==t.zoomLevel&&parseInt((60*c*1e3+t.startTime+p)/6e4)%6==0){var b=e.getTime(60*c*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(48==t.zoomLevel&&parseInt((30*c*1e3+t.startTime+p)/3e4)%6==0){var b=e.getTime(30*c*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(144==t.zoomLevel&&parseInt((10*c*1e3+t.startTime+p)/1e4)%6==0){var b=e.getTime(10*c*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(288==t.zoomLevel&&parseInt((10*c*1e3+t.startTime+p)/1e4)%6==0){var b=e.getTime(10*c*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else if(1440==t.zoomLevel)if(parseInt((2*c*1e3+t.startTime+p)/2e3)%30==0){var b=e.getTime(2*c*1e3+t.startTime+p);m.fillText(b,"24:00"==b?h-28:h-14,28)}else m.fillText(e.getSeconds(2*c*1e3+t.startTime+p),h,30)}e.drawBottomRollBar(a[0])},loadTimeLabel:function(a,e,t){var l=this,o=$(a),r=o.data("playbar").options,i=o.data("playbar").line,n=o.data("playbar").timeLabel,s=o.data("playbar").timeLabelCanvas[0],d=s.getContext("2d"),m=o.data("playbar").point,v=o.data("playbar").pointCanvas[0],p=v.getContext("2d"),c=o.data("playbar").lineNames.children();if(d.clearRect(0,0,50,14),d.fillStyle="#555",p.clearRect(0,0,150,95),e){if(t||(i.show(),n.show(),"line"==r.type&&m.show()),100>e?(e=100,t&&(i.hide(),n.hide(),"line"==r.type&&m.hide())):e>99+r.timeWidth?(e=99+r.timeWidth,t&&(i.hide(),n.hide(),"line"==r.type&&m.hide())):t&&(i.show(),n.show(),"line"==r.type&&m.show()),n.css(125>e?{left:100}:e>r.timeWidth+75?{left:r.timeWidth+50}:{left:e-25}),"line"==r.type&&r.lineData&&r.currentTime>=r.startTime&&r.currentTime<=r.startTime+864e5/r.zoomLevel){for(var h=20,b=0;b<r.lineData.length;b++){for(var f=!1,y=0;y<c.length;y++)if(c.eq(y).text()==r.lineData[b].name&&c.eq(y).hasClass("lava-playbar-linename-disable")){f=!0;break}if(!f){var T=r.lineData[b].data,u=null,g=0;if(!(0==T.length||r.currentTime<T[0].time||r.currentTime>T[T.length-1].time)){var L=l.quickSearch(T,r.currentTime);if(u=L.y,g=L.value,u){if(e>r.timeWidth-40){var z=p.createRadialGradient(140,u,2,140,u,12);z.addColorStop(0,r.lineData[b].color),z.addColorStop(1,"rgba(0,0,0,0)"),p.fillStyle=z,p.fillRect(130,u-10,20,20),p.fillStyle="rgba(0,0,0,0.53)",p.fillRect(0,h-12,130,16),p.fillStyle="#fff",p.font="11px arial",p.fillText(r.lineData[b].name+": "+g+r.lineData[b].unit,4,h)}else{var z=p.createRadialGradient(10,u,2,10,u,10);z.addColorStop(0,r.lineData[b].color),z.addColorStop(1,"rgba(85,85,85,0)"),p.fillStyle=z,p.fillRect(0,u-10,20,20),p.fillStyle="rgba(0,0,0,0.53)",p.fillRect(20,h-12,130,16),p.fillStyle="#fff",p.font="11px arial",p.fillText(r.lineData[b].name+": "+g+r.lineData[b].unit,24,h)}h+=16}}}}m.css(e>r.timeWidth-40?{left:e-140}:{left:e-10})}d.fillText(l.getTime(r.currentTime,!0),2,9),i.css({left:e})}else d.fillText("00:00:00",2,9)},quickSearch:function(a,e){var t=this;if(0==a.length)return{y:null,value:0};if(a.length%2==0)var l=a.length/2-1;else if(a.length%2==1)var l=(a.length-1)/2;return a[l].time==e?{y:95-95*(a[l].value/120),value:a[l].value}:a[l].time<e&&a[l+1]&&a[l+1].time>e?{y:95-95*(a[l].value/120),value:a[l].value}:a[l].time<e&&a[l+1]&&a[l+1].time<=e?t.quickSearch(a.slice(l+1),e):a[l].time>e?t.quickSearch(a.slice(0,l+1),e):void 0},drawBottomRollBar:function(a){var e=$(a),t=e.data("playbar").options,l=(e.find(".lava-playbar-time"),e.find(".lava-playbar-bottombar")),o=(e.width()-30)/t.zoomLevel;t.barWidth=50>o?50:o;var r=(e.width()-t.barWidth-30)*t.startTime/(864e5*(1-1/t.zoomLevel))+15;l.css({width:t.barWidth,left:r})},dragBottomRollBar:function(a,e){var t=this,l=$(a),o=l.find(".lava-playbar-bottomprev"),r=l.find(".lava-playbar-bottomrollbar"),i=l.find(".lava-playbar-bottombar"),n=(l.find(".lava-playbar-timewrapper"),l.data("playbar").options),s=e.clientX-n.lengthX-o.offset().left;15>s&&(s=15),s>r.width()-15-n.barWidth&&(s=r.width()-15-n.barWidth),i.css({left:s});var d=r.width()-30-n.barWidth;n.startTime=parseInt((s-15)/d*(864e5-864e5/n.zoomLevel)),t.drawTime(l),"channel"==n.type?t.loadChannelData(a):"line"==n.type&&t.loadLineData(a)},play:function(a,e){var t=this,l=$(a),o=l.data("playbar").options;o.currentTime=e,e<o.startTime&&(o.startTime=e,"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a),t.drawTime(l)),e-o.startTime>864e5/o.zoomLevel&&(o.startTime=e-864e5/o.zoomLevel,"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a),t.drawTime(l));var r=(e-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,r)},getTime:function(a,e){var t=this;return e?t.round(parseInt(a/36e5))+":"+t.round(parseInt(a%36e5/6e4))+":"+t.round(parseInt(a%6e4/1e3)):t.round(parseInt(a/36e5))+":"+t.round(parseInt(a%36e5/6e4))},getSeconds:function(a){var e=this,t=new Date(a);return e.round(t.getSeconds())},round:function(a){return 10>a?"0"+a:a},zoomOutOrIn:function(a,e){var t=this,l=$(a),o=l.data("playbar").options;if(o.zoomLevel,"zoomout"==e){if(1440==o.zoomLevel)return;288==o.zoomLevel?(o.zoomLevel*=5,o.startTime+=.8*(o.currentTime-o.startTime)):48==o.zoomLevel||8==o.zoomLevel?(o.zoomLevel*=3,o.startTime+=(o.currentTime-o.startTime)*(2/3)):(o.zoomLevel*=2,o.startTime+=.5*(o.currentTime-o.startTime))}else if("zoomin"==e){if(1==o.zoomLevel)return;1440==o.zoomLevel?(o.zoomLevel=o.zoomLevel/5,o.startTime-=4*(o.currentTime-o.startTime)):144==o.zoomLevel||24==o.zoomLevel?(o.zoomLevel=o.zoomLevel/3,o.startTime-=2*(o.currentTime-o.startTime)):(o.zoomLevel=o.zoomLevel/2,o.startTime-=o.currentTime-o.startTime)}if(o.startTime<0){o.startTime=0;var r=(o.currentTime-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,r)}else if(o.startTime>864e5-864e5/o.zoomLevel){o.startTime=864e5-864e5/o.zoomLevel;var r=(o.currentTime-o.startTime)/(864e5/o.zoomLevel)*o.timeWidth+100;t.loadTimeLabel(a,r)}t.drawTime(l),"channel"==o.type?t.loadChannelData(a):"line"==o.type&&t.loadLineData(a)},resize:function(a){var e=this,t=$(a),l=t.data("playbar").options;l.timeWidth=t.find(".lava-playbar-time").width(),e.drawTime(t),e.drawBottomRollBar(a);var o=(l.currentTime-l.startTime)/(864e5/l.zoomLevel)*l.timeWidth+100;e.loadTimeLabel(a,o,!0);var r=t.data("playbar").dataCanvas[0];r.width=l.timeWidth,"channel"==l.type?e.loadChannelData(a):"line"==l.type&&e.loadLineData(a)},bindEvent:function(a){var e=this,t=$(a),l=t.data("playbar").options,o=t.find(".lava-playbar-bottombar"),r=t.find(".lava-playbar-bottomrollbar"),i=t.find(".lava-playbar-rightbar"),n=t.find(".lava-playbar-rightrollbar"),s=t.find(".lava-playbar-channels"),d=t.find(".lava-playbar-data");r.on("mousedown",function(t){if(!o.is(":visible"))return!1;var r=t.clientX-$(this).offset().left-o.width()/2;15>r&&(r=15),r>$(this).width()-o.width()-15&&(r=$(this).width()-o.width()-15),o.css({left:r}),l.bottomDownFlag=!0,l.lengthX=t.clientX-o.offset().left,e.dragBottomRollBar(a,t);var i=(l.currentTime-l.startTime)/(864e5/l.zoomLevel)*l.timeWidth+100;return e.loadTimeLabel(a,i,!0),!1}),o.on("mousedown",function(a){return l.bottomDownFlag=!0,l.lengthX=a.clientX-$(this).offset().left,!1}),i.on("mousedown",function(a){return l.rightDownFlag=!0,l.lengthY=a.clientY-$(this).offset().top,!1}),t.find(".lava-playbar-time, .lava-playbar-datawrapper, .lava-playbar-timelabel, .lava-playbar-pointcanvas").on("click",function(o){var r=o.clientX-t.offset().left;return l.currentTime=l.startTime+(r-100)/(l.timeWidth*l.zoomLevel-l.zoomLevel)*864e5,e.loadTimeLabel(a,r),l.onPosition(l.currentTime),!1}),$("body").on("mousemove mouseup",function(o){if("mousemove"==o.type&&l.bottomDownFlag){e.dragBottomRollBar(a,o);var r=(l.currentTime-l.startTime)/(864e5/l.zoomLevel)*l.timeWidth+100;e.loadTimeLabel(a,r,!0)}else if("mousemove"==o.type&&l.bodyDownFlag){var r=o.clientX-t.offset().left;l.currentTime=l.startTime+(r-100)/(l.timeWidth*l.zoomLevel-l.zoomLevel)*864e5,l.currentTime>864e5&&(l.currentTime=864e5),e.loadTimeLabel(a,r),l.onPosition&&l.onPosition(l.currentTime)}else if("mousemove"==o.type&&l.rightDownFlag){var m=o.clientY-n.offset().top-l.lengthY;15>m&&(m=15),m>80-i.height()&&(m=80-i.height()),i.css({top:m});var v=-(m-15)/(65-i.height())*24*(l.data.length-4);s.css({top:v}),d.css({top:v})}else"mouseup"==o.type&&(l.bottomDownFlag=!1,l.bodyDownFlag=!1,l.rightDownFlag=!1)}),t.on("selectstart",function(){return!1}),a.addEventListener("mousewheel",function(t){if(t.wheelDelta>0)var l="zoomout";else var l="zoomin";return e.zoomOutOrIn(a,l),t.preventDefault(),t.stopPropagation(),!1}),a.addEventListener("DOMMouseScroll",function(t){if(t.detail<0)var l="zoomout";else var l="zoomin";return e.zoomOutOrIn(a,l),t.preventDefault(),t.stopPropagation(),!1}),t.find(".lava-playbar-zoomout,.lava-playbar-zoomin").on("mouseover mouseout click",function(t){var l=t.target.className.replace("lava-playbar-","");"mouseover"==t.type||"mouseout"==t.type?e.drawZoomBtn(a,l,t.type):e.zoomOutOrIn(a,l)}),t.delegate(".lava-playbar-linename","click",function(){$(this).toggleClass("lava-playbar-linename-disable"),e.loadLineData(a);var t=(l.currentTime-l.startTime)/(864e5/l.zoomLevel)*l.timeWidth+100;e.loadTimeLabel(a,t)}),$(window).on("resize",function(){e.resize(a)})}};$.fn.lavaPlayBar=function(a,e){return"string"==typeof a?$.fn.lavaPlayBar.methods[a](this,e):this.each(function(){var e={};$.extend(e,$.fn.lavaPlayBar.defaults),$(this).data("playbar",{options:e}),$.extend($(this).data("playbar").options,a),lavaPlayBar.init(this),lavaPlayBar.drawTime($(this)),lavaPlayBar.bindEvent(this)})},$.fn.lavaPlayBar.defaults={headerColor:"#999",headerBgColor:"#223",channelBgColor:"#222",channelColor:"#999",bgColor:"#000",channelWrapperBgColor:"#333",btnColor:"#32c5d2",rollbarWrapperColor:"#252525",rollbarColor:"#555",rollbarHoverColor:"#666",rollbarAngleColor:"#888",normalColor:"#00ad76",alarmColor:"#b74201",channelSplitColor:"#333",zoomLevel:1,startTime:0,currentTime:0,type:"channel",time:0,onPosition:function(){}},$.fn.lavaPlayBar.methods={loadData:function(a,e){return lavaPlayBar.loadData(a,e)},changeType:function(a,e){return lavaPlayBar.changeType(a,e)},play:function(a,e){return lavaPlayBar.play(a,e)},resize:function(a){lavaPlayBar.resize(a)},options:function(a){return $(a).data("playbar").options},getType:function(a){return $(a).data("playbar").options.type},getTime:function(a){return $(a).data("playbar").options.currentTime}};