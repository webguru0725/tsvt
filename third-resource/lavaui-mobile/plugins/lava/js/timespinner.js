!function(e){var t={init:function(t){var n=e(t).css({paddingRight:20}),a=n.parent();a.css({position:"relative"});var r=e("<div class='timespinner-add'></div>").appendTo(a),s=e("<div class='timespinner-minus'></div>").appendTo(a),i=(n.innerHeight()/2,20);r.css({height:"45%",width:i}),s.css({height:"45%",width:i}),n.data("timespinner").add=r,n.data("timespinner").minus=s,this.initEvent(t)},initEvent:function(t){var n=this,a=e(t),r=a.data("timespinner").options,s=a.data("timespinner").add,i=a.data("timespinner").minus;a.on("click blur",function(e){if("click"==e.type){var s=n.getCursorIndex(t);if(1>s||s%3==0)return;if(s%3==1)var i=s-1;else if(s%3==2)var i=s-2;var o=i+2;r.start=i,r.end=o,n.setSelection(t,i,o)}else{var c=n.formatData(a.val(),r.showSeconds,r.separator);a.val(c),r.onChange&&r.onChange(c)}}),s.on("click",function(){var e=a.val(),s=new Date("2000/01/01 "+e).getTime();0==r.start?s+=36e5:3==r.start?s+=6e4:6==r.start&&(s+=1e3);var i=new Date(s),e=n.formatData(i.getHours()+r.separator+i.getMinutes()+r.separator+i.getSeconds(),r.showSeconds,r.separator);a.val(e),a.focus(),n.setSelection(t,r.start,r.end),r.onChange&&r.onChange(e)}),i.on("click",function(){var e=a.val(),s=new Date("2000/01/01 "+e).getTime();0==r.start?s-=36e5:3==r.start?s-=6e4:6==r.start&&(s-=1e3);var i=new Date(s),e=n.formatData(i.getHours()+r.separator+i.getMinutes()+r.separator+i.getSeconds(),r.showSeconds,r.separator);a.val(e),a.focus(),n.setSelection(t,r.start,r.end),r.onChange&&r.onChange(e)})},getCursorIndex:function(e){var t=-1;if(e.selectionStart)t=e.selectionStart;else if(document.selection){var n=document.selection.createRange();n.moveStart("character",-e.value.length),t=n.text.length}return t},setSelection:function(e,t,n){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",n),a.moveStart("character",t),a.select()}else e.setSelectionRange&&e.setSelectionRange(t,n)},formatData:function(e,t,n){var a=this,r=null;if(e){var s=e.split(n),i=a.round(parseInt(s[0]),24),o=a.round(parseInt(s[1]),60),c=a.round(parseInt(s[2]),60);r=t?i+n+o+n+c:i+n+o}else r="";return r},round:function(e,t){var n=null;return n=e&&0/0!==e?e%t+"":"00",1==n.length?"0"+n:n},setValue:function(t,n){var a=this,r=e(t),s=r.data("timespinner").options,n=a.formatData(n,s.showSeconds,s.separator);r.val(n)}};e.fn.timespinner=function(n,a){return"string"==typeof n?e.fn.timespinner.methods[n](this,a):void e.each(this,function(){var a={};e.extend(a,e.fn.timespinner.defaults),e.extend(a,n),e(this).data("timespinner",{options:a}),t.init(this)})},e.fn.timespinner.defaults={showSeconds:!0,separator:":",start:0,end:2,onChange:null},e.fn.timespinner.methods={setValue:function(e,n){t.setValue(e,n)}}}(jQuery);