!function(e){function t(){return{$container:void 0,containerHeight:0,containerWidth:0,columnNum:4,borderSize:2,boxIndex:0,pageIndex:1,pageSize:4,pageCount:1,borderType:"solid",maxCount:16,isMouseDown:!1,$box:e("<div out='true' style='position:relative;float:left;'><div style='height:20px;width:100%;'></div><div style='position:absolute;width:100%;top:20px;bottom:0;'></div></div>"),$moveBox:e("<div style='position:absolute;z-index:9;pointer-events:none;'></div>"),$focusBox:e("<div style='position:absolute;z-index:998;pointer-events:none;border:2px solid red;'></div>")}}function a(t){var a=e.data(t,"lavaVideoLayout").options,o=e.data(t,"lavaVideoLayout").custom;return o.$container=e(t),o.containerHeight=e(t).height(),o.containerWidth=e(t).width(),e(t).delegate('div[out="true"]',"click",function(){var i=e(this).height(),n=e(this).width(),d=e(this).offset(),r=e(this).attr("index");return o.$moveBox.width(n).height(i).css("top",d.top-e(t).offset().top-1).css("left",d.left-e(t).offset().left-1).show(),o.boxIndex=parseInt(r,10),a.click.call(this,r,e(this)),!1}),e(t).delegate('div[out="true"]',"dblclick",function(){if(1!=o.$container.children("div").length){var i=parseInt(e(this).attr("index"),10);if(void 0===e(this).attr("zoom")){var n=e(this).attr("style");e(this).width("99.7%").height("99.7%").attr("zoom","out").attr("oldStyle",n).siblings("div").hide(),e(this).click(),a.zoomOut.call(this,i,e(this))}else{var d=e(this).attr("oldStyle");e(this).attr("style",d).removeAttr("zoom").removeAttr("oldStyle"),e(t).lavaVideoLayout("to",e(t).data("lavaVideoLayout").custom.pageSize),e(this).click(),a.zoomIn.call(this,i,e(this))}}}),e(t).delegate('div[out="true"]',"mouseenter",function(){var t=parseInt(e(this).attr("index"),10);if(o.isMouseDown&&t!==o.boxIndex){var a=e(this).height(),i=e(this).width(),n=e(this).offset();o.$focusBox.width(i).height(a).css("top",n.top-o.borderSize).css("left",n.left-o.borderSize).show()}}),e(t).delegate('div[out="true"]',"mouseleave",function(){o.isMouseDown!=o.boxIndex&&o.$focusBox.hide()}),e(t).delegate('div[out="true"]',"mousedown",function(t){var i=parseInt(e(this).attr("index"),10);3===t.which?a.rightClick.call(this,i,e(this)):1===t.which&&i===o.boxIndex&&(o.isMouseDown=!0,a.dragStart.call(this,i,e(this)))}),e(t).delegate('div[out="true"]',"mouseup",function(){var t=parseInt(e(this).attr("index"),10);o.isMouseDown&&(o.isMouseDown=!1,o.$focusBox.hide(),e(this).click().focus(),a.dragEnd.call(this,t,e(this)))}),o.$moveBox.css("border","1px "+o.borderType+" "+a.borderColor).appendTo(e(t).parent()).hide(),o.$focusBox.appendTo(e("body")).hide(),e(t).lavaVideoLayout("to",a.defaultCount),e(t)}e.fn.lavaVideoLayout=function(o,i){return"string"==typeof o?e.fn.lavaVideoLayout.methods[o](this,i):(o=o||{},this.each(function(){var i=e.data(this,"lavaVideoLayout");i?e.extend(i.options,o):(e.data(this,"lavaVideoLayout",{options:e.extend({},e.fn.lavaVideoLayout.defaults,o),custom:t()}),e(this).data("lavaVideoLayout").custom.maxCount=o.maxLayout),a(this)}))},e.fn.lavaVideoLayout.methods={options:function(t){return e.data(t[0],"lavaVideoLayout").options},addTool:function(e,t){var a=e.lavaVideoLayout("getItem",t.index),o=a.children("div").eq(0);o.append(t.el)},addContent:function(e,t){var a=e.lavaVideoLayout("getItem",t.index),o=a.children("div").eq(1);o.append(t.el)},getTitlePanel:function(e,t){var a=e.lavaVideoLayout("getItem",t);return null==a?null:a.children("div").eq(0)},getContentPanel:function(e,t){var a=e.lavaVideoLayout("getItem",t);return null==a?null:a.children("div").eq(1)},getItem:function(t,a){var o=e.data(t[0],"lavaVideoLayout").custom,i=o.$container.children("div"),n=null;return a=parseInt(a,10),e.each(i,function(t,o){var i=parseInt(e(this).attr("index"),10);a===i&&(n=e(o))}),n},getSelectedIndex:function(t){var a=e.data(t[0],"lavaVideoLayout").custom;return a.boxIndex},setSelectedIndex:function(t,a){e(t).data("lavaVideoLayout").custom.boxIndex=a,e(t).data("lavaVideoLayout").custom.pageSize=1},pre:function(t){var a=e.data(t[0],"lavaVideoLayout").custom;a.pageIndex>1&&(a.pageIndex--,to(a.pageSize))},next:function(t){var a=e.data(t[0],"lavaVideoLayout").custom;a.pageIndex<a.maxCount&&(a.pageIndex++,to(a.pageSize))},hideSelectedBorder:function(t){var a=e.data(t[0],"lavaVideoLayout").custom;a.$moveBox.hide()},getCount:function(t){var a=e.data(t[0],"lavaVideoLayout").custom,o=a.$container.children("div");return o.length},resize:function(t){var a=e.data(t[0],"lavaVideoLayout").custom;a.containerHeight=a.$container.height(),a.containerWidth=a.$container.width(),t.lavaVideoLayout("to",a.pageSize)},to:function(t,a,o){var i=e.data(t[0],"lavaVideoLayout").options,n=e.data(t[0],"lavaVideoLayout").custom,d=n.$container.children("div"),r=d.length;o&&(n.boxIndex=1),n.pageSize=a,n.pageCount=Math.ceil((r>a?r:a)/n.pageSize),n.pageIndex=Math.ceil((0===n.boxIndex?n.pageSize:n.boxIndex)/n.pageSize);var s=n.pageSize*n.pageCount;s=s>n.maxCount?n.maxCount:s;for(var u=0;s>u;u++)if(d.eq(u).length>0&&(u<(n.pageIndex-1)*n.pageSize||u>=n.pageIndex*n.pageSize))d.eq(u).hide();else if(d.eq(u).length>0&&u>=(n.pageIndex-1)*n.pageSize&&u<n.pageIndex*n.pageSize)d.eq(u).show();else if(0==d.eq(u).length&&u>=(n.pageIndex-1)*n.pageSize&&u<n.pageIndex*n.pageSize){var l=n.$box.css({background:i.bgColor,marginTop:n.borderSize,marginLeft:n.borderSize}),c=l.clone().attr("index",u+1);n.$container.append(c),i.addComplete(u+1,c)}e(".lp-layout.selected").removeClass("selected"),e(".lp-layout"+a).addClass("selected");{var h,v,p,g,f,x;n.$container.width()}h="99.66%",v="49.66%",p="32.996%",g="66.05%",f="24.662%",x="49.66%",e.each(n.$container.children("div"),function(t,o){var i=0,d=0;if(t>=(n.pageIndex-1)*n.pageSize&&t<n.pageIndex*n.pageSize){switch(t-=(n.pageIndex-1)*n.pageSize,a){case 1:i=h,d=h;break;case 2:i=h,d=v;break;case 3:0==t?(i=h,d=v):(i=v,d=v);break;case 4:i=v,d=v;break;case 6:0==t?(i=g,d=g):(i=p,d=p);break;case 9:i=p,d=p;break;case 10:2>t?(i=v,d=v):(i=f,d=f);break;case 12:i=p,d=f;break;case 16:i=f,d=f;break;case 25:i="19.59%",d="19.59%";break;case 36:i="16.26%",d="16.26%";break;case 64:i="12.12%",d="12.12%"}e(o).css({width:d,height:i});var t=e(this).attr("index");t=parseInt(t,10),t===n.boxIndex&&e(o).click()}})}},e.fn.lavaVideoLayout.defaults={defaultCount:4,layout:"square",bgColor:"black",borderColor:"rgb(68,176,44)",addComplete:function(){},removeComplete:function(){},zoomIn:function(){},zoomOut:function(){},click:function(){},rightClick:function(){},dragStart:function(){},dragEnd:function(){},resize:function(){},onBeforeRemove:function(){}}}(jQuery);