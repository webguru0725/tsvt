angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function e(e,t){return t?angular.isFunction(e.$parent[t])?e.$parent[t]:function(e){return e[t]}:void 0}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(t,n,a){$(function(){angular.isArray(t.model)||(t.model=[]);var i=$("select",n),r=a.typeaheadSource?a.typeaheadSource.split("."):null,l=r?r.length>1?t.$parent[r[0]][r[1]]:t.$parent[r[0]]:null;i.tagsinput(t.$parent[a.options||""]||{typeahead:{source:angular.isFunction(l)?l:null},itemValue:e(t,a.itemvalue),itemText:e(t,a.itemtext),confirmKeys:e(t,a.confirmkeys)?JSON.parse(a.confirmkeys):[13],tagClass:angular.isFunction(t.$parent[a.tagclass])?t.$parent[a.tagclass]:function(){return a.tagclass}});for(var o=0;o<t.model.length;o++)i.tagsinput("add",t.model[o]);i.on("itemAdded",function(e){-1===t.model.indexOf(e.item)&&t.model.push(e.item)}),i.on("itemRemoved",function(e){var n=t.model.indexOf(e.item);-1!==n&&t.model.splice(n,1)});var u=t.model.slice();t.$watch("model",function(){var e,n=t.model.filter(function(e){return-1===u.indexOf(e)}),a=u.filter(function(e){return-1===t.model.indexOf(e)});for(u=t.model.slice(),e=0;e<a.length;e++)i.tagsinput("remove",a[e]);for(i.tagsinput("refresh"),e=0;e<n.length;e++)i.tagsinput("add",n[e])},!0)})}}}]);